---
title: Сертификаты и безопасность
titleSuffix: Configuration Manager
description: Управление сертификатами и безопасностью в System Center Updates Publisher
ms.date: 04/29/2017
ms.prod: configuration-manager
ms.technology: configmgr-sum
ms.topic: conceptual
ms.assetid: a7f91e63-4750-402e-9970-dd14be7f76a3
author: mestew
ms.author: mstewart
manager: dougeby
ms.openlocfilehash: 5f441bc277f9c91cb1a83ce97879bd29b6349481
ms.sourcegitcommit: bbf820c35414bf2cba356f30fe047c1a34c5384d
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/21/2020
ms.locfileid: "81701612"
---
# <a name="manage-certificates-and-security-for-updates-publisher"></a>Управление сертификатами и безопасностью в Updates Publisher

*Область применения: Configuration Manager (Current Branch)*

Указанные ниже процедуры помогут настроить хранилище сертификатов на сервере обновлений, самозаверяющий сертификат на клиентском компьютере и групповую политику, чтобы разрешить агенту обновления Windows на компьютерах проверить опубликованные обновления.

## <a name="configure-the-certificate-store-on-the-update-server"></a>Настройка хранилища сертификатов на сервере обновлений
 Для подписывания обновлений в публикуемых каталогах Updates Publisher использует цифровой сертификат. Перед публикацией каталога на сервере обновлений убедитесь, что сертификат находится в хранилище сертификатов на сервере обновлений и в хранилище сертификатов на компьютере с Updates Publisher (если этот компьютер расположен удаленно от сервера обновлений).

Ниже описан один из нескольких возможных способов добавления сертификата в хранилище сертификатов на сервере обновлений.

### <a name="to-configure-the-certificate-store"></a>Настройка хранилища сертификатов
1.  На компьютере с доступом к компьютеру с Updates Publisher и к серверу обновлений щелкните **Пуск**, **Выполнить**, в текстовом поле введите **MMC** и нажмите кнопку **ОК**, чтобы открыть консоль управления (MMC).

2.  Последовательно щелкните **Файл** > **Добавить или удалить оснастку** > **Добавить** > **Сертификаты** > **Добавить**, выберите **Учетная запись компьютера**, а затем нажмите кнопку **Далее**.

3.  Выберите **Другой компьютер**, введите имя сервера обновлений или щелкните **Обзор**, чтобы найти компьютер с сервером обновлений, а затем последовательно щелкните **Готово** > **Закрыть** и нажмите кнопку **ОК**.

4.  Разверните область **Сертификаты (*имя сервера обновления*)** , после чего разверните область **WSUS** и щелкните **Сертификаты**.

5.  В области результатов щелкните нужный сертификат правой кнопкой мыши и в контекстном меню выберите **Все задачи**, а затем щелкните **Экспорт**.

6.  Используйте параметры по умолчанию в мастере экспорта сертификатов, чтобы создать экспортируемый файл с именем и местоположением, указанными в мастере. Прежде чем перейти к следующему шагу, убедитесь, что этот файл доступен на сервере обновлений.

7.  Щелкните правой кнопкой мыши **Доверенные издатели**, **Все задачи**, а затем щелкните **Импорт**. Завершите работу мастера импорта сертификатов, используя экспортируемый файл из шага 6.

8.  Если используется самозаверяющий сертификат, такой как **WSUS Publishers Self-signed**, щелкните правой кнопкой мыши **Доверенные корневые центры сертификации**, **Все задачи** и выберите **Импорт**. Завершите работу мастера импорта сертификатов, используя экспортируемый файл из шага 6.

9.  Щелкните правой кнопкой мыши **Сертификаты (*имя сервера обновления*)** , выберите **Подключиться к другому компьютеру**, а затем введите имя компьютера для компьютера с Updates Publisher и нажмите кнопку **ОК**.

10. Если Updates Publisher расположен удаленно от сервера обновлений, повторите действия, указанные в шагах 7–9, чтобы импортировать сертификат в хранилище сертификатов на компьютер с Updates Publisher.



## <a name="configure-a-self-signing-certificate-on-client-computers"></a>Настройка самозаверяющего сертификата на клиентских компьютерах
На клиентских компьютерах агент обновления Windows (WUA) сканирует каталог на предмет обновлений. Процесс обновления завершится сбоем, если агент не сможет найти цифровой сертификат в хранилище надежных издателей на локальном компьютере. Если для публикации каталога обновления использовался самозаверяющий сертификат, например **WSUS Publishers Self-signed**, этот сертификат должен также присутствовать в хранилище "Доверенные корневые центры сертификации" на локальном компьютере, чтобы агент мог проверить действительность этого сертификата.

Вы можете использовать один из методов настройки сертификатов на клиентских компьютерах, например применить групповую политику и **мастер импорта сертификатов** или средство Certutil и распространение программного обеспечения.

Далее указан один из примеров настройки сертификата подписи на клиентских компьютерах.

### <a name="to-configure-a-self-signing-certificate-on-client-computers"></a>Настройка самозаверяющего сертификата на клиентских компьютерах
1. На компьютере с доступом к серверу обновлений щелкните **Пуск**, **Выполнить**, в текстовом поле введите **MMC** и нажмите кнопку **ОК**, чтобы открыть консоль управления (MMC).

2. Последовательно щелкните **Файл** > **Добавить или удалить оснастку** > **Добавить** > **Сертификаты** > **Добавить**, выберите **Учетная запись компьютера**, а затем нажмите кнопку **Далее**.

3. Выберите **Другой компьютер**, введите имя сервера обновлений или щелкните **Обзор**, чтобы найти компьютер с сервером обновлений, а затем последовательно щелкните **Готово** > **Закрыть** и нажмите кнопку **ОК**.

4. Разверните область **Сертификаты (*имя сервера обновления*)** , после чего разверните область **WSUS** и щелкните **Сертификаты**.

5. В области результатов щелкните сертификат правой кнопкой мыши и в контекстном меню выберите **Все задачи**, а затем щелкните **Экспорт**. Завершите работу **мастера экспорта сертификатов**, используя параметры по умолчанию, чтобы создать экспортируемый файл сертификата с именем и местоположением, указанными в мастере.

6. Используйте один из указанных ниже методов, чтобы добавить сертификат, используемый для подписи каталога обновлений, на каждом клиентском компьютере, который будет использовать агент обновления Windows для поиска обновлений в каталоге. Добавьте сертификат на клиентский компьютер, как показано ниже.

   -   Самозаверяющие сертификаты. Добавьте сертификат в хранилища сертификатов **доверенных корневых центров сертификации** и **доверенных издателей**.

   -   Сертификаты, выданные центром сертификации (CA). Добавьте сертификат в хранилище сертификатов **доверенных издателей**.

   > [!NOTE]
   > WUA также проверяет, включен ли на локальном компьютере параметр групповой политики **Allow signed content from intranet Microsoft update service location** (Разрешить прием содержимого с подписью из службы обновления Майкрософт в интрасети). Этот параметр политики должен быть включен, чтобы агент обновления Windows искал обновления, созданные и опубликованные с помощью Updates Publisher. Дополнительные сведения о включении этого параметра групповой политики см. в руководстве по [настройке групповой политики на клиентских компьютерах](https://docs.microsoft.com/previous-versions/bb530967(v=technet.10)).



## <a name="configuring-group-policy-to-allow-wuaon-computers-to-scan-for-published-updates"></a>Настройка групповой политики, чтобы разрешить WUA выполнять на компьютерах проверку опубликованных обновлений
Необходимо включить параметр политики Allow signed content from an intranet Microsoft update service location (Разрешить прием содержимого с подписью из службы обновления Майкрософт в интрасети), прежде чем агент обновления Windows сможет проверить обновления, созданные и опубликованные с помощью Updates Publisher. Если эта политика включена, агент WUA будет принимать обновления, полученные через расположение в интрасети, если обновления подписаны в хранилище сертификатов **доверенных издателей** на локальном компьютере. Существует несколько способов настройки групповой политики на компьютерах в среде.

Для компьютеров вне домена можно включить параметр раздела реестра Allow signed content from an intranet Microsoft Update service location (Разрешить прием содержимого с подписью из службы обновления Майкрософт в интрасети).

В указанных ниже процедурах приводятся основные шаги, которые можно использовать для настройки групповой политики на компьютерах в домене и значения ключа реестра на компьютерах вне домена.

### <a name="to-configure-group-policy-to-allow-wua-to-scan-for-published-updates"></a>Настройка групповой политики для разрешения WUA выполнить проверку опубликованных обновлений
1.  Откройте оснастку консоли управления (MMC) редактора объектов групповой политики, используя соответствующие права безопасности пользователя для настройки групповой политики.

2.  Щелкните **Обзор** и выберите домен, подразделение или групповою политику, связанные с сайтом, на котором настроенные параметры групповой политики будут распространены на нужные клиентские компьютеры. Нажмите кнопку **ОК**, щелкните **Готово**, **Закрыть**, а затем нажмите кнопку **ОК** еще раз.

3.  Разверните выбранный параметр политики в дереве консоли и последовательно разверните **Конфигурация компьютера**, **Административные шаблоны** и **Компоненты Windows**, а затем щелкните **Центр обновления Windows**.

4.  В области результатов щелкните правой кнопкой мыши **Allow signed content from intranet Microsoft update service location** (Разрешить прием содержимого с подписью из службы обновления Майкрософт в интрасети), выберите **Свойства**, **Включено** и нажмите кнопку **ОК**.
