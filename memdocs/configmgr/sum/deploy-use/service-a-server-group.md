---
title: Обслуживание группы серверов
titleSuffix: Configuration Manager
description: На консоли Configuration Manager отображаются оповещения и сведения о состоянии, необходимые для отслеживания обновлений и соответствия требованиям.
author: mestew
ms.author: mstewart
manager: dougeby
ms.date: 04/01/2020
ms.topic: conceptual
ms.prod: configuration-manager
ms.technology: configmgr-sum
ms.assetid: 304a83ea-0f72-437d-9688-2e6e0c7526dd
ms.openlocfilehash: 7d6d8bef145e14547e5e6a726a93cb9470b94afd
ms.sourcegitcommit: bbf820c35414bf2cba356f30fe047c1a34c5384d
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/21/2020
ms.locfileid: "81709192"
---
# <a name="service-a-server-group"></a>Обслуживание группы серверов

*Область применения: Configuration Manager (Current Branch)*

>[!IMPORTANT]
> - Начиная с Configuration Manager версии 2002, группы серверов были заменены группами оркестрации. Дополнительные сведения см. в статье [Группы оркестрации](orchestration-groups.md).
> - Функции предварительной версии — это функции в Current Branch для раннего тестирования в рабочей среде. Хотя эти функции полностью поддерживаются, они по-прежнему находятся в процессе активной разработки. Следовательно, они могут подлежать изменениям, пока не будут перемещены из категории предварительной версии. Чтобы эти функции были доступны, необходимо включить их. Дополнительные сведения см. в статье [Использование функций предварительной версии из обновлений](../../core/servers/manage/install-in-console-updates.md#bkmk_prerelease).

Начиная с Configuration Manager версии 1606, можно настраивать параметры группы серверов для коллекции, чтобы определить количество, процент или порядок установки обновлений ПО на компьютеры в коллекции. Можно также настроить выполняемые перед развертыванием и после него скрипты PowerShell для реализации настраиваемых действий.

При развертывании обновлений программного обеспечения для коллекции, в которой настроены параметры группы серверов, Configuration Manager определяет, на какое количество компьютеров в коллекции могут быть установлены обновления программного обеспечения в определенный момент времени, и предоставляет доступ к такому же количеству блокировок развертывания. Установка обновления программного обеспечения начнется только на компьютерах с блокировкой развертывания. Если блокировка развертывания доступна, компьютер получает ее, устанавливает обновления программного обеспечения, а затем после успешного завершения установки снимает блокировку развертывания. После этого блокировка развертывания становится доступной для других компьютеров. Если компьютеру не удается снять блокировку развертывания, можно вручную снять все блокировки развертываний группы серверов для коллекции.

>[!IMPORTANT]
>Все компьютеры в коллекции должны быть назначены одному сайту.

#### <a name="to-create-a-collection-for-a-server-group"></a>Создание коллекции для группы серверов  
Параметры группы серверов настраиваются в окне свойств коллекции устройств. Для обслуживания группы серверов все члены коллекции должны быть назначены одному сайту. Следующие шаги предназначены для создания коллекции и настройки параметров группы серверов.
1.  [Создайте коллекцию устройств](../../core/clients/manage/collections/create-collections.md), содержащую компьютеры в группе серверов.  

2.  В рабочей области **Активы и соответствие** выберите **Коллекции устройств**, щелкните правой кнопкой мыши коллекцию, содержащую компьютеры в группе серверов, и выберите пункт **Свойства**.  

3.  На вкладке **Общие** выберите **Все устройства относятся к одной группе серверов**, а затем щелкните **Параметры**.  

4.  На странице **Параметры группы серверов** укажите один из следующих параметров.  

    -   **Разрешить одновременное обновление определенного процента компьютеров**. Указывает, что одновременно обновляться может только определенный процент клиентов. Если, например, в коллекцию входит 10 клиентов и она настроена для одновременного обновления 30 % клиентов, то в один момент времени устанавливать обновления программного обеспечения смогут только 3 клиента.  

    -   **Разрешить одновременное обновление определенного числа компьютеров**. Указывает, что одновременно обновляться может только определенное число клиентов.  

    -   **Указать последовательность обслуживания**. Указывает, что клиенты в коллекции будут обновляться поочередно согласно настроенной последовательности. Клиент начнет установку обновлений программного обеспечения только после того, как клиент выше его в списке закончит устанавливать свои обновления.  

5.  Укажите, следует ли использовать сценарий, выполняемый перед развертыванием (очистка узла), или сценарий, выполняемый после развертывания (возобновление работы узла).  

    > [!WARNING]
    > Пользовательские скрипты не подписываются корпорацией Майкрософт. За обеспечение целостности этих скриптов отвечаете вы.

    > [!TIP]  
    > Ниже приведены примеры того, как можно использовать при тестировании сценарии, выполняемые до и после развертывания, которые записывают текущее время в текстовый файл.  
    >   
    >  **Перед развертыванием**  
    >   
    >  `#Start`  
    >   
    >  `$a = Get-Date`  
    >   
    >  `Write-Output "Universal Time: " + $a.ToUniversalTime()  |`  
    >   
    >  `Out-File C:\Windows\Temp\start.txt`  
    >   
    >  **После развертывания**  
    >   
    >  `#End`  
    >   
    >  `$a = Get-Date`  
    >   
    >  `Write-Output "Universal Time: " + $a.ToUniversalTime()  |`  
    >   
    >  `Out-File C:\Windows\Temp\end.txt`  

## <a name="deploy-software-updates-to-the-server-group-and-monitor-status"></a>Развертывание обновлений программного обеспечения в группе серверов и отслеживание состояния  
Развертывание обновлений программного обеспечения в коллекцию группы серверов выполняется в ходе обычного процесса развертывания. После развертывания обновлений программного обеспечения можно отслеживать развертывание обновлений в консоли Configuration Manager.
1.  [Разверните обновления программного обеспечения](manually-deploy-software-updates.md) в коллекции группы серверов.   

2.  [Осуществляйте мониторинг развертывания обновлений программного обеспечения](monitor-software-updates.md). Помимо стандартных представлений мониторинга развертывания обновлений программного обеспечения отображается состояние **Ожидание блокировки**, если клиент ожидает своей очереди на установку обновлений программного обеспечения. Дополнительные сведения можно найти в файле UpdatesDeployment.log.


## <a name="clear-the-deployment-locks-for-computers-in-a-server-group"></a>Снятие блокировки развертывания для компьютеров в группе серверов  
Если компьютеру не удается снять блокировку развертывания, можно вручную снять все блокировки развертываний группы серверов для коллекции. Блокировки следует снимать только в том случае, если развертывание замерло в состоянии обновления компьютеров в коллекции и существуют компьютеры, которые по-прежнему не соответствуют требованиям.  
1.  В рабочей области **Активы и соответствие** щелкните узел **Коллекции устройств**, а затем выберите коллекцию, для которой следует снять блокировки развертывания.  

2.  На вкладке **Главная** в группе **Развертывания** щелкните **Снять блокировки развертывания для группы серверов**. Если клиентам не удалось установить обновления программного обеспечения и они препятствуют установке обновлений для других клиентов, можно вручную снять блокировки развертывания.  
