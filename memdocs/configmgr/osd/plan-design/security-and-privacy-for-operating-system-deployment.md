---
title: Безопасность и конфиденциальность при развертывании ОС
titleSuffix: Configuration Manager
description: Ознакомьтесь с рекомендациями по обеспечению безопасности и конфиденциальности при развертывании операционных систем в Configuration Manager.
ms.date: 10/06/2016
ms.prod: configuration-manager
ms.technology: configmgr-osd
ms.topic: conceptual
ms.assetid: 5ee5928f-3d72-4b00-8156-1e0d1030a96c
author: aczechowski
ms.author: aaroncz
manager: dougeby
ms.openlocfilehash: 53256889b8bbd6a9608748a57de33b38be77cfd8
ms.sourcegitcommit: bbf820c35414bf2cba356f30fe047c1a34c5384d
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/21/2020
ms.locfileid: "81709332"
---
# <a name="security-and-privacy-for-os-deployment-in-configuration-manager"></a>Обеспечение безопасности и конфиденциальности при развертывании ОС в Configuration Manager

*Область применения: Configuration Manager (Current Branch)*

В этой статье приводятся сведения об обеспечении безопасности и конфиденциальности при развертывании ОС в Configuration Manager.  



##  <a name="security-best-practices-for-os-deployment"></a><a name="bkmk_security"></a> Рекомендации по обеспечению безопасности для развертывания ОС  

Ниже приведены рекомендации по обеспечению безопасности во время развертывания операционных систем с помощью Configuration Manager.  


### <a name="implement-access-controls-to-protect-bootable-media"></a>Внедрите элементы управления доступом для защиты загрузочного носителя.

При создании загрузочного носителя необходимо всегда назначать пароль, который обеспечивает защиту содержимого носителя. Даже при наличии пароля шифруются только файлы, содержащие конфиденциальные данные. Кроме того, все файлы могут быть перезаписаны.  

Контроль физического доступа к носителю позволяет предотвратить криптографические атаки, направленные на получение сертификатов проверки подлинности клиентов.  

Чтобы помочь клиенту предотвратить установку незаконно измененного содержимого или клиентской политики, содержимое хэшируется и должно использоваться с исходной политикой. Если хэш содержимого не удается подтвердить или после проверки выясняется, что содержание не соответствует политике, клиент не будет использовать загрузочный носитель. Хэшируется только содержимое. Политика не хэшируется, но она зашифрована и защищена при указании пароля. Это поведение препятствует изменению политики злоумышленниками.  


### <a name="use-a-secure-location-when-you-create-media-for-os-images"></a>При создании носителя для образов ОС используйте защищенное расположение

Если несанкционированные пользователи получат доступ к расположению, они могут изменить созданные вами файлы. Они также могут использовать все доступное место на диске, что приведет к сбою создания носителя.  


### <a name="protect-certificate-files"></a>Защитите файлы сертификата 

Защитите файлы сертификатов (PFX) надежным паролем. Если вы храните их в сети, обеспечьте защиту сетевого канала при импорте их в Configuration Manager.

Если вы требуете пароль для импорта сертификата подлинности клиента, который используется для загрузочного носителя, эта конфигурация позволяет защитить сертификат от атак злоумышленников.  

Используйте подписывание SMB или протокол IPsec при обмене данными между сетевым расположением и сервером сайта, чтобы предотвратить незаконное изменение файла сертификата.  


### <a name="block-or-revoke-any-compromised-certificates"></a>Заблокируйте или отзовите скомпрометированные сертификаты 

Если сертификат клиента скомпрометирован, заблокируйте его в Configuration Manager. Если это PKI-сертификат, отзовите его.  

Для развертывания ОС с помощью загрузочного носителя и PXE-загрузки необходим сертификат проверки подлинности клиента с закрытым ключом. В случае компрометации сертификата заблокируйте его в узле **Сертификаты** рабочей области **Администрирование** (узел **Безопасность** ).  


### <a name="secure-the-communication-channel-between-the-site-server-and-the-sms-provider"></a>Защитите соединение между сервером сайта и поставщиком SMS

Если поставщик SMS удален от сервер сайта, обеспечьте безопасность канала связи, чтобы защитить образы загрузки.

Если вы изменяете образы загрузки и поставщик SMS выполняется на сервере, который не является сервером сайта, высока вероятность атак, направленных на образы загрузки. Обеспечьте безопасность сетевого канала между такими компьютерами, используя подписывание SMB или протокол IPsec.  


### <a name="enable-distribution-points-for-pxe-client-communication-only-on-secure-network-segments"></a>Включать поддержку обмена данными с клиентами по протоколу PXE для точек распространения можно только в защищенных сегментах сети.

При отправке клиентом запроса на PXE-загрузку невозможно подтвердить, что запрос обслуживается допустимой точкой распространения, поддерживающей PXE. Этот сценарий подразумевает следующие угрозы безопасности.  

- Незаконная точка распространения, отвечающая на PXE-запросы, может передавать на клиенты измененные образы.  

- Злоумышленник может запустить атаку "злоумышленник в середине" на протокол TFTP, используемый PXE. Эта атака может отправить вредоносный код с файлами ОС. Злоумышленник также может создать незаконный клиент, чтобы отправлять запросы TFTP непосредственно к точке распространения.  

- Злоумышленник может использовать вредоносный клиент для запуска атаки типа "отказ в обслуживании", направленной на точку распространения.  

Используйте многоуровневый подход к обеспечению безопасности сегментов сети, в которых клиенты получают доступ к точкам распространения с поддержкой PXE.  

> [!WARNING]  
>  Учитывая перечисленные угрозы безопасности, не включайте для точки распространения поддержку обмена данными по протоколу PXE, если она находится в ненадежной сети, например в сети периметра.  


### <a name="configure-pxe-enabled-distribution-points-to-respond-to-pxe-requests-only-on-specified-network-interfaces"></a>Настройте точки распространения, поддерживающие PXE, так, чтобы они отвечали на PXE-запросы только указанных сетевых интерфейсов.  

Если разрешить точке распространения отвечать на PXE-запросы всех сетевых интерфейсов, такая конфигурация может привести к тому, что доступ к службе PXE будет предоставлен ненадежным сетям.  


### <a name="require-a-password-to-pxe-boot"></a>Настройте требование пароля для PXE-загрузки

Конфигурация, предусматривающая требование ввода пароля для PXE-загрузки, обеспечивает дополнительную безопасность для процесса PXE-загрузки. Эта конфигурация помогает защититься от незаконных клиентов, присоединяющихся к иерархии Configuration Manager.  


### <a name="restrict-content-in-os-images-used-for-pxe-boot-or-multicast"></a>Ограничьте содержимое в образах ОС, используемых для PXE-загрузки или многоадресной рассылки

Не включайте в образ, который будет использоваться для загрузки по сети (PXE) или многоадресной рассылки, бизнес-приложения или программное обеспечение, содержащие конфиденциальные данные.  

Учитывая специфические угрозы безопасности, связанные с PXE-загрузкой и многоадресной рассылкой, это позволит снизить риски в случае загрузки образа ОС на незаконный компьютер.  


### <a name="restrict-content-installed-by-task-sequence-variables"></a>Ограничьте содержимое, установленное переменными последовательности задач

Не включайте бизнес-приложения и программное обеспечение, содержащее конфиденциальные данные, в пакеты приложений, которые устанавливаются с помощью переменных последовательностей задач.  

При развертывании программного обеспечения с помощью переменных последовательности задач оно может быть установлено на компьютеры и для пользователей, не авторизованных для его получения.  


### <a name="secure-the-network-channel-when-migrating-user-state"></a>Защитите сетевой канал при переносе пользовательской среды

При переносе пользовательской среды обеспечьте безопасность сетевого канала между клиентом и точкой миграции состояния, используя подписывание SMB или протокол IPsec.  

После того как будет установлено исходное подключение по HTTP, данные миграции пользовательской среды передаются по протоколу SMB. Если не обеспечить защиту сетевого канала, злоумышленник может считать и изменить эти данные.  


### <a name="use-the-latest-version-of-usmt"></a>Используйте последнюю версию USMT

Используйте последнюю версию средства миграции пользовательской среды (USMT), поддерживаемую Configuration Manager.  

Последняя версия средства миграции пользовательской среды (USMT) обеспечивает значительные улучшения безопасности и дополнительный контроль над временем миграции данных пользовательской среды.  


### <a name="manually-delete-folders-on-state-migration-points-when-you-decommission-them"></a>Вручную удаляйте папки в точке миграции состояния после их списания  

При удалении папки точки миграции состояния в разделе свойств этой точки в консоли Configuration Manager сайт не удаляет физическую папку. Чтобы предотвратить раскрытие данных миграции пользовательской среды, необходимо вручную удалить сетевую или локальную папку.  


### <a name="dont-configure-the-deletion-policy-to-immediately-delete-user-state"></a>Не настраивайте в политике удаления немедленное удаление пользовательской среды  

Если настройки политики удаления на точке миграции состояния предполагают немедленное удаление данных, помеченных для удаления, и если злоумышленнику удастся получить доступ к данным пользовательской среды прежде, чем это сделает законный компьютер, сайт немедленно удалит данные пользовательской среды. Задайте для интервала **Удалить после** значение, которое позволит проверить успешность восстановления данных пользовательской среды.  


### <a name="manually-delete-computer-associations"></a>Вручную удаляйте связи с компьютерами 

Вручную удаляйте связи с компьютерами после завершения и проверки восстановления данных миграции пользовательской среды.

Configuration Manager не удаляет связи с компьютерами автоматически. Удаление ненужных связей вручную позволит защитить данные пользовательской среды.  


### <a name="manually-back-up-the-user-state-migration-data-on-the-state-migration-point"></a>Вручную выполняйте резервное копирование данных миграции пользовательской среды на точке миграции состояния.  

Configuration Manager не выполняет резервное копирование данных миграции пользовательской среды при резервном копировании сайта.  


### <a name="implement-access-controls-to-protect-the-prestaged-media"></a>Внедрите элементы управления доступом для защиты предварительно подготовленных носителей.  

Контроль физического доступа к носителю позволяет предотвратить криптографические атаки, направленные на получение сертификатов проверки подлинности клиентов и конфиденциальных данных.  


### <a name="implement-access-controls-to-protect-the-reference-computer-imaging-process"></a>Внедрите элементы управления доступом для защиты для защиты в процессе создания образа эталонного компьютера.  

Убедитесь, что компьютер-образец, используемый для создания образов ОС, находится в безопасной среде. Используйте соответствующие элементы управления доступом, чтобы предотвратить установку и ненамеренное включение в записанный образ непредвиденного или вредоносного программного обеспечения. При записи образа убедитесь, что сетевое расположение назначения является безопасным. Этот процесс помогает убедиться, что образ не будет незаконно изменен после записи.  


### <a name="always-install-the-most-recent-security-updates-on-the-reference-computer"></a>Всегда устанавливайте на эталонный компьютер последние обновления безопасности.  

Наличие на эталонном компьютере текущих обновлений безопасности позволяет сократить "окно беззащитности" новых компьютеров при первом запуске.  


### <a name="implement-access-controls-when-deploying-an-os-to-an-unknown-computer"></a>Внедрите средства управления доступом при развертывании ОС на неизвестный компьютер

Если развертывание ОС требуется выполнить на неизвестном компьютере, внедрите средства управления доступом, чтобы предотвратить подключение к сети неавторизованных компьютеров.  

Подготовка неизвестных компьютеров обеспечивает удобный способ развертывания новых компьютеров по требованию. Но она также позволяет злоумышленнику стать доверенным клиентом в вашей сети. Ограничьте физический доступ к сети и включите мониторинг клиентов, который позволит обнаруживать неавторизованные компьютеры. 

На компьютерах, отвечающих на развертывание ОС, инициированное PXE, все данные могут быть уничтожены во время этого процесса. Это поведение может привести к потере доступности случайно переформатированных систем.  


### <a name="enable-encryption-for-multicast-packages"></a>Включите шифрование для пакетов многоадресной рассылки.  

Для каждого пакета развертывания ОС можно включить шифрование для того периода, когда Configuration Manager передает пакет с помощью многоадресной рассылки. Эта конфигурация помогает предотвратить подключение незаконных компьютеров к сеансу многоадресной рассылки. Она также помогает предотвратить незаконное вмешательство злоумышленников в передачу.  


### <a name="monitor-for-unauthorized-multicast-enabled-distribution-points"></a>Обеспечьте мониторинг незаконных точек распространения с поддержкой многоадресной рассылки.  

Если злоумышленник сможет получить доступ к сети, он сможет настроить незаконные серверы многоадресной рассылки, чтобы подделать пакеты развертывания ОС.  


### <a name="when-you-export-task-sequences-to-a-network-location-secure-the-location-and-secure-the-network-channel"></a>Обеспечьте безопасность сетевого расположения и канала при экспорте последовательностей задач в сетевую папку.

Ограничьте доступ пользователей к сетевой папке.  

Используйте подписывание SMB или протокол IPsec при обмене данными между сетевым расположением и сервером сайта, чтобы предотвратить незаконное изменение экспортируемой последовательности задач.  


### <a name="if-you-use-the-task-sequence-run-as-account-take-additional-security-precautions"></a>Если вы используете учетную запись запуска от имени для последовательности задач, примите дополнительные меры обеспечения безопасности.

Если используется [учетная запись запуска от имени для последовательности задач](../../core/plan-design/hierarchy/accounts.md#task-sequence-run-as-account), примите следующие меры предосторожности:  

- Используйте учетную запись с минимальным набором разрешений.  

- Не используйте учетную запись доступа к сети для этой учетной записи.  

- Никогда не предоставляйте учетной записи права администратора домена.  

- Никогда не настраивайте профили роуминга для этой учетной записи. Профиль роуминга учетной записи будет загружен при выполнении последовательности задач, и это сделает профиль доступным на локальном компьютере и уязвимым.  

- Ограничьте область действия учетной записи. Например, создайте другие учетные записи запуска от имени для каждой последовательности задач. При компрометации одной учетной записи будут скомпрометированы только клиентские компьютеры, к которым у этой учетной записи есть доступ. Если командной строке требуется административный доступ к компьютеру, попробуйте создать локальную учетную запись администратора исключительно для запуска последовательности задач. Создайте эту локальную учетную запись на всех компьютерах, на которых выполняется последовательность задач, и удалите учетную запись, когда она будет не нужна.  


### <a name="restrict-and-monitor-the-administrative-users-who-are-granted-the-os-deployment-manager-security-role"></a>Ограничьте число администраторов, которым назначается роль безопасности "Менеджер развертывания ОС", и отслеживайте их действия

Административные пользователи с ролью безопасности **Менеджер развертывания ОС** могут создавать самозаверяющие сертификаты. Эти сертификаты затем могут использоваться для олицетворения клиента и получения политики клиента из Configuration Manager.  


### <a name="use-enhanced-http-to-reduce-the-need-for-a-network-access-account"></a>Используйте улучшенный HTTP, чтобы уменьшить потребность в учетной записи доступа к сети

Начиная с версии 1806 при включении [улучшенного HTTP](../../core/plan-design/hierarchy/enhanced-http.md) несколько сценариев развертывания ОС не требуют учетную запись сетевого доступа для загрузки содержимого из точки распространения. Дополнительные сведения см. в разделе [Последовательности задач и учетная запись доступа к сети](planning-considerations-for-automating-tasks.md#BKMK_TSNetworkAccessAccount).<!--1358278--> 



## <a name="security-issues-for-os-deployment"></a>Проблемы безопасности при развертывании ОС  

Хотя функция развертывания ОС представляет собой удобный способ развертывания самых надежных операционных систем и конфигураций для компьютеров в сети, с ней связаны следующие риски безопасности.  


### <a name="information-disclosure-and-denial-of-service"></a>Раскрытие информации и отказ в обслуживании  

Если злоумышленнику удастся получить контроль над инфраструктурой Configuration Manager, он сможет выполнять любые последовательности задач, в том числе форматировать жесткие диски на всех клиентских компьютерах. Последовательности задач могут содержать конфиденциальные данные, такие как учетные записи, имеющие разрешения на присоединение к домену, или ключи корпоративного лицензирования.  


### <a name="impersonation-and-elevation-of-privileges"></a>Олицетворение и повышение прав  

Последовательность задач может присоединять компьютеры к домену. Таким образом, незаконный компьютер может получить доступ к сети как прошедший проверку подлинности. 

Защитите сертификат проверки подлинности клиента, который используется для загрузочных носителей последовательностей задач и для развертывания PXE-загрузки. При записи сертификата проверки подлинности клиента злоумышленник может получить закрытый ключ сертификата. С этим сертификатом можно олицетворять допустимого клиента в сети. В этом случае незаконный компьютер может загрузить политику, например, содержащую конфиденциальные данные.  

Если клиенты используют учетную запись сетевого доступа для доступа к данным, которые хранятся на точке миграции состояния, эти клиенты используют одно удостоверение. Они могут получить доступ к данным миграции из другого клиента, который использует учетную запись сетевого доступа. Шифрование данных гарантирует, что только оригинальный клиент может их читать, но данные могут быть перехвачены и изменены или удалены.  


### <a name="client-authentication-to-the-state-migration-point-is-achieved-by-using-a-configuration-manager-token-that-is-issued-by-the-management-point"></a>Проверка подлинности клиентов в точке миграции состояния достигается с помощью токена Configuration Manager, выданного точкой управления.  

Configuration Manager не ограничивает и не контролирует объем данных, которые хранятся на точке миграции состояния. Злоумышленник может заполнить доступное место на диске, что приведет к отказу в обслуживании.  


### <a name="if-you-use-collection-variables-local-administrators-can-read-potentially-sensitive-information"></a>При использовании переменных коллекции локальным администраторам может стать доступной потенциально конфиденциальная информация  

Хотя переменные коллекции — это гибкий метод для развертывания операционных систем, эта функция может привести к раскрытию информации.  



##  <a name="privacy-information-for-os-deployment"></a><a name="bkmk_privacy"></a> Сведения о конфиденциальности при развертывании ОС  

Помимо развертывания ОС на компьютерах без ОС, Configuration Manager можно использовать для миграции файлов и параметров пользователя с одного компьютера на другой. Администратор задает набор переносимых данных, включая файлы личных данных, параметры конфигурации и файлы cookie браузера.  

Configuration Manager хранит данные на точке миграции состояния и шифрует их во время передачи и хранения. Доступ к этим данным может получить только новый компьютер, связанный с данными пользовательской среды. Если новый компьютер утрачивает ключ для получения данных, администратор Configuration Manager с правами **Просмотреть сведения о восстановлении** для объектов экземпляра связи с компьютерами может получить доступ к данным и связать их с новым компьютером. После того как новый компьютер восстановит данные пользовательской среды, он по умолчанию удаляет их на следующий день. Для точки миграции состояния можно настроить интервал удаления данных, помеченных для удаления. Configuration Manager не хранит данные переноса пользовательской среды в базе данных сайта и не отправляет в корпорацию Майкрософт.  

Если для развертывания образов ОС используется загрузочный носитель, всегда используйте параметр защиты загрузочного носителя паролем, предусмотренный по умолчанию. Пароль позволяет шифровать любые переменные, хранимые в последовательности задач, однако данные, которые не хранятся в переменной, могут быть раскрыты.  

В рамках процесса развертывания ОС могут использоваться последовательности задач, служащие для выполнения самых различных действий (например, установки приложений и обновления ПО). При настройке последовательностей задач необходимо принимать во внимание аспекты обеспечения конфиденциальности, связанные с установкой ПО.  

В Configuration Manager нет процесса развертывания ОС по умолчанию. Перед сбором данных пользовательской среды или созданием последовательностей задач или загрузочных образов требуется выполнить несколько шагов настройки.  

Прежде чем настраивать развертывание ОС, следует рассмотреть требования к конфиденциальности.  



## <a name="see-also"></a>См. также

[Данные о диагностике и использовании](../../core/plan-design/diagnostics/diagnostics-and-usage-data.md)

[Безопасность и конфиденциальность Configuration Manager](../../core/plan-design/security/security-and-privacy.md)
