---
title: Обновление клиентов Linux и UNIX
titleSuffix: Configuration Manager
description: Обновите клиент на сервере Linux или UNIX в Configuration Manager.
ms.date: 03/27/2019
ms.prod: configuration-manager
ms.technology: configmgr-client
ms.topic: conceptual
ms.assetid: 7d2bb377-1005-4a55-bd1f-b80a6d0b22e1
author: aczechowski
ms.author: aaroncz
manager: dougeby
ms.openlocfilehash: f71a36dff92f888d595538ff2fd483d7c212358f
ms.sourcegitcommit: bbf820c35414bf2cba356f30fe047c1a34c5384d
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/21/2020
ms.locfileid: "81696822"
---
# <a name="how-to-upgrade-clients-for-linux-and-unix-servers-in-configuration-manager"></a>Обновление клиентов для серверов Linux и UNIX в Configuration Manager

*Область применения: Configuration Manager (Current Branch)*

> [!Important]  
> Начиная с версии 1902, Configuration Manager не поддерживает клиенты Linux и UNIX. 
> 
> Вы можете управлять серверами Linux с помощью портала управления Microsoft Azure. Решения Azure располагают расширенной поддержкой Linux, которая в большинстве случаев превышает функциональные возможности Configuration Manager, включая полное управление исправлениями для Linux.

Вы можете обновить версию клиента для Linux и UNIX на компьютере до более новой версии клиента без удаления текущего клиента. Для этого нужно установить пакет установки клиента на компьютере с использованием свойства командной строки **-keepdb**. При установке клиента для Linux и UNIX существующие данные клиента заменяются на новые файлы клиента. Однако свойство командной строки **-keepdb** предписывает процессу установки сохранить уникальный идентификатор клиента (GUID), локальную базу данных информации и хранилище сертификатов. Эта информация затем используется при новой установке клиента.  

 Например, у вас есть компьютер RHEL5 x64 с клиентом из первоначального выпуска Configuration Manager для Linux и UNIX. Чтобы обновить этот клиент до версии из накопительного пакета обновления 1, вручную запустите скрипт **install** для установки применимого пакета клиента из накопительного пакета обновления 1 с добавлением параметра командной строки **-keepdb**. См. следующий пример командной строки:  

`./install -mp <hostname\> -sitecode <code\> -keepdb ccm-Universal-x64.<build\>.tar`  



## <a name="how-to-use-a-software-deployment-to-upgrade-the-client-on-linux-and-unix-servers"></a>Использование развертывания программного обеспечения для обновления клиента на серверах UNIX и Linux  
 Вы можете использовать развертывание программного обеспечения для обновления клиента для Linux и UNIX до новой версии. Однако клиент Configuration Manager не может запустить скрипт установки нового клиента напрямую, так как для установки нового клиента сначала необходимо удалить текущий клиент. Это действие приведет к завершению клиентского процесса Configuration Manager, который запускает скрипт установки перед началом установки нового клиента. Чтобы успешно использовать развертывание программного обеспечения для установки нового клиента, необходимо запланировать запуск установки в будущем и его выполнение встроенной функцией планирования операционной системы.  

 Выполните развертывание программного обеспечения, чтобы сначала скопировать файлы для нового пакета установки клиента на клиентский компьютер. Затем разверните и запустите скрипт, чтобы запланировать процесс установки клиента. Этот скрипт использует встроенную команду операционной системы **at**, чтобы отложить запуск. Затем, после запуска скрипта, его работа контролируется клиентской операционной системой, а не клиентом Configuration Manager на компьютере. Это позволяет в командной строке, вызванной скриптом, сначала удалить клиент Configuration Manager, а затем установить новый клиент. Эти действия завершают процесс обновления клиента на компьютере Linux или UNIX. После завершения обновления обновленный клиент остается под управлением Configuration Manager.  

 Используйте следующую процедуру, чтобы настроить развертывание программного обеспечения для обновления клиента для Linux и UNIX. Следующие шаги и примеры демонстрируют обновление компьютера RHEL5 x64 с первоначальным выпуском клиента до версии клиента накопительного пакета обновления 1.  

#### <a name="to-use-a-software-deployment-to-upgrade-the-client-on-linux-and-unix-servers"></a>Использование развертывания программного обеспечения для обновления клиента на серверах UNIX и Linux  

1. Скопируйте новый пакет установки клиента на компьютер, где выполняется клиент Configuration Manager, который требуется обновить.  

    Например, разместите пакет установки клиента и установите скрипт для накопительного пакета обновления 1 в следующем расположении на клиентском компьютере: **/tmp/PATCH**  

2. Создайте скрипт для управления обновлением клиента Configuration Manager. Затем поместите копию скрипта в ту же папку на клиентском компьютере, где находятся файлы установки с шага 1.  

    Для скрипта не требуется какое-либо конкретное имя. Он должен содержать достаточно команд, чтобы использовать файлы установки из локальной папки на клиентском компьютере, а также для установки пакета клиента с помощью свойства командной строки **-keepdb**. Используйте свойство командной строки **-keepdb**, чтобы сохранить уникальный идентификатор текущего клиента для использования новым клиентом, который вы устанавливаете.  

    Например, создайте скрипт **upgrade.sh**, который содержит следующие строки:  

   ```  
   #!/bin/sh  
   #  
   /tmp/PATCH/install -sitecode <code> -mp <hostname> -keepdb /tmp/PATCH/ccm-Universal-x64.<build>.tar  

   ```  

    Затем скопируйте его в папку **/tmp/PATCH** на клиентском компьютере.

3. Используйте развертывание программного обеспечения, чтобы каждый клиент использовал встроенную в компьютер команду **at** для выполнения сценария **upgrade.sh** с небольшой задержкой.  

    Например, используйте следующую командную строку для запуска скрипта: **at -f /tmp/upgrade.sh -m now + 5 minutes**  

   После успешного планирования выполнения сценария **upgrade.sh** клиент отправляет сообщение о состоянии, указывающее на успешное завершение развертывания программного обеспечения. Однако фактической установкой клиента затем, после задержки, управляет компьютер. После завершения обновления клиента проверьте установку, просмотрев файл **/var/opt/microsoft/scxcm.log** на клиентском компьютере. Убедитесь в том, что клиент установлен и взаимодействует с сайтом, просмотрев сведения о клиенте в узле **Устройства** рабочей области **Активы и соответствие** консоли Configuration Manager.  
