---
title: Расширение инвентаризации оборудования
titleSuffix: Configuration Manager
description: Сведения о способах расширения инвентаризации оборудования в Configuration Manager.
ms.date: 03/22/2018
ms.prod: configuration-manager
ms.technology: configmgr-client
ms.topic: conceptual
ms.assetid: d5bfab4f-c55e-4545-877c-5c8db8bc1891
author: mestew
ms.author: mstewart
manager: dougeby
ms.openlocfilehash: 380ba550a6edb0f639644280df74c500663e19f4
ms.sourcegitcommit: bbf820c35414bf2cba356f30fe047c1a34c5384d
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/21/2020
ms.locfileid: "81695422"
---
# <a name="how-to-extend-hardware-inventory-in-configuration-manager"></a>Расширение инвентаризации оборудования в Configuration Manager

*Область применения: Configuration Manager (Current Branch)*

Функция инвентаризации оборудования считывает информацию с компьютеров Windows с помощью инструментария управления Windows (WMI). WMI — это реализация корпорацией Майкрософт системы управления предприятием через Интернет (WBEM), являющейся отраслевым стандартом доступа к данным управления в корпоративной среде. В более ранних версиях Configuration Manager можно было расширить инвентаризацию оборудования, изменив файл sms_def.mof на сервере сайта. Этот файл содержал список классов WMI, считываемых функцией инвентаризации оборудования. При изменении этого файла можно было включать и отключать существующие классы, а также создавать новые классы для инвентаризации.  

Файл Configuration.mof используется для определения классов данных, учитываемых функцией инвентаризации оборудования на клиенте, и не изменялся с версии Configuration Manager 2012. Вы можете создавать классы данных для инвентаризации существующих или пользовательских классов данных репозитория WMI или разделов реестра на клиентских компьютерах.  

 Файл Configuration.mof также определяет и регистрирует поставщики WMI, которые обращаются к сведений об устройстве в ходе инвентаризации оборудования. Регистрация поставщиков определяет тип используемого поставщика и классы, которые он поддерживает.  

 Когда клиенты Configuration Manager запрашивают политику, файл Configuration.mof присоединяется к тексту политики. Затем этот файл загружается и компилируемый клиентами. Если добавить, изменить или удалить классы данных из файла Configuration.mof клиенты автоматически скомпилируйте эти изменения, внесенные в классы данных, связанные с запасами. Для инвентаризации новых или измененных классов данных на клиентах Configuration Manager никаких дополнительных действий не требуется. Этот файл расположен в папке **<каталог_установки_Configuration_Manager>\>\Inboxes\clifiles.src\hinv\\** на серверах первичных сайтов.  

 В Configuration Manager вы больше не можете изменять файл sms_def.mof, как это делалось в Configuration Manager 2007. Вместо этого вы можете включать и отключать классы WMI, а также добавлять новые классы для сбора функцией инвентаризации оборудования с помощью параметров клиентов. Configuration Manager предоставляет следующие методы расширения инвентаризации оборудования.  

> [!NOTE]  
>  Если вы вручную изменили файл Configuration.mof, чтобы добавить пользовательские классы инвентаризации, эти изменения будут перезаписаны при обновлении до версии 1602. Чтобы продолжить использовать пользовательские классы после обновления до версии 1602, необходимо добавить их в раздел "Added extensions" в файле Configuration.mof.  
> Тем не менее не следует изменять что-либо в этом разделе, так как эти разделы конфигурационного файла могут быть изменены только Configuration Manager. Резервная копия вашего пользовательского файла Configuration.mof находится здесь:  
> **<каталог_установки_Configuration_Manager>\>\data\hinvarchive\\** .  

|Метод|Дополнительные сведения|  
|------------|----------------------|  
|Включение или отключение существующих классов инвентаризации|Включите или отключите классы инвентаризации по умолчанию, либо создайте настраиваемые клиентские параметры, позволяющие собирать другие классы инвентаризации оборудования в указанных коллекциях клиентов. См. описание процедуры [включения или отключения существующих классов инвентаризации](#BKMK_Enable) в этой статье.|  
|Добавление нового класса инвентаризации|Добавьте новый класс инвентаризации из пространства имен WMI другого устройства. См. описание процедуры [добавления нового класса инвентаризации](#BKMK_Add) в этой статье.|  
|Импорт и экспорт классов инвентаризации оборудования|В консоли Configuration Manager можно импортировать и экспортировать MOF-файлы, содержащие классы инвентаризации. См. описание процедур [импорта классов инвентаризации оборудования](#BKMK_Import) и [экспорта классов инвентаризации оборудования](#BKMK_Export) в этой статье.|  
|Создание NOIDMIF-файлов|Используйте NOIDMIF-файлы для сбора сведений о клиентских устройствах, не учитываемых Configuration Manager. Например можно собирать активов номеров сведений об устройстве, существует только в качестве метки на устройстве. NOIDMIF инвентаризации автоматически связывается с устройством клиента, собранные из. См. подраздел [Создание NOIDMIF-файлов](#BKMK_NOIDMIF) в этой статье.|  
|Создать idmif-файлы|Используйте IDMIF-файлы для сбора сведений об активах в вашей организации, которые не связаны с клиентом Configuration Manager, таких как проекторы, фотокопиры и сетевые принтеры. См. подраздел [Создание IDMIF-файлов](#BKMK_IDMIF) в этой статье.|  

## <a name="procedures-to-extend-hardware-inventory"></a>Процедуры для расширения инвентаризации оборудования  
Эти процедуры позволяют настроить параметры клиента по умолчанию для инвентаризации оборудования и применяются ко всем клиентам в иерархии. Если требуется, чтобы эти параметры применялись только к некоторым клиентам, создайте настраиваемый параметр для клиентского устройства и назначьте его коллекции, содержащей определенные клиенты. См. раздел [Настройка параметров клиента](../../../../core/clients/deploy/configure-client-settings.md).  

###  <a name="to-enable-or-disable-existing-inventory-classes"></a><a name="BKMK_Enable"></a> Процедура включения или отключения существующих классов инвентаризации  

1.  В консоли Configuration Manager последовательно выберите **Администрирование** > **Параметры клиента** > **Параметры клиента по умолчанию**.  

4.  На вкладке **Главная** в группе **Свойства** нажмите кнопку **Свойства**.  

5.  В диалоговом окне **Параметры клиента по умолчанию** выберите пункт **Инвентаризация оборудования**.  

6.  В списке **Параметры устройства** выберите **Задать классы**.  

7.  В диалоговом окне **Классы инвентаризации оборудования** установите или снимите флажки для классов и свойств классов, собираемых функцией инвентаризации оборудования. Классы можно развернуть для выбора или отмены выбора отдельных свойств рассматриваемого класса. Используйте поле **Поиск классов инвентаризации** для поиска отдельных классов.  

    > [!IMPORTANT]  
    >  При добавлении новых классов в компонент инвентаризации оборудования Configuration Manager размер файла инвентаризации, собираемого и отправляемого на сервер сайта, увеличивается. Это может отрицательно повлиять на производительность сети и сайта Configuration Manager. Включайте только классы инвентаризации, которые необходимо собрать.  


###  <a name="to-add-a-new-inventory-class"></a><a name="BKMK_Add"></a> Процедура добавления нового класса инвентаризации  

Классы инвентаризации можно добавить только с сервера верхнего уровня в иерархии и путем изменения параметров клиента по умолчанию. При создании настраиваемых параметров устройства эта возможность недоступна.

1. В консоли Configuration Manager последовательно выберите **Администрирование** > **Параметры клиента** > **Параметры клиента по умолчанию**.  

2. На вкладке **Главная** в группе **Свойства** нажмите кнопку **Свойства**.  

3. В диалоговом окне **Параметры клиента по умолчанию** выберите пункт **Инвентаризация оборудования**.  

4. В списке **Параметры устройства** выберите **Задать классы**.  

5. В диалоговом окне **Классы инвентаризации оборудования** нажмите кнопку **Добавить**.  

6. В диалоговом окне **Добавление класса инвентаризации оборудования** нажмите кнопку **Подключить**.  

7. В диалоговом окне **Подключение к инструментарию управления Windows (WMI)** укажите имя компьютера, с которого будут получены классы WMI, и пространство имен WMI, используемое для их получения. Если требуется получить все классы из указанного пространства имен WMI, щелкните пункт **Рекурсивно**. Если компьютер, к которому вы подключаетесь, не является локальным, укажите данные для входа учетной записи, которой предоставлено разрешение на доступ к инструментарию WMI на удаленном компьютере.  

8. Выберите **Подключить**.  

9. В списке **Классы инвентаризации** диалогового окна **Добавление класса инвентаризации оборудования** выберите классы WMI, которые требуется добавить в инвентаризацию оборудования Configuration Manager.  

10. Если требуется изменить сведения о выбранном классе WMI, нажмите кнопку **Изменить** и в диалоговом окне **Квалификаторы класса** укажите приведенную ниже информацию.  

    - **Отображаемое имя** — это имя будет отображаться в обозревателе ресурсов.  

    - **Свойства** — укажите единицы измерения, в которых будет отображаться каждое свойство класса WMI.  

      Кроме того, для уникальной идентификации каждого экземпляра класса можно назначить свойства в качестве свойства ключа. Если ключ не определен для класса и несколько экземпляров класса передаются от клиента, только последний экземпляр, находящийся хранится в базе данных.  

      Указав значения свойств, нажмите кнопку **ОК**, чтобы закрыть диалоговое окно **Квалификаторы класса** и другие открытые диалоговые окна. 

###  <a name="to-import-hardware-inventory-classes"></a><a name="BKMK_Import"></a> Процедура импорта классов инвентаризации оборудования  

Импортировать классы инвентаризации можно только при изменении параметров клиента, используемых по умолчанию. Однако пользовательские параметры клиента можно использовать для импорта сведений, которые не включают изменений схемы, например, изменения свойства существующего класса с **True** на **False**.  

1.  В консоли Configuration Manager последовательно выберите **Администрирование** >  **Параметры клиента** > **Параметры клиента по умолчанию**.  

4.  На вкладке **Главная** в группе **Свойства** нажмите кнопку **Свойства**.  

5.  В диалоговом окне **Параметры клиента по умолчанию** выберите пункт **Инвентаризация оборудования**.  

6.  В списке **Параметры устройства** выберите **Задать классы**.  

7.  В диалоговом окне **Классы инвентаризации оборудования** нажмите кнопку **Импорт**.  

8.  В диалоговом окне **Импорт** выберите MOF-файл, который требуется импортировать, и нажмите кнопку **ОК**. Просмотрите список элементов, которые будут импортированы, и нажмите кнопку **Импорт**.  

###  <a name="to-export-hardware-inventory-classes"></a><a name="BKMK_Export"></a> Процедура экспорта классов инвентаризации оборудования  

1.  В консоли Configuration Manager последовательно выберите **Администрирование** > **Параметры клиента** > **Параметры клиента по умолчанию**.  

4.  На вкладке **Главная** в группе **Свойства** нажмите кнопку **Свойства**.  

5.  В диалоговом окне **Параметры клиента по умолчанию** выберите пункт **Инвентаризация оборудования**.  

6.  В списке **Параметры устройства** выберите **Задать классы**.  

7.  В диалоговом окне **Классы инвентаризации оборудования** нажмите кнопку **Экспорт**.  

    > [!NOTE]  
    >  Будут экспортированы все выбранные в настоящий момент классы.  

8.  В диалоговом окне **Экспорт** укажите MOF-файл, в который требуется экспортировать классы, и нажмите кнопку **Сохранить**.  

### <a name="configure-hardware-inventory-to-collect-strings-larger-than-255-characters"></a><a name="bkmk_GreaterThan255"></a> Настройка инвентаризации оборудования для сбора строк, длина которых превышает 255 символов
Начиная с версии 1802 Configuration Manager в качестве свойств инвентаризации оборудования можно указывать строки, длина которых превышает 255 символов. Это изменение применяется только к новым добавленным классам и к свойствам инвентаризации оборудования, которые не являются ключевыми. <!-- 1357389 -->

1. В рабочей области **Администрирование** щелкните **Параметры клиента**, выберите параметр клиентского устройства, который хотите изменить, щелкните правой кнопкой мыши и выберите пункт **Свойства**.

2. Выберите **Инвентаризация оборудования**, **Задать классы** и затем **Добавить**.

3. Нажмите кнопку **Подключить**.

4. Укажите **Имя компьютера**, **Пространство имен WMI**, при необходимости выберите **Рекурсивно**. Если нужно, укажите учетные данные для подключения. Нажмите кнопку **Подключить** для просмотра классов пространства имен.

5. Выберите новый класс и нажмите кнопку **Изменить**.

6. Измените параметр **Длина** для свойства, которое является строкой, а не ключом, указав значение больше 255. Нажмите кнопку **ОК**. 

7. Убедитесь, что измененное свойство выбрано в поле **Добавление класса инвентаризации оборудования**, и нажмите кнопку **ОК**. 


## <a name="how-to-use-management-information-files-mif-files-to-extend-hardware-inventory"></a>Использование файлов сведений об управлении (MIF-файлы) для расширения инвентаризации оборудования  
 Используйте MIF-файлы для расширения данных инвентаризации, собираемых Configuration Manager с клиентов. В ходе инвентаризации оборудования сведения, хранящиеся в файлах MIF добавляется отчет об инвентаризации клиента и хранятся в базе данных сайта, где можно использовать данные теми же способами, как использовать данные инвентаризации клиента по умолчанию. Существует два типа MIF-файлов: NOIDMIF и IDMIF.

> [!IMPORTANT]  
>  Прежде чем добавлять сведения из MIF-файлов в базу данных Configuration Manager, необходимо создать или импортировать сведения о классе для них. Дополнительные сведения см. в разделах [Добавление нового класса инвентаризации](#BKMK_Add) и [Импорт классов инвентаризации оборудования](#BKMK_Import) этой статьи.  

###  <a name="to-create-noidmif-files"></a><a name="BKMK_NOIDMIF"></a> Создание NOIDMIF-файлов  
 NOIDMIF-файлы можно использовать для добавления данных инвентаризации оборудования клиентов, которые невозможно собрать с помощью Configuration Manager, и связанных с конкретным клиентским устройством. Например, многие компании назначают каждому компьютеру в организации инвентаризационный номер, а затем вручную заносят эти номера в каталог. При создании NOIDMIF-файла эти сведения можно добавить в базу данных Configuration Manager и использовать для составления запросов и отчетов. Дополнительные сведения о создании NOIDMIF-файлов см. в документации пакета SDK для Configuration Manager.  

> [!IMPORTANT]  
>  При создании NOIDMIF-файла его необходимо сохранить в кодировке ANSI. NOIDMIF-файлы, сохраненные в кодировке UTF-8, не поддерживаются Configuration Manager.  

 Создав NOIDMIF-файл, сохраните его в папке _%Windir%_ **\CCM\Inventory\Noidmifs** на каждом клиенте. Configuration Manager будет собирать данные из NOIDMIF-файла в этой папке во время следующего запланированного цикла инвентаризации оборудования.  

###  <a name="to-create-idmif-files"></a><a name="BKMK_IDMIF"></a> Создание IDMIF-файлов  
 С помощью файлов IDMIF-файлы можно добавить в базу данных Configuration Manager сведения о ресурсах, которые не могут быть собраны с помощью Configuration Manager и не сопоставлены с конкретным клиентским устройством. Например, IDMIF-файлы можно использовать для сбора сведений о проекторах, DVD-проигрывателях, копировальных аппаратах и другом оборудовании, на котором не установлен клиент Configuration Manager. Дополнительные сведения о создании IDMIF-файлов см. в документации пакета SDK для Configuration Manager.  

 Создав IDMIF-файл, сохраните его в папке _%Windir%_ **\CCM\Inventory\Idmifs** на клиентских компьютерах. Configuration Manager будет собирать сведения из этого файла во время следующего запланированного цикла инвентаризации оборудования. Для данных, содержащихся в этом файле, необходимо объявить новые классы, добавив или импортировав их.  

> [!NOTE]
> MIF-файлы могут содержать большие объемы данных, и сбор таких данных может отрицательно повлиять на производительность сайта. Включайте сбор MIF-файлов, только когда это действительно необходимо, и настройте параметр **Максимальный размер пользовательского MIF-файла (КБ)** в параметрах инвентаризации оборудования. Дополнительные сведения см. в разделе [Общие сведения об инвентаризации оборудования](introduction-to-hardware-inventory.md).
