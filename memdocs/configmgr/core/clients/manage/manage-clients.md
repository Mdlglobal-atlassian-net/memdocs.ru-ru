---
title: Управление клиентами
titleSuffix: Configuration Manager
description: Управление клиентами в Configuration Manager.
ms.date: 11/29/2019
ms.prod: configuration-manager
ms.technology: configmgr-client
ms.topic: conceptual
ms.assetid: 3986a992-c175-4b6f-922e-fc561e3d7cb7
author: aczechowski
ms.author: aaroncz
manager: dougeby
ms.openlocfilehash: 2d7697f8b5a2017aa732c52512bf31598c070fbc
ms.sourcegitcommit: bbf820c35414bf2cba356f30fe047c1a34c5384d
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/21/2020
ms.locfileid: "81696082"
---
# <a name="how-to-manage-clients-in-configuration-manager"></a>Управление клиентами в Configuration Manager

*Область применения: Configuration Manager (Current Branch)*

После успешной установки клиента Configuration Manager на устройстве и его назначения сайту устройство отображается в рабочей области **Активы и соответствие** в узле **Устройства** и в одной коллекции или нескольких в узле **Коллекции устройств**. Выбрав устройства или коллекции, можно выполнять различные операции управления. Но существуют другие способы управления клиентом, при которых могут использоваться другие рабочие области консоли или выполняться задачи за пределами консоли.  

> [!NOTE]  
> Если клиент Configuration Manager установлен, но еще не назначен сайту, он может не отображаться в консоли. После назначения клиента сайту обновите членство в коллекции, а также представление консоли.  
>
> Устройство также может отображаться в консоли, если клиент Configuration Manager не установлен. Такая ситуация возникает, если устройство обнаружено сайтом, но клиент не установлен и не назначен.
>
> Мобильные устройства, управляемые с помощью [коннектора Exchange Server](../../../mdm/deploy-use/manage-mobile-devices-with-exchange-activesync.md) или [локальной службы MDM](../../../mdm/understand/manage-mobile-devices-with-on-premises-infrastructure.md), не устанавливают клиент Configuration Manager.  
>
> Воспользуйтесь столбцом **Клиент** в узле **Устройства**, чтобы определить, установлен ли клиент, чтобы управлять им с помощью консоли.  

## <a name="manage-clients-from-the-devices-node"></a><a name="BKMK_ManagingClients_DevicesNode"></a> Управление клиентами из узла **Устройства**  

В зависимости от типа устройства некоторые из этих параметров могут быть недоступны.  

1. В консоли Configuration Manager перейдите в рабочую область **Активы и соответствие** и выберите узел **Устройства**.  

2. Выберите одно или несколько устройств, а затем на ленте выберите одну из этих задач управления клиентом. (Можно также щелкнуть устройство правой кнопкой мыши.)  

### <a name="import-user-device-affinity"></a>Импортировать сопоставления пользователей и устройств

Настройте связи между пользователями и устройствами для эффективного развертывания программного обеспечения для пользователей.  

Дополнительные сведения см. в статье [Связывание пользователей и устройств с помощью сопоставления пользователей и устройств](../../../apps/deploy-use/link-users-and-devices-with-user-device-affinity.md).

### <a name="import-computer-information"></a>Импортировать сведения о компьютерах

Запустите **мастер импорта сведений о компьютерах**, чтобы импортировать новые сведения о компьютерах в базу данных Configuration Manager. Можно импортировать несколько компьютеров с помощью файла или указать сведения для одного компьютера.

### <a name="add-selected-items"></a>Добавить выбранные элементы

Позволяет создавать различные элементы при помощи следующих команд.

- **Добавить выбранные элементы в существующую коллекцию устройств**. Открытие диалогового окна **Выбор коллекции** . Выберите коллекцию, в которую необходимо добавить это устройство. Устройство будет включено в эту коллекцию с помощью правила **прямого членства**.  

- **Добавить выбранные элементы в новую коллекцию устройств**. Открывается **мастер создания коллекций устройств**, где можно создать новую коллекцию. Выбранная коллекция включается в эту коллекцию с помощью правила **прямого членства**.  

Дополнительные сведения см. в статье [Создание коллекций](collections/create-collections.md).

### <a name="install-client"></a>Установить клиент

Открывается **мастер установки клиента**. Этот мастер использует принудительную установку клиента, чтобы установить или переустановить клиент Configuration Manager на выбранном устройстве.

> [!TIP]  
> Существует множество вариантов установки клиента Configuration Manager. Несмотря на удобство запуска с консоли, этот метод установки клиента, предлагаемый мастером принудительной установки, имеет много зависимостей и подходит не для всех сред. Дополнительные сведения о зависимостях см. в разделе [Необходимые условия для развертывания клиентов на компьютерах под управлением Windows](../deploy/prerequisites-for-deploying-clients-to-windows-computers.md#client-push-installation). Дополнительные сведения о других способах установки клиентов см. в разделе [Методы установки клиентов](../deploy/plan/client-installation-methods.md).

Дополнительные сведения см. в разделе [Принудительная установка клиентов Configuration Manager](../deploy/deploy-clients-to-windows-computers.md#BKMK_ClientPush).

### <a name="run-script"></a>Запустить сценарий

Запуск мастера **запуска скрипта** для выполнения скрипта PowerShell на выбранном устройстве.

Дополнительные сведения см. в статье [Создание и запуск скриптов PowerShell из консоли Configuration Manager](../../../apps/deploy-use/create-deploy-scripts.md).

### <a name="install-application"></a>Установить приложение

Установка приложения на устройстве в режиме реального времени. Эта функция может помочь снизить потребность в отдельных коллекциях для каждого приложения.

Дополнительные сведения см. в статье [Установка приложений для устройства](../../../apps/deploy-use/install-app-for-device.md).

### <a name="reassign-site"></a>Переназначение сайта

Переназначение одного или нескольких клиентов, включая управляемые мобильные устройства, на другой первичный сайт в иерархии. Можно переназначить клиентов по отдельности или выбрать несколько для массового повторного назначения.  

### <a name="client-settings---resultant-client-settings"></a>Параметры клиента — результирующие параметры клиента

Если несколько параметров клиента развернуты на одном устройстве, определить приоритеты и комбинирование параметров может оказаться непросто. Используйте этот параметр, чтобы просмотреть результирующий набор параметров клиента, развернутых на этом устройстве.

Дополнительные сведения см. в разделе [Настройка параметров клиента](../deploy/configure-client-settings.md).

### <a name="start"></a>Начало

- Запустите **обозреватель ресурсов** для просмотра данных инвентаризации оборудования и программного обеспечения из клиента Windows. Дополнительные сведения см. в следующих статьях:

  - [Использование обозревателя ресурсов для просмотра данных инвентаризации оборудования](inventory/use-resource-explorer-to-view-hardware-inventory.md)

  - [Использование обозревателя ресурсов для просмотра данных инвентаризации программного обеспечения](inventory/use-resource-explorer-to-view-software-inventory.md)

- Удаленно администрируйте устройство с помощью **удаленного управления**, **удаленного помощника** или **клиента удаленного рабочего стола**. Дополнительные сведения см. в разделе [Удаленное администрирование клиентского компьютера Windows](remote-control/remotely-administer-a-windows-client-computer.md).

### <a name="approve"></a>Утверждение

Клиенты, взаимодействующие с системами сайта по протоколу HTTP и самозаверяющего сертификата, необходимо утвердить, чтобы в дальнейшем определять их качестве надежных компьютеров. По умолчанию конфигурация сайта автоматически утверждает клиенты из одного леса Active Directory и доверенных лесов. Это поведение по умолчанию означает, что вам не нужно вручную утверждать каждый клиент. При этом доверенные компьютеры рабочей группы и другие компьютеры, которым вы доверяете, но которые еще не утверждены, нужно утвердить вручную.

> [!IMPORTANT]  
> Сценарий, в котором некоторые функции управления могут работать для неутвержденных клиентов, не поддерживается в Configuration Manager.  

Вам не нужно утверждать клиенты, которые всегда подключаются к системам сайта с помощью протокола HTTPS, или клиенты, использующие PKI-сертификат, если они подключаются к системам сайта с помощью протокола HTTP. Эти клиенты устанавливают отношение доверия с помощью PKI-сертификатов.

### <a name="block-or-unblock"></a>Блокировка и разблокировка

Заблокируйте клиент, который больше не является доверенным. Блокировка не позволяет клиенту получить политику и запрещает системам сайта взаимодействовать с ним.  

> [!IMPORTANT]  
> Блокировка клиента препятствует только подключению клиента к системам сайта Configuration Manager. Это не мешает обмену данными с другими устройствами. При подключении клиента к системам сайта по протоколу HTTP, а не HTTPS существует ряд ограничений безопасности.  

Заблокированный клиент можно разблокировать.

Дополнительные сведения см. в разделе [Определение необходимости блокировки клиентов](../deploy/plan/determine-whether-to-block-clients.md).

<!-- Change Category is a hybrid action -->

### <a name="clear-required-pxe-deployments"></a>Очистить необходимые развертывания PXE

Чтобы повторно развернуть обязательное развертывание PXE, можно очистить состояние последнего развертывания PXE, назначенного компьютеру или коллекции Configuration Manager. Такое действие сбрасывает состояние этого развертывания и выполняет повторную установку последних обязательных развертываний.

Дополнительные сведения см. в статье [Использование PXE для развертывания Windows по сети](../../../osd/deploy-use/use-pxe-to-deploy-windows-over-the-network.md).

### <a name="client-notification"></a>Уведомление клиентов

Дополнительные сведения см. в разделе [Уведомление клиента](client-notification.md#client-notification).

### <a name="endpoint-protection"></a>Endpoint Protection

Дополнительные сведения см. в разделе [Уведомление клиента](client-notification.md#endpoint-protection).

### <a name="edit-primary-users"></a>Изменить основных пользователей

Просматривайте пользователей этого устройства за последние 90 дней или укажите основных пользователей этого устройства.

Дополнительные сведения см. в статье [Связывание пользователей и устройств с помощью сопоставления пользователей и устройств](../../../apps/deploy-use/link-users-and-devices-with-user-device-affinity.md).

### <a name="wipe-a-mobile-device"></a>Очистка мобильного устройства

На мобильных устройствах, поддерживающих команду очистки, можно выполнить очистку. В ходе этого действия все данные на мобильном устройстве, включая личные настройки и персональную информацию, удаляются без возможности восстановления. Как правило, в результате устройство возвращается к заводским настройкам по умолчанию. Очистка необходима, если устройство больше не является доверенным. Например, оно было потеряно или украдено.  

> [!TIP]  
> Сведения об обработке мобильным устройством команды очистки см. в документации, предоставленной производителем.  

Мобильному устройству часто приходится некоторое время ожидать команды очистки:  

- если мобильное устройство зарегистрировано в Configuration Manager, клиент получает команду при скачивании политики клиента.

- Если мобильное устройство управляется с помощью коннектора Exchange Server, оно получает команду при синхронизации с Exchange.  

Для отслеживания момента получения устройством команды очистки предназначен столбец **Состояние очистки**. Пока устройство не отправило подтверждение очистки в Configuration Manager, команду очистки можно отменить.  

### <a name="retire-a-mobile-device"></a>Прекращение использования мобильного устройства

Команда **Прекратить использование** поддерживается только мобильными устройствами, зарегистрированными в локальной службе MDM.  

Дополнительные сведения см. в разделе [Защита данных с помощью функций удаленной очистки, удаленной блокировки или сброса секретного кода](../../../mdm/deploy-use/wipe-lock-reset-devices.md).

### <a name="change-ownership"></a>Изменить владение

Если устройство не присоединено к домену и на нем не установлен клиент Configuration Manager, используйте этот параметр, чтобы изменить принадлежность устройства на **Корпоративное** или **Личное**.  

Это значение можно использовать в требованиях к приложениям для управления развертываниями и контроля количества данных инвентаризации, собираемых с устройств пользователей.  

Вам может потребоваться добавить в представление столбец **Владелец устройства**, для этого щелкните правой кнопкой мыши заголовок любого столбца и выберите соответствующий пункт.

### <a name="delete"></a>Удалить

> [!WARNING]  
> Не удаляйте клиент окончательно, если требуется удалить приложение клиента Configuration Manager или удалить клиент из коллекции.  

Действие **Удалить** вручную удаляет запись клиента из базы данных Configuration Manager. Используйте это действие только для устранения неполадок. Если вы удаляете объект, но он по-прежнему установлен и взаимодействует с сайтом, Heartbeat-обнаружение воссоздает запись клиента. Она снова появится в консоли Configuration Manager, хотя журнал клиента и предыдущие связи будут утеряны.  
> [!NOTE]  
> При удалении клиента мобильного устройства, зарегистрированного с помощью Configuration Manager, это действие также отзывает выданный PKI-сертификат. Сертификат после этого будет отклоняться точкой управления, даже если службы IIS не проверяют список отзыва сертификатов (CRL).
>
> При удалении устаревших клиентов мобильных устройств сертификаты в этих клиентах не отзываются.

Сведения об удалении клиента см. в разделе [Удаление клиента Configuration Manager](#BKMK_UninstalClient).  

Сведения о назначении клиента новому первичному сайту см. в разделе [Назначение клиентских компьютеров сайту](../deploy/assign-clients-to-a-site.md).

Чтобы удалить клиент из коллекции, перенастройте свойства коллекции. Дополнительные сведения см. в статье [Управление коллекциями](collections/manage-collections.md).

### <a name="refresh"></a>Обновление

Обновите представление консоли, используя последние данные из базы данных. Например, если устройство отображается в списке из обнаружения, но не отображается как установленное. Установив клиент и убедившись, что он назначен сайту, выберите **Обновить**.

### <a name="properties"></a>Элемент Property

Просмотрите данные обнаружения и развертывания для клиента.

Кроме того, можно настроить переменные, используемые последовательностями задач для развертывания операционной системы на устройстве. Дополнительные сведения о создании переменных последовательности задач для устройств и коллекций см. в [этой статье](../../../osd/understand/using-task-sequence-variables.md#bkmk_set-coll-var).


## <a name="manage-clients-from-the-device-collections-node"></a><a name="BKMK_ManagingClients_DeviceCollectionsNode"></a> Управление клиентами из узла **Коллекции устройств**

Многие задачи, доступные для устройств на узле **Устройства**, также доступны в коллекциях. Консоль автоматически применяет операцию ко всем соответствующим устройствам в коллекции. Выполнение этого действия для всей коллекции приводит к созданию большого количества сетевых пакетов и росту использования ЦП на сервере сайта.  

Прежде чем выполнять задачи на уровне коллекции, примите во внимание следующее. Запущенную задачу невозможно остановить из консоли.

- Сколько устройств в коллекции?
- Устройства подключены по сети с низкой пропускной способностью?
- Сколько времени требуется на выполнение этой задачи для всех устройств?

Дополнительные сведения см. в статье [Управление коллекциями](collections/manage-collections.md).


## <a name="restart-clients"></a>Перезапуск клиентов

Используйте консоль Configuration Manager для определения клиентов, требующих перезагрузки. Потом используйте действие уведомления клиента для их перезапуска.

> [!Tip]
> Включите автоматическое обновление клиентов, чтобы поддерживать их в актуальном состоянии при минимальных затратах на администрирование. См. сведения об [использовании автоматического обновления клиентов](upgrade/upgrade-clients-for-windows-computers.md#bkmk_autoupdate).

Чтобы определить, какие устройства ожидают перезапуск, перейдите в рабочую область **Активы и соответствие** консоли Configuration Manager и выберите узел **Устройства**. После этого просмотрите состояние каждого устройства в области сведений в новом столбце с именем **Ожидается перезапуск**. Каждое устройство имеет одно или несколько из следующих значений.

- **Нет**: устройства, ожидающие перезапуск, отсутствуют.
- **Configuration Manager**: это значение поступает из компонента координатора перезагрузки клиента (RebootCoordinator.log).
- **Переименование файла**: это значение поступает из системы Windows, сообщающей об ожидающей операции переименования файла (HKLM\SYSTEM\CurrentControlSet\Control\Session Manager, PendingFileRenameOperations)
- **Центр обновления Windows**: это значение поступает из отчетов агента обновления Windows, который сообщает, что требуется перезагрузка для одного обновления или нескольких (HKLM\SOFTWARE\Microsoft\Windows\CurrentVersion\WindowsUpdate\Auto Update\RebootRequired).
- **Установка и удаление компонентов**: это значение поступает из компонентной модели CBS Windows, которая сообщает, что для добавления или удаления компонента Windows требуется перезагрузка (HKLM\Software\Microsoft\Windows\CurrentVersion\Component Based Servicing\Reboot Pending).

### <a name="create-the-client-notification-to-restart-a-device"></a>Создание клиентского уведомления для перезапуска устройства

1. Выберите в коллекции устройство, которое хотите перезапустить, перейдя в узел **Коллекции устройств** консоли.
2. На ленте выберите **Уведомление клиента**, а затем выберите **Перезапустить**. Открывается окно со сведениями о перезапуске. Нажмите кнопку **ОК**, чтобы подтвердить запрос на перезапуск.

При получении уведомления клиентом открывается окно уведомления **Центр программного обеспечения**, чтобы сообщить пользователю о перезапуске. По умолчанию перезагрузка происходит через 90 минут. Время перезапуска можно изменить, настроив [параметры клиента](../deploy/configure-client-settings.md). Параметры поведения при перезапуске находятся на вкладке [Перезагрузка компьютера](../deploy/about-client-settings.md#computer-restart) параметров по умолчанию.


## <a name="configure-the-client-cache"></a><a name="BKMK_ClientCache"></a> Настройка размера кэша клиента

В кэше клиента хранятся временные файлы, используемые для установки приложений и программ. Обновления программного обеспечения также используют кэш клиента, но всегда пытаются скачать данные в кэш независимо параметра размера. Настройте параметры кэша, такие как размер и расположение, когда устанавливаете клиент вручную, используете принудительную установку клиента либо после установки.

Вы можете указать размер папки кэша с помощью параметров клиента в консоли Configuration Manager. Дополнительные сведения см. в разделе [Параметры кэша клиента](../deploy/about-client-settings.md#client-cache-settings).

По умолчанию кэш клиента Configuration Manager находится в папке `%windir%\ccmcache`, а размер дискового пространства по умолчанию составляет 5120 МБ.  

> [!IMPORTANT]  
> Не используйте шифрование для папки кэша клиента. Configuration Manager не сможет скачивать содержимое в зашифрованную папку.  

### <a name="about-the-client-cache"></a>Сведения о кэше клиента  

Клиент Configuration Manager загружает содержимое для требуемого программного обеспечения вскоре после получения развертывания, однако запуск развертывания не происходит до назначенного времени развертывания. В назначенное время клиент Configuration Manager проверяет, доступно ли содержимое в кэше. Если содержимое присутствует в кэше и имеет требуемую версию, клиент использует кэшированное содержимое. Если требуемая версия содержимого изменилась или содержимое было удалено в целях освобождения места для другого пакета, клиент вновь скачивает содержимое в кэш.  

Если клиент пытается скачать содержимое программы или приложения с размером, превышающим размер кэша, развертывание завершается сбоем из-за недостаточного размера кэша. Клиент выдает соответствующее сообщение о состоянии с идентификатором 10050. Если позднее вы увеличите размер кэша, это приведет к указанному ниже результату.  

- Для требуемой программы. Клиент не пытается повторно автоматически скачивать содержимое. Повторно разверните пакет и программу на клиенте.  
- Для требуемого приложения. Клиент автоматически предпринимает повторную попытку скачивания содержимого при скачивании политики клиента.  

Если клиент пытается скачать пакет, размер которого меньше размера кэша, но кэш заполнен, все *требуемые* развертывания продолжают повторять попытки, пока не:

- освободится пространство в кэше;
- истечет время ожидания скачивания;
- будет достигнуто максимальное количество повторных попыток.

Если вы впоследствии увеличите размер кэша, клиент вновь пытается загрузить пакет во время следующего интервала повторной попытки. Клиент пытается скачать содержимое каждые четыре часа до тех пор, пока число попыток не достигнет 18.  

Кэшированное содержимое не удаляется автоматически. Оно остается в кэше по крайней мере один день после того, как клиент использует это содержимое. Если в параметрах пакета указано, что необходимо сохранять содержимое в кэше клиента, клиент не удаляет автоматически содержимое пакета из кэша. Если пространство в кэше занято пакетами, скачанными за последние 24 часа, и клиенту требуется скачать новые пакеты, можно либо увеличить размер кэша, либо удалить сохраненное содержимое кэша.  

С помощью следующих процедур можно настроить кэш клиента во время ручной установки клиента, либо уже после установки клиента.  

### <a name="configure-the-cache-during-manual-client-installation"></a>Настройка кэша во время установки клиента вручную  

Выполните команду CCMSetup.exe из исходного расположения установки и укажите следующие параметры по мере необходимости, разделив их пробелами.  

- DISABLECACHEOPT  

  - SMSCACHEDIR  

  - SMSCACHEFLAGS  

  - SMSCACHESIZE  

    > [!NOTE]
    > Используйте параметры размера кэша, доступные в разделе **Параметры клиента** консоли Configuration Manager, вместо параметра SMSCACHESIZE. Дополнительные сведения см. в разделе [Параметры кэша клиента](../deploy/about-client-settings.md#client-cache-settings).

Дополнительные сведения об использовании этих свойств командной строки для CCMSetup.exe см. в разделе [О свойствах установки клиента](../deploy/about-client-installation-properties.md).

### <a name="configure-the-cache-during-client-push-installation"></a>Настройка кэша во время принудительной установки клиента  

1. В консоли Configuration Manager перейдите в рабочую область **Администрирование**, разверните узел **Конфигурация сайта** и выберите узел **Сайты**.  

2. Выберите соответствующий сайт. На вкладке **Главная** на ленте в группе **Параметры** выберите **Параметры установки клиента** и затем выберите **Принудительная установка клиента**. Перейдите на вкладку **Свойства установки**.  

3. Укажите перечисленные ниже свойства через пробел.  

   - DISABLECACHEOPT  

   - SMSCACHEDIR  

   - SMSCACHEFLAGS  

   - SMSCACHESIZE  

     > [!NOTE]
     > Используйте параметры размера кэша, доступные в разделе **Параметры клиента** консоли Configuration Manager, вместо параметра SMSCACHESIZE. Дополнительные сведения см. в разделе [Параметры кэша клиента](../deploy/about-client-settings.md#client-cache-settings).

     Дополнительные сведения об использовании этих свойств командной строки для CCMSetup.exe см. в разделе [О свойствах установки клиента](../deploy/about-client-installation-properties.md).  

### <a name="configure-the-cache-on-the-client-computer"></a>Настройка кэша на клиентском компьютере  

1. На клиентском компьютере откройте панель управления **Configuration Manager**.  

2. Перейдите на вкладку **Кэш**. Задайте свойства пространства и расположения. Расположение по умолчанию: `%windir%\ccmcache`.  

3. Чтобы удалить файлы из папки кэша, щелкните **Удалить файлы**.  

### <a name="configure-client-cache-size-in-client-settings"></a>Настройка размера кэша клиента в параметрах клиента

Вы можете настроить размер папки кэша клиента без переустановки клиента. Используйте параметры размера кэша, доступные в разделе **Параметры клиента** консоли Configuration Manager. Дополнительные сведения см. в разделе [Параметры кэша клиента](../deploy/about-client-settings.md#client-cache-settings).


## <a name="uninstall-the-client"></a><a name="BKMK_UninstalClient"></a> Удаление клиента

Программное обеспечение клиента Configuration Manager можно удалить с компьютера, используя команду **CCMSetup.exe** с параметром **/Uninstall**. Запустите CCMSetup.exe на отдельном компьютере из командной строки или запустите развертывание пакета, чтобы удалить клиент с компьютеров коллекции.  

> [!NOTE]  
> Приложение клиента Configuration Manager невозможно удалить с мобильного устройства. Если требуется удалить клиент Configuration Manager с мобильного устройства, следует выполнить форматирование устройства, при этом с него будут удалены все данные.  

1. Откройте командную строку Windows от имени администратора. Перейдите в папку, в которой находится CCMSetup.exe, например `cd %windir%\ccmsetup`.

2. Выполните следующую команду: `CCMSetup.exe /uninstall`

> [!TIP]  
> Процесс удаления происходит без отображения результатов на экране. Чтобы убедиться, что клиент успешно удален, см. следующий файл журнала: `%windir%\ccmsetup\logs\CCMSetup.log`  
>
> Если вам нужно дождаться завершения удаления, то, прежде чем сделать что-то еще, запустите `Wait-Process CCMSetup` в PowerShell. Эта команда может приостановить скрипт, пока не завершится процесс CCMSetup.


## <a name="manage-conflicting-records"></a><a name="BKMK_ConflictingRecords"></a> Управление конфликтующими записями

Configuration Manager пытается определить дубликаты клиентов по идентификатору оборудования и сообщает о наличии конфликтующих записей. Например, если нужно переустановить компьютер, идентификатор оборудования останется прежним, но GUID, используемый Configuration Manager, может измениться.  

Configuration Manager автоматически разрешает конфликты, используя проверку подлинности Windows для учетной записи компьютера или PKI-сертификат из надежного источника. Если Configuration Manager не удается разрешить конфликт повторяющихся идентификаторов оборудования, поведение определяется параметром иерархии.

### <a name="change-the-hierarchy-setting-for-managing-conflicting-records"></a>Изменение параметра иерархии для управления конфликтующими записями  

1. В консоли Configuration Manager перейдите в рабочую область **Администрирование**, разверните узел **Конфигурация сайта** и выберите узел **Сайты**.

1. Выберите **Параметры иерархии** на ленте.

1. Перейдите на вкладку **Утверждение клиентов и конфликтующие записи** и выберите один из следующих вариантов.

    - **Автоматическое разрешение конфликтов записей**
    - **Разрешение конфликтов записей вручную**

### <a name="manually-resolve-conflicting-records"></a>Разрешение конфликтов записей вручную  

1. В консоли Configuration Manager перейдите в рабочую область **Мониторинг**, разверните раздел **Состояние системы** и выберите узел **Конфликтующие записи**.  

1. Выберите одну или несколько конфликтующих записей, после чего щелкните **Конфликтующая запись**.  

1. Выберите один из следующих параметров:  

    - **Объединить**: объединяет обнаруженную запись с существующей записью клиента.  

    - **Создать**: создает новую запись для конфликтующей записи клиента.  

    - **Блокировать**: создает новую запись для конфликтующей записи клиента, но помечает ее как заблокированную.  


## <a name="manage-duplicate-hardware-identifiers"></a>Управление повторяющимися идентификаторами оборудования

Вы можете задать список идентификаторов оборудования, которые Configuration Manager будет игнорировать при загрузке PXE и регистрации клиентов. Этот список помогает устранить две распространенные проблемы:

1. на многих новых устройствах нет Ethernet-порта. Для установления проводного подключения в целях развертывания операционной системы специалисты используют адаптер USB–Ethernet. Но такие адаптеры часто используются совместно по соображениям цены и общего удобства. Для обнаружения устройства сайт использует MAC-адрес этого адаптера. Поэтому повторное использование адаптера станет проблематичным без дополнительных действий администратора между развертываниями. Чтобы повторно использовать адаптер в этом сценарии, исключите его MAC-адрес.

2. Хотя атрибут SMBIOS должен быть уникальным, некоторые специализированные устройства имеют повторяющиеся идентификаторы. Исключите этот повторяющийся идентификатор и положитесь на уникальный MAC-адрес каждого устройства.

Используйте следующую процедуру для добавления идентификаторов оборудования, которые Configuration Manager будет пропускать.

1. В консоли Configuration Manager перейдите в рабочую область **Администрирование**, разверните узел **Конфигурация сайта** и выберите узел **Сайты**.

2. На вкладке **Главная** в группе **Сайты** нажмите кнопку **Параметры иерархии**.

3. Перейдите на вкладку **Утверждение клиентов и конфликтующие записи**. Нажмите кнопку **Добавить** в разделе **Повторяющиеся идентификаторы оборудования**, чтобы добавить новые идентификаторы оборудования.

> [!TIP]
> Начиная с версии 1910 используйте следующие командлеты PowerShell для автоматизации управления повторяющимися идентификаторами оборудования:<!-- 4852819 -->
>
> - New-CMDuplicateHardwareIdGuid;
> - Remove-CMDuplicateHardwareIdGuid;
> - New-CMDuplicateHardwareIdMacAddress;
> - Remove-CMDuplicateHardwareIdMacAddress.


## <a name="start-policy-retrieval"></a><a name="BKMK_PolicyRetrieval"></a> Запуск получения политики

Клиент Configuration Manager скачивает политику клиента по расписанию, настроенному в качестве параметра клиента. Можно также запустить получение политики по запросу от клиента. Например, для устранения неполадок или в ситуациях тестирования.  

- [Уведомление клиента](#bkmk_policy-notify)
- [Панель управления клиента](#bkmk_policy-manual)
- [Центр поддержки](#bkmk_policy-support)
- [Скрипт](#bkmk_policy-script)

### <a name="start-client-policy-retrieval-with-client-notification"></a><a name="bkmk_policy-notify"></a> Запуск получения клиентской политики с помощью уведомления клиента  

1. В консоли Configuration Manager перейдите в рабочую область **Активы и соответствие** и выберите **Устройства**.  

1. Выберите устройство, на которое требуется скачать политику. На вкладке ленты **Главная** в группе **Устройство** выберите **Уведомление клиента**, а затем выберите **Скачать политику компьютера**.  

    > [!NOTE]  
    > Вы также можете использовать уведомление клиента для запуска получения политики для всех устройств в коллекции.  

### <a name="start-client-policy-retrieval-from-the-configuration-manager-client-control-panel"></a><a name="bkmk_policy-manual"></a> Запуск получения политики клиента с помощью панели управления клиента Configuration Manager

1. Откройте панель управления **Configuration Manager** на клиентском компьютере.  

2. Перейдите на вкладку **Действия**. Щелкните **Цикл получения и оценки политик компьютера**, чтобы инициировать политику компьютера, после чего нажмите кнопку **Выполнить**.  

3. Нажмите кнопку **ОК**, чтобы подтвердить действие.  

4. Повторите предыдущие шаги для всех других действий. Например, **Цикл получения и оценки пользовательской политики** для пользовательских параметров клиента.  

### <a name="start-client-policy-retrieval-with-support-center"></a><a name="bkmk_policy-support"></a> Запуск получения клиентской политики с помощью центра поддержки

Используйте центр поддержки для запроса и просмотра клиентской политики. Дополнительные сведения см. в [справочнике по центру поддержки](../../support/support-center-ui-reference.md#bkmk_support-policy).

### <a name="start-client-policy-retrieval-by-script"></a><a name="bkmk_policy-script"></a> Запуск получения клиентской политики с помощью скрипта  

1. Откройте редактор скриптов, например Блокнот или интегрированную среду сценариев Windows PowerShell.  

2. Скопируйте и вставьте следующий пример кода PowerShell<!-- SCCMDocs#1591 --> в файл:  

    ```PowerShell
    $trigger = "{00000000-0000-0000-0000-000000000021}"
    Invoke-WmiMethod -Namespace root\ccm -Class sms_client -Name TriggerSchedule $trigger
    ```  

    > [!TIP]
    > Дополнительные сведения об идентификаторах расписаний см. в разделе [Идентификаторы сообщений](../../support/send-schedule-tool.md#bkmk_sendschedule-guids).

3. Сохраните файл с расширением .ps1.  

4. Запустите скрипт на клиенте.
