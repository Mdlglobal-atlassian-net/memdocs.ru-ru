---
title: Безопасность и конфиденциальность клиентов
titleSuffix: Configuration Manager
description: Сведения о безопасности и конфиденциальности клиентов Configuration Manager.
ms.date: 07/07/2019
ms.prod: configuration-manager
ms.technology: configmgr-client
ms.topic: conceptual
ms.assetid: c1d71899-308f-49d5-adfa-3a3ec0163ed8
author: aczechowski
ms.author: aaroncz
manager: dougeby
ms.openlocfilehash: e4922502b49ab2da9ce393fab809e4dc583fd962
ms.sourcegitcommit: bbf820c35414bf2cba356f30fe047c1a34c5384d
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/21/2020
ms.locfileid: "81694842"
---
# <a name="security-and-privacy-for-configuration-manager-clients"></a>Безопасность и конфиденциальность клиентов Configuration Manager

*Область применения: Configuration Manager (Current Branch)*

В этой статье содержатся сведения о безопасности и конфиденциальности клиентов Configuration Manager. В статье также приводятся сведения о мобильных устройствах под управлением [коннектора Exchange Server](../../../../mdm/deploy-use/manage-mobile-devices-with-exchange-activesync.md).  


## <a name="security-best-practices-for-clients"></a><a name="BKMK_Security_Clients"></a> Рекомендации по обеспечению безопасности клиентов  

Сайт Configuration Manager принимает данные с устройств под управлением клиента Configuration Manager. При такой схеме работы возникает риск атаки сайта со стороны клиентов. Например, они могут отправлять данные инвентаризации в неверном формате или пытаться перегружать системы сайта. Развертывайте клиент Configuration Manager только на устройствах, которым вы доверяете. Кроме того, используйте следующие рекомендации безопасности, чтобы защитить сайт от посторонних или атакованных злоумышленником устройств.  

### <a name="use-public-key-infrastructure-pki-certificates-for-client-communications-with-site-systems-that-run-iis"></a>Используйте сертификаты инфраструктуры открытых ключей (PKI) для подключения клиентов к системам сайта, применяющим IIS  

- Настройте для свойства сайта **Параметры системы сайта** значение **Только HTTPS**.  

- Установка клиентов со свойством CCMSetup `UsePKICert`.  

- Используйте список отзыва сертификатов (CRL) и убедитесь, что клиенты и серверы всегда имеют доступ к нему.  

Такие сертификаты требуются для клиентов мобильных устройств и некоторых интернет-клиентов. Корпорация Майкрософт рекомендует использовать такие сертификаты для всех клиентских подключений в интрасети.  

Дополнительные сведения о требованиях к PKI-сертификатам и об использовании таких сертификатов для защиты Configuration Manager см. в разделе [Требования к PKI-сертификатам](../../../plan-design/network/pki-certificate-requirements.md).  

### <a name="automatically-approve-client-computers-from-trusted-domains-and-manually-check-and-approve-other-computers"></a>Автоматически утверждайте все клиенты из доверенных доменов и вручную проверяйте и утверждайте все прочие компьютеры  

Если использование PKI-аутентификации невозможно, то с помощью утверждения можно указать доверенный компьютер для управления посредством Configuration Manager. Иерархия имеет следующие параметры для настройки утверждения клиентов:  

- Вручную
- Автоматическое для компьютеров в доверенных доменах
- Автоматическое для всех компьютеров  

Наиболее безопасный метод одобрения заключается в том, чтобы автоматически утвердить клиентов, являющихся членами доверенных доменов. Затем вручную проверить и утвердить все остальные компьютеры. Автоматическое одобрение всех клиентов не рекомендуется, если нет других средств управления доступом для предотвращения доступа к сети ненадежных компьютеров.  

Дополнительные сведения об утверждении компьютеров вручную см. в статье [Управление клиентами из узла "Устройства"](../../manage/manage-clients.md#BKMK_ManagingClients_DevicesNode).  

### <a name="dont-rely-on-blocking-to-prevent-clients-from-accessing-the-configuration-manager-hierarchy"></a>Не полагайтесь на блокировку для предотвращения доступа клиентов к иерархии Configuration Manager  

Заблокированные клиенты отклоняются инфраструктурой Configuration Manager. Если клиенты заблокированы, они не могут обмениваться данными с системами сайта для загрузки политики, передачи данных инвентаризации или отправки сообщений об изменении состояния или статуса.

Блокирование предназначено для следующих сценариев:

- для блокировки утерянных или скомпрометированных загрузочных носителей при развертывании операционных систем на клиентах;
- в случаях, когда все системы сайта принимают подключения клиентов по протоколу HTTPS.

Если системы сайта принимают подключения клиентов по протоколу HTTP, не следует полагаться на блокировку для защиты иерархии Configuration Manager от недоверенных компьютеров. В этом случае заблокированный клиент может снова присоединиться к сайту, используя новый самозаверяющий сертификат и идентификатор оборудования.

Отзыв сертификатов — это первая линия защиты от потенциально скомпрометированных сертификатов. Список отзыва сертификатов (CRL) доступен только из поддерживаемой инфраструктуры открытых ключей (PKI). Блокировка клиентов в Configuration Manager обеспечивает вторую линию обороны для защиты иерархии.  

Дополнительные сведения см. в разделе [Определение необходимости блокировки клиентов](determine-whether-to-block-clients.md).  

### <a name="use-the-most-secure-client-installation-methods-that-are-practical-for-your-environment"></a>Используйте наиболее безопасные методы установки клиента, целесообразные для используемой среды  

- Для компьютеров, входящих в домен, установка клиентов с помощью групповой политики и установка клиентов на основе обновления программного обеспечения являются более безопасными методами установки по сравнению с принудительной установкой клиентов.  

- При использовании управления доступом и управления изменениями применяйте методы создания образов и ручной установки.  

- Начиная с версии 1806 используйте взаимную проверку подлинности Kerberos вместе с принудительной установкой клиента.  

Из всех методов установки клиента метод принудительной установки является наименее безопасным из-за наличия множества зависимостей. Эти зависимости включают наличие прав локального администратора, включенную общую папку Admin$ и исключения в брандмауэре. Количество и тип этих зависимостей увеличивают количество возможных направлений атак.  

Начиная с версии 1806 при использовании принудительной установки клиента сайт может потребовать взаимную проверку подлинности Kerberos, не допуская возврата к NTLM перед установкой подключения. Такое улучшение позволяет защитить обмен данными между сервером и клиентом. Дополнительные сведения см. в разделе [Принудительная установка клиентов](../deploy-clients-to-windows-computers.md#BKMK_ClientPush).<!--1358204-->  

Дополнительные сведения о различных способах установки клиентов см. в разделе [Методы установки клиентов](client-installation-methods.md).  

По возможности выбирайте метод установки клиента, требующий наименьших разрешений безопасности в Configuration Manager. Ограничьте количество пользователей, которым назначены роли безопасности с разрешениями, которые могут использоваться в целях, отличных от развертывания клиентов. Например, для настройки автоматического обновления клиента требуется роль безопасности **Полный администратор**, которая предоставляет пользователю полный набор прав доступа.  

Дополнительные сведения о зависимостях и разрешениях безопасности, требуемых для каждого способа установки клиентов, см. в подразделе "Зависимости, связанные с конкретными методами установки" раздела [Необходимые условия для клиентов на компьютерах](../prerequisites-for-deploying-clients-to-windows-computers.md#BKMK_prereqs_computers).  

### <a name="if-you-must-use-client-push-installation-take-additional-steps-to-secure-the-client-push-installation-account"></a>Если использование принудительной установки клиентов необходимо, предпримите дополнительные меры защиты учетной записи принудительной установки клиентов.  

Эта учетная запись должна входить в локальную группу **Администраторы** на каждом компьютере, где необходимо установить клиент Configuration Manager. Никогда не добавляйте учетную запись принудительной установки клиента в группу **администраторов домена**. Вместо этого следует создать глобальную группу и добавить ее в локальную группу **Администраторы** на клиентах. Создайте объект групповой политики, чтобы добавить параметр "Ограниченная группа" для добавления учетной записи для принудительной установки клиента в локальную группу **Администраторы**.  

В целях обеспечения дополнительной безопасности создайте несколько учетных записей для принудительной установки клиентов, каждая из которых будет иметь права администратора на ограниченном количестве компьютеров. При компрометации одной учетной записи будут скомпрометированы только клиентские компьютеры, к которым у этой учетной записи есть доступ.  

### <a name="remove-certificates-before-imaging-clients"></a>Удаляйте сертификаты перед созданием образа клиента  

При развертывании клиентов с помощью образов ОС всегда удаляйте сертификаты перед записью образа. Эти сертификаты включают PKI-сертификаты для проверки подлинности клиента и самозаверяющие сертификаты. Если не удалить эти сертификаты, клиенты смогут имитировать друг друга. Станет невозможно проверять данные для каждого клиента.  

Дополнительные сведения см. в разделе [Создание последовательности задач для записи операционной системы](../../../../osd/deploy-use/create-a-task-sequence-to-capture-an-operating-system.md).  

### <a name="ensure-that-the-configuration-manager-computer-clients-get-an-authorized-copy-of-these-certificates"></a>Убедитесь в том, что клиенты компьютера Configuration Manager получат авторизованную копию сертификатов  

#### <a name="the-configuration-manager-trusted-root-key-certificate"></a>Сертификат корневого ключа доверия Configuration Manager  

Если выполняются оба следующих условия, клиенты полагаются на корневой ключ доверия Configuration Manager для проверки подлинности допустимых точек управления:  

- схема Active Directory не расширена для Configuration Manager;
- клиенты не используют сертификаты PKI, когда они взаимодействуют с точками управления.  

В этом случае клиенты не смогут проверить, является ли точка управления доверенной в иерархии, не используя корневой ключ доверия. Без корневого ключа доверия опытный злоумышленник сможет перенаправлять клиентов на фальшивую точку управления.  

Если клиенты не могут скачать корневой ключ доверия Configuration Manager из глобального каталога или с помощью сертификатов PKI, нужно заранее подготовить для клиентов корневой ключ доверия. Это действие гарантирует, что клиенты не будут направлены на фальшивую точку управления. Дополнительные сведения см. в разделе [Планирование доверенного корневого ключа](../../../plan-design/security/plan-for-security.md#BKMK_PlanningForRTK).  

#### <a name="the-site-server-signing-certificate"></a>Сертификат подписи сервера сайта  

Клиенты используют этот сертификат, чтобы убедиться в том, что политика, загружаемая из точки управления, подписана сервером сайта. Это самозаверяющий сертификат сервера сайта, он публикуется в доменных службах Active Directory.  

Если клиенты не могут загрузить сертификат подписи сервера сайта из глобального каталога, то по умолчанию они загружают его из точки управления. Если к точке управления есть доступ из ненадежной сети, такой как Интернет, необходимо вручную установить на клиенте сертификат подписи сервера сайта. Это действие гарантирует, что им не удается загрузить поддельные клиентские политики из скомпрометированной точки управления.  

Чтобы вручную установить сертификат для подписи сервера сайта, используйте свойство CCMSetup client.msi **SMSSIGNCERT**. Дополнительные сведения см. в разделе [о свойствах установки клиентов](../about-client-installation-properties.md).  

### <a name="dont-use-automatic-site-assignment-if-the-client-downloads-the-trusted-root-key-from-the-first-management-point-it-contacts"></a>Не используйте автоматическое назначение сайта, если клиент выполняет загрузку корневого ключа доверия с первой точки управления, к которой он сможет обратиться  

Чтобы избежать опасности загрузки новым клиентом корневого ключа доверия из фальшивой точки управления, используйте автоматическое назначение сайта только в следующих случаях:  

- Клиент может получить доступ к сведениям о сайте Configuration Manager, опубликованным в доменных службах Active Directory.  

- Вы можете заранее предоставить клиентам корневой ключ доверия.  

- Вы используете сертификаты PKI из центра сертификации предприятия для создания доверительных отношений между клиентом и точкой управления.  

Дополнительные сведения о корневом ключе доверия см. в статье [Планирование доверенного корневого ключа](../../../plan-design/security/plan-for-security.md#BKMK_PlanningForRTK).  

### <a name="install-client-computers-with-the-ccmsetup-clientmsi-option-smsdirectorylookupnowins"></a>Установите клиентские компьютеры с параметром CCMSetup Client.msi SMSDIRECTORYLOOKUP=NoWINS  

Наиболее безопасным способом обнаружения обслуживания клиентами, с помощью которого можно обнаруживать сайты и точки управления, является использование доменных служб Active Directory. Иногда этот метод невозможно применить для некоторых сред. Например, когда нельзя расширить схему Active Directory для Configuration Manager или когда клиенты находятся в недоверенном лесу или рабочей группе. Если применение этого метода невозможно, используйте публикацию DNS в качестве альтернативного способа обнаружения службы. При невозможности использования ни одного из этих двух способов, а также если точки управления не настроены для клиентских подключений по протоколу HTTP, клиенты применяют WINS.  

Публикация в WINS менее безопасна, чем другие методы публикации. Можно запретить клиентским компьютерам использовать WINS, указав значение параметра **SMSDIRECTORYLOOKUP=NoWINS**. Если необходимо использовать WINS для обнаружения службы, используйте значение параметра **SMSDIRECTORYLOOKUP=WINSSECURE**. Это значение по умолчанию. Оно указывает, что необходимо использовать корневой ключ доверия Configuration Manager для проверки самозаверяющего сертификата точки управления.  

> [!NOTE]  
> Если клиент, настроенный с параметром **SMSDIRECTORYLOOKUP=WINSSECURE**, находит точку управления с помощью WINS, клиент проверяет копию корневого ключа доверия Configuration Manager в WMI.  
>
> Если подпись сертификата точки управления соответствует клиентской копии ключа доверенного корня, сертификат подтверждается. После проверки сертификата клиент начинает взаимодействие с точкой управления, найденной посредством WINS.  
>
> Если подпись сертификата точки управления не соответствует клиентской копии ключа доверенного корня, сертификат не подтверждается. В этом случае клиент не взаимодействует с точкой управления, найденной посредством WINS.  

### <a name="make-sure-that-maintenance-windows-are-large-enough-to-deploy-critical-software-updates"></a>Убедитесь, что периоды обслуживания обладают достаточной длительностью для развертывания критических обновлений программного обеспечения.  

Периоды обслуживания для коллекций устройств ограничивают интервалы времени, в течение которых Configuration Manager может устанавливать программное обеспечение на устройства. Если задан слишком короткий период обслуживания, на клиент не будут установлены критические обновления программного обеспечения. В этом случае клиент станет уязвимым к атакам, для предотвращения которых были предназначены обновления.  

### <a name="take-additional-security-precautions-to-reduce-the-attack-surface-on-windows-embedded-devices-with-write-filters"></a>Примите дополнительные меры безопасности для уменьшения возможных направлений атак на устройства Windows Embedded,с помощью фильтров записи  

При включении фильтров записи на устройствах Windows Embedded все установки или изменения программного обеспечения производятся только в оверлей. Эти изменения сохраняются только до перезагрузки устройства. Если Configuration Manager используется для отключения фильтров записи, в течение этого периода встраиваемое устройство уязвимо к изменениям на всех томах. Эти тома включают общие папки.  

Configuration Manager блокирует компьютер в течение этого периода таким образом, что входить в систему могут только локальные администраторы. Когда это возможно, примите дополнительные меры безопасности для защиты компьютера. Например, включите дополнительные ограничения в брандмауэре.  

Если вы используете периоды обслуживания для сохранения изменений, планируйте их тщательно. Минимизируйте время, когда фильтры записи отключены. Но в то же время этот период должен быть достаточно продолжительным для завершения установки программного обеспечения и выполнения перезагрузки.  

### <a name="use-the-latest-client-version-with-software-update-based-client-installation"></a>Используйте последнюю версию клиента при использовании установки клиентов на основе обновления программного обеспечения

Если применяется установка клиентов на основе обновления программного обеспечения, а затем на сайт устанавливается более поздняя версия клиента, следует обновить опубликованное обновление. После чего клиенты получат последнюю версию из точки обновления программного обеспечения.  

При обновлении сайта обновления программного обеспечения для развертывания клиента, которое опубликовано в точке обновления программного обеспечения, автоматически не обновляются. Необходимо заново опубликовать клиент Configuration Manager в точке обновления программного обеспечения и обновить номер версии.  

Дополнительные сведения см. в статье [Установка клиентов Configuration Manager с помощью установки на основе обновления программного обеспечения](../deploy-clients-to-windows-computers.md#BKMK_ClientSUP).  

### <a name="only-suspend-bitlocker-pin-entry-on-trusted-and-restricted-access-devices"></a>Отключайте ввод ПИН-кода BitLocker только для доверенных устройств и для устройств с ограниченным доступом  

Включайте параметр клиента **Не требовать ввода ПИН-кода BitLocker при перезапуске** в значение **Всегда** только для доверенных компьютеров и для компьютеров, к которым ограничен физический доступ.

Если этот параметр клиента установлен в значение **Всегда**, Configuration Manager может выполнять установку программного обеспечения. Это позволяет устанавливать критические обновления программного обеспечения и возобновлять работу служб. Если злоумышленник перехватит процесс перезапуска, он сможет получить контроль над компьютером. Используйте этот параметр лишь в случае, если вы доверяете компьютеру, а физический доступ к этому компьютеру ограничен. К примеру, этот параметр можно применять к серверам, расположенным в центрах обработки данных.  

Дополнительные сведения об этом параметре клиентов см. в разделе [О параметрах клиентов](../about-client-settings.md#suspend-bitlocker-pin-entry-on-restart).  

### <a name="dont-bypass-powershell-execution-policy"></a>Не отключайте политику выполнения PowerShell

Если параметр клиента Configuration Manager **Политика выполнения PowerShell** установлен в значение **Отключить**, то Windows позволит выполнять неподписанные сценарии PowerShell. Это поведение делает возможным запуск вредоносных программ на клиентских компьютерах. Если вам необходимо использовать этот параметр, настраивайте его отдельно по каждому клиенту. Устанавливайте этот параметр только на тех клиентских компьютерах, на которых необходимо запускать неподписанные сценарии PowerShell.  

Дополнительные сведения об этом параметре клиентов см. в разделе [О параметрах клиентов](../about-client-settings.md#powershell-execution-policy).  


## <a name="security-best-practices-for-mobile-devices"></a><a name="bkmk_mobile"></a> Рекомендации по обеспечению безопасности мобильных устройств  

### <a name="install-the-enrollment-proxy-point-in-a-perimeter-network-and-the-enrollment-point-in-the-intranet"></a>Установите прокси-точку регистрации в сети периметра и точку регистрации в интрасети.  

Для мобильных устройств, подключенных к Интернету, которые будут зарегистрированы с помощью Configuration Manager, установите прокси-точку регистрации в сети периметра и точку регистрации в интрасети. Такое разделение ролей поможет защитить точку регистрации от атак. Если злоумышленник скомпрометирует точку регистрации, он сможет получить сертификаты для проверки подлинности. Кроме того, он может украсть учетные данные пользователей, регистрирующих свои мобильные устройства.  

### <a name="configure-the-password-settings-to-help-protect-mobile-devices-from-unauthorized-access"></a>Настройте параметры пароля, чтобы защитить мобильные устройства от несанкционированного доступа  

*Для мобильных устройств, зарегистрированных Configuration Manager*: с помощью элемента конфигурации мобильных устройств настройте сложность пароля в качестве ПИН-кода. Укажите по крайней мере минимальную длину пароля по умолчанию.  

*Для управляемых с помощью коннектора Exchange Server мобильных устройств, на которые не установлен клиент Configuration Manager*: настройте **Параметры пароля** коннектора Exchange Server; сложность пароля должна соответствовать ПИН-коду. Укажите по крайней мере минимальную длину пароля по умолчанию.  

### <a name="only-allow-applications-to-run-that-are-signed-by-companies-that-you-trust"></a>Разрешайте запуск только тех приложений, которые подписаны доверенными компаниями  

Можно исключить подмену данных инвентаризации и данных состояния, разрешив запуск приложений лишь в том случае, если они подписаны доверенными компаниями. Не разрешайте устройствам устанавливать неподписанные файлы.  

*Для мобильных устройств, зарегистрированных Configuration Manager*: с помощью элемента конфигурации мобильных устройств установите для параметра безопасности **Неподписанные приложения** значение **Запрещено**. Настройте для параметра **Установка неподписанных файлов** доверенный источник.  

*Для управляемых с помощью коннектора Exchange Server мобильных устройств, на которые не установлен клиент Configuration Manager*: настройте **Параметры приложений** для коннектора Exchange Server; для параметров **Установка неподписанного файла** и **Неподписанные приложения** должно быть задано значение **Запрещено**.  

### <a name="lock-mobile-devices-when-not-in-use"></a>Блокируйте мобильные устройства, когда они не используются  

Для предотвращения атак, связанных с повышением прав, блокируйте мобильное устройство, когда оно не используется.

*Для мобильных устройств, зарегистрированных Configuration Manager*: с помощью элемента конфигурации мобильных устройств настройте параметр **Время бездействия до блокировки мобильного устройства**.  

*Для управляемых с помощью коннектора Exchange Server мобильных устройств, на которые не установлен клиент Configuration Manager*: настройте **Параметры пароля** коннектора Exchange Server, чтобы задать параметр **Время бездействия до блокировки мобильного устройства**.  

### <a name="restrict-the-users-who-can-enroll-their-mobile-devices"></a>Ограничьте круг пользователей, имеющих право регистрировать свои мобильные устройства  

Необходимо предотвращать повышение привилегий, ограничивая набор пользователей, имеющих право регистрировать свои мобильные устройства. Используйте настраиваемые параметры клиента, а не параметры по умолчанию, чтобы только полномочные пользователи могли регистрировать мобильные устройства.  

### <a name="user-device-affinity-guidance-for-mobile-devices"></a>Управляйте сопоставлением пользователей и мобильных устройств  

Не развертывайте приложения для пользователей, которые используют мобильные устройства, зарегистрированные в Configuration Manager или в Microsoft Intune, в следующих случаях:  

- Мобильное устройство используется несколькими людьми.  

- Устройство зарегистрировано администратором от имени пользователя.  

- Устройство передается другому лицу без удаления и повторной регистрации.  

Регистрация устройств сопоставляет пользователя и устройство. Эта связь привязывает пользователя, выполняющего регистрацию, к мобильному устройству. Если другой пользователь использует мобильное устройство, он сможет запускать приложения, развертываемые для исходного пользователя, что может стать причиной несанкционированного повышения привилегий. Аналогично, если администратор регистрирует мобильное устройство для другого пользователя, то приложения, развернутые для пользователя, не будут установлены на этом мобильном устройстве. Напротив, может быть установлено приложение, предназначенное для администратора.  

В отличие от сопоставления пользователей и устройств для компьютеров Windows, для мобильных устройств, зарегистрированных в Microsoft Intune, невозможно вручную задать сведения о сопоставлении пользователей и устройств.  

Если вы меняете владельца мобильного устройства, которое было зарегистрировано в Intune, сначала необходимо удалить мобильное устройство из Intune. Это действие удалит привязку пользователя к устройству. Затем попросите текущего пользователя повторить регистрацию устройства.  

### <a name="make-sure-that-users-enroll-their-own-mobile-devices-for-microsoft-intune"></a>Убедитесь, что пользователи регистрируют свои собственные мобильные устройства в Microsoft Intune  

Во время регистрации устройств происходит сопоставление пользователя и устройства. Это действие привязывает пользователя, выполняющего регистрацию, к мобильному устройству. Если администратор регистрирует мобильное устройство для другого пользователя, то приложения, развернутые для пользователя, не будут установлены на этом мобильном устройстве. Напротив, может быть установлено приложение, предназначенное для администратора.  

### <a name="protect-the-connection-between-the-configuration-manager-site-server-and-the-exchange-server"></a>Защитите сетевое подключение между сервером сайта Configuration Manager и сервером Exchange Server

Если сервер Exchange развернут локально, используйте протокол IPsec. Размещенный Exchange автоматически защищает соединение по протоколу SSL.  

### <a name="use-the-principle-of-least-privileges-for-the-connector"></a>Использование принципа наименьших привилегий для соединителя  

Список минимально обязательных командлетов для соединителя Exchange Server см. в статье [Управление мобильными устройствами с помощью Configuration Manager и Exchange](../../../../mdm/deploy-use/manage-mobile-devices-with-exchange-activesync.md).  


## <a name="security-best-practices-for-macs"></a><a name="bkmk_macs"></a> Рекомендации по безопасности компьютеров Mac  

### <a name="store-and-access-the-client-source-files-from-a-secured-location"></a>Храните и обращайтесь к исходным файлам клиента из безопасного расположения  

Перед установкой или регистрацией клиента на компьютере Mac Configuration Manager не проверяет, были ли исходные файлы клиента умышленно изменены. Загружайте эти файлы из надежного источника. Безопасно храните их и получайте к ним доступ.  

### <a name="monitor-and-track-the-validity-period-of-the-certificate"></a>Контролируйте и отслеживайте срок действия сертификатов  

Для обеспечения непрерывности бизнес-процессов следует контролировать и отслеживать срок действия сертификатов, которые используются для компьютеров Mac. Configuration Manager не поддерживает автоматическое продление сертификата и не предупреждает об истечении срока его действия. Типичный срок действия — один год.  

Дополнительные сведения о продлении сертификата см. в статье [Ручное продление сертификата для клиентов Mac](../deploy-clients-to-macs.md#renew-the-mac-client-certificate).  

### <a name="configure-the-trusted-root-certificate-for-ssl-only"></a>Настраивайте доверенный корневой сертификат только для протокола SSL  

Для защиты от повышения привилегий настраивайте сертификат для доверенного корневого центра сертификации таким образом, чтобы он был доверенным только для протокола SSL.

При регистрации компьютеров Mac автоматически устанавливается сертификат пользователя для управления клиентом Configuration Manager. Этот сертификат пользователя содержит доверенные корневые сертификаты в цепочке доверия. Чтобы ограничить область доверия этого корневого сертификата только протоколом SSL, используйте следующую процедуру:  

1. На компьютере Mac откройте окно терминала.  

2. Выполните следующую команду: `sudo /Applications/Utilities/Keychain\ Access.app/Contents/MacOS/Keychain\ Access`  

3. В диалоговом окне **Доступ к цепочке ключей** в области **Цепочки ключей** щелкните **Система**. Затем в разделе **Категория** щелкните **Ключи**.  

4. Найдите и дважды щелкните сертификат корневого ЦС для сертификата клиента Mac.  

5. В диалоговом окне для сертификата корневого ЦС раскройте раздел **Доверять** и внесите следующие изменения.  

    1. **Параметры использования сертификата**: измените значение **Всегда доверять** на **Использовать параметры системы по умолчанию**.  

    2. **Протокол SSL**: измените значение **значение не указано** на **Всегда доверять**.  

6. Закройте диалоговое окно. При появлении соответствующего запроса введите пароль администратора и нажмите кнопку **Обновить параметры**.  

После выполнения этой процедуры корневой сертификат станет доверенным только для проверки протокола SSL. Другие протоколы, которые теперь станут недоверенными с этим корневым сертификатом, включают протокол безопасной почты (S/MIME), расширяемый протокол проверки подлинности (EAP) и подписывание кода.  

> [!NOTE]  
> Данную процедуру также можно использовать, если сертификат клиента был установлен независимо от Configuration Manager.


## <a name="security-issues-for-configuration-manager-clients"></a><a name="BKMK_SecurityIssues_Clients"></a> Вопросы безопасности клиентов Configuration Manager  

Для следующих проблем безопасности нет способов смягчения последствий.  

### <a name="status-messages-arent-authenticated"></a>Сообщения о состоянии не проходят проверку подлинности

Проверка подлинности не выполняется для сообщений о состоянии. Когда точка управления принимает подключения клиентов по протоколу HTTP, любое устройство может отправлять сообщения о состоянии в точку управления. Если точка управления принимает подключения клиентов только по протоколу HTTPS, устройство должно иметь действующий сертификат проверки подлинности клиента, однако оно также может отправлять любое сообщение о состоянии. Точка управления отклоняет любые недопустимые сообщения о состоянии, полученные от клиента.  

Эта уязвимость позволяет злоумышленникам предпринимать различные атаки:

- Злоумышленник может переслать поддельное сообщение об изменении состояния для получения членства в коллекции на основании запросов сообщений об изменении состояния.
- Любой клиент может начать атаку типа "отказ в обслуживании" против точки управления, перегрузив ее сообщениями об изменении состояния.
- Если сообщения об изменении состояния инициируют действия в правилах фильтрации сообщений об изменении состояния, злоумышленник может инициировать правило фильтрации сообщений об изменении состояния.
- Злоумышленник может послать сообщение об изменении состояния, которое будет неверно представлять информацию.  

### <a name="policies-can-be-retargeted-to-non-targeted-clients"></a>Политики могут быть перенаправлены на нецелевых клиентов  

Существует несколько методов, с помощью которых злоумышленники могут применить политику, направленную на одного клиента, к совершенно другому клиенту. Например, злоумышленник на доверенном клиенте может отправить ложные сведения об инвентаризации или сведения обнаружения, чтобы компьютер оказался добавлен к коллекции, к которой он не должен принадлежать. В результате этот клиент получит все развертывания для этой коллекции.

Существуют средства, помогающие предотвратить непосредственное изменение политики злоумышленниками. Тем не менее злоумышленники могут использовать существующую политику для переформатирования, повторного развертывания операционной системы и отправки ее на другой компьютер. Такое перенаправление политик может привести к отказу в обслуживании. Эти типы атак потребуют точного хронометража и углубленных знаний инфраструктуры Configuration Manager.  

### <a name="client-logs-allow-user-access"></a>Журналы клиента разрешают доступ пользователей  

Все файлы журналов клиентов предоставляют для группы **Пользователи** права на *чтение*, а для особого пользователя **Интерактивный** права на *запись*. Если включить режим подробного ведения журнала, злоумышленники смогут читать файлы журнала для поиска информации о согласовании или уязвимости системы. Такие процессы, как установка программного обеспечения на клиенте, выполняемая в контексте пользователя, должны записывать в журналы с учетной записью пользователя с низкими правами. Это означает, что злоумышленник также будет писать в журналы с учетной записью с низкими правами.  

Самый серьезный риск заключается в том, что злоумышленник может удалить информацию в файлах журналов. Администратору могут потребоваться эти сведения для аудита и обнаружения вторжений.  

### <a name="a-computer-could-be-used-to-obtain-a-certificate-thats-designed-for-mobile-device-enrollment"></a>Компьютер может использоваться для получения сертификата, предназначенного для регистрации мобильных устройств  

Когда Configuration Manager обрабатывает запрос регистрации, нет возможности убедиться в том, что запрос поступил от мобильного устройства, а не от компьютера. Если запрос поступил от компьютера, может быть установлен PKI-сертификат, который позволит зарегистрироваться в Configuration Manager.

Чтобы предотвратить атаку с повышением привилегий в этом сценарии, следует разрешить регистрацию мобильных устройств только надежным пользователям. Тщательно отслеживайте действия по регистрации устройств на сайте.  

### <a name="a-blocked-client-can-still-send-messages-to-the-management-point"></a>Заблокированный клиент может по-прежнему отправлять сообщения в точку управления

В случае блокировки клиента, который вы больше не считаете надежным, при наличии у него установленного сетевого подключения для уведомлений клиента Configuration Manager не отключает сеанс. Заблокированный клиент может продолжать отправлять пакеты на свою точка управления до тех пор, пока не отключится от сети. Это будут небольшие пакеты проверки активности (keep-alive). Этим клиентом нельзя управлять с помощью Configuration Manager, пока он не будет разблокирован.  

### <a name="automatic-client-upgrade-doesnt-verify-the-management-point"></a>При автоматическом обновлении клиента не выполняется проверка точки управления

При использовании автоматического обновления клиента клиент может быть перенаправлен на точку управления для загрузки исходных файлов клиента. В этом случае клиент не проверяет, является ли точка управления доверенным источником.  

### <a name="when-users-first-enroll-mac-computers-theyre-at-risk-from-dns-spoofing"></a>При первой регистрации пользователями компьютеров Mac существует угроза DNS-спуфинга  

При подключении компьютера Mac к прокси-точке регистрации во время регистрации маловероятно, что он уже имеет сертификат доверенного корневого ЦС. На данном этапе компьютер Mac не доверяет серверу и выводит пользователю запрос на продолжение. Если вредоносный сервер DNS разрешает полное доменное имя (FQDN) прокси-точки регистрации, он может направить компьютер Mac к фальшивой прокси-точке регистрации для установки сертификатов из ненадежного источника. Чтобы минимизировать этот риск, следуйте рекомендациям по предотвращению DNS-спуфинга в вашей среде.  

### <a name="mac-enrollment-doesnt-limit-certificate-requests"></a>Регистрация компьютеров Mac не ограничивает запросы на сертификаты  

Пользователи могут повторно зарегистрировать свои компьютеры Mac при каждом запросе нового сертификата клиента. Configuration Manager не проверяет наличие множественных запросов и не ограничивает количество сертификатов, запрашиваемых с одного компьютера. Пользователь-злоумышленник может запустить в командной строке сценарий, повторяющий запрос на регистрацию. Эта атака может привести к отказу в обслуживании в сети или в выдающем центре сертификации (ЦС). Чтобы минимизировать этот риск, внимательно отслеживайте выдающий ЦС на предмет такого подозрительного поведения. Немедленно блокируйте в иерархии Configuration Manager компьютеры, на которых наблюдается такая модель поведения.  

### <a name="a-wipe-acknowledgment-doesnt-verify-that-the-device-has-been-successfully-wiped"></a>Подтверждение очистки не проверяет успешность очистки устройства  

При инициализации действия очистки для мобильного устройства и подтверждении очистки в Configuration Manager проверяется успешность *отправки* сообщения системой Configuration Manager. Проверка того, что устройство *отреагировало* на запрос, не выполняется.

Для мобильных устройств, управляемых с помощью соединителя Exchange Server, подтверждение очистки проверяет получение команды в Exchange, а не на устройстве.  

### <a name="if-you-use-the-options-to-commit-changes-on-windows-embedded-devices-accounts-might-be-locked-out-sooner-than-expected"></a>Если параметры настроены для внесения изменений в устройства Windows Embedded, то учетные записи могут оказаться заблокированными раньше ожидаемого  

Если устройство Windows Embedded работает под управлением операционной системы, предшествующей Windows 7, и пользователь пытается войти в систему, пока фильтры записи отключены через Configuration Manager, то Windows уменьшает вдвое количество неудачных попыток входа в систему до блокировки учетной записи.

Например, политика домена **Порог блокировки учетной записи** настроена на шесть попыток. Пользователь вводит пароль с ошибкой три раза, и учетная запись блокируется. Такое поведение фактически создает отказ в обслуживании. Если пользователи должны входить в систему на встраиваемых устройствах в этой ситуации, предупредите их о возможном снижении порога блокировки.  


## <a name="privacy-information-for-configuration-manager-clients"></a><a name="BKMK_Privacy_Clients"></a> Конфиденциальность клиентов Configuration Manager  

При развертывании клиента Configuration Manager включаются настройки клиента для функций Configuration Manager. Эти параметры для настройки функций можно применить ко всем клиентам в иерархии Configuration Manager. Такое поведение не зависит от того, подключаются ли они к внутренней сети напрямую, через удаленный сеанс или через Интернет.  

Сведения о клиентах сохраняются в базе данных Configuration Manager на вашем SQL-сервере и не отправляются в корпорацию Майкрософт. Информация хранится в базе данных до тех пор, пока не будет удалена при выполнении задач обслуживания сайта **Удалить устаревшие данные управления конфигурацией**. Эта задача выполняется каждые 90 дней. Можно настроить интервал удаления. 

Некоторые сводные и статистические данные о диагностике и об использовании отправляются в корпорацию Майкрософт. Дополнительные сведения см. в статье [Данные о диагностике и использовании](../../../plan-design/diagnostics/diagnostics-and-usage-data.md).  

Прежде чем настраивать клиент Configuration Manager, следует рассмотреть требования к конфиденциальности.  

Дополнительные сведения о сборе и использовании данных корпорацией Майкрософт см. в [Заявлении о конфиденциальности Майкрософт](https://privacy.microsoft.com/privacystatement).

### <a name="client-status"></a>Статус клиента  

Configuration Manager осуществляет мониторинг активности клиентов. Он периодически оценивает параметры клиента Configuration Manager и может устранять проблемы с клиентом и его зависимостями. Состояние клиента включено по умолчанию. Для проверки активности клиентов используются метрики на стороне сервера. Статус клиента использует действия со стороны клиента для выполнения самопроверки, исправления проблем и отправки сведений о состоянии клиента на сайт. Клиент выполняет самопроверку в соответствии с настроенным администратором расписанием. Клиент отправляет результаты проверок на сайт Configuration Manager. Эти сведения шифруются при передаче.  

Сведения о состоянии клиента сохраняются в базе данных Configuration Manager на вашем SQL-сервере и не отправляются в корпорацию Майкрософт. Сведения не хранятся в зашифрованном виде в базе данных сайта. Сведения хранятся в базе данных до тех пор, пока не будут удалены в соответствии со значением параметра состояния клиента **Сохранять историю состояний клиентов в течение следующего числа дней**. Значение этого параметра по умолчанию — каждый 31 день.  

Прежде чем устанавливать клиент Configuration Manager с проверкой состояния клиента, следует рассмотреть требования к конфиденциальности.  


## <a name="privacy-information-for-mobile-devices-that-are-managed-with-the-exchange-server-connector"></a><a name="BKMK_Privacy_ExchangeConnector"></a> Конфиденциальность мобильных устройств, управляемых коннектором Exchange Server  

Соединитель Exchange Server находит и осуществляет управление устройствами, подключающимися к локальному или размещенному серверу Exchange Server по протоколу ActiveSync. Записи, обнаруженные коннектором Exchange Server, сохраняются в базе данных Configuration Manager на вашем SQL-сервере. Сведения получаются от Exchange Server. Они не содержат каких-либо дополнительных сведений из набора данных, отправляемых мобильными устройствами серверу Exchange Server.  

Указанные сведения не отправляются в корпорацию Майкрософт. Сведения о мобильных устройствах хранятся в базе данных Configuration Manager на вашем SQL-сервере. Информация хранится в базе данных до тех пор, пока не будет удалена при выполнении задачи обслуживания сайта **Удалить устаревшие данные управления конфигурацией**. Эта задача выполняется каждые 90 дней. Интервал удаления настраивается администратором.  

Перед установкой и настройкой соединителя Exchange Server следует рассмотреть требования к конфиденциальности.  

Дополнительные сведения о сборе и использовании данных корпорацией Майкрософт см. в [Заявлении о конфиденциальности Майкрософт](https://privacy.microsoft.com/privacystatement).
