---
title: Развертывание клиентов UNIX/Linux
titleSuffix: Configuration Manager
description: Из этой статьи вы узнаете, как развернуть клиент на сервере UNIX или Linux в Configuration Manager.
ms.date: 03/27/2019
ms.prod: configuration-manager
ms.technology: configmgr-client
ms.topic: conceptual
ms.assetid: 15a4e323-9f42-4fea-bb14-f2b905d1f77c
author: aczechowski
ms.author: aaroncz
manager: dougeby
ms.openlocfilehash: 4375867e70cb7f2989b78572c7fc8e005f95be73
ms.sourcegitcommit: bbf820c35414bf2cba356f30fe047c1a34c5384d
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/21/2020
ms.locfileid: "81694042"
---
# <a name="how-to-deploy-clients-to-unix-and-linux-servers-in-configuration-manager"></a>Как развернуть клиенты на серверах UNIX и Linux в Configuration Manager

*Область применения: Configuration Manager (Current Branch)*

> [!Important]  
> Начиная с версии 1902, Configuration Manager не поддерживает клиенты Linux и UNIX. 
> 
> Вы можете управлять серверами Linux с помощью портала управления Microsoft Azure. Решения Azure располагают расширенной поддержкой Linux, которая в большинстве случаев превышает функциональные возможности Configuration Manager, включая полное управление исправлениями для Linux.


Прежде чем вы сможете управлять сервером UNIX или Linux с помощью Configuration Manager, необходимо установить клиент Configuration Manager для Linux и UNIX на каждом сервере UNIX или Linux. Можно выполнить установку клиента вручную на каждом компьютере или воспользоваться сценарием оболочки, который устанавливает клиент удаленно. Configuration Manager не поддерживает использование принудительной установки клиента для серверов UNIX или Linux. При необходимости можно настроить модуль Runbook для System Center Orchestrator на автоматизацию установки клиента на серверах UNIX или Linux.  

 Независимо от используемого метода установки процесс установки требует применения сценария с именем **install** для управления процессом установки. Этот скрипт включается при загрузке клиент для Linux и UNIX.  

 Скрипт установки клиента Configuration Manager для Linux и UNIX поддерживает свойства командной строки. Некоторые свойства командной строки обязательны, а некоторые — нет. Например при установке клиента, необходимо указать точку управления с сайта, используемый для начальной контактов с сайта на сервере UNIX или Linux. Полный список свойств командной строки см. в разделе [Свойства командной строки для установки клиента на серверах UNIX и Linux](#BKMK_CmdLineInstallLnUClient).  

 После установки клиента можно указать параметры клиента в консоли Configuration Manager, чтобы настроить агент клиента по аналогии с клиентами на основе Windows. Дополнительные сведения см. в разделе [Параметры клиента для серверов Linux и UNIX](../../../core/clients/manage/manage-clients-for-linux-and-unix-servers.md#BKMK_ClientSettingsforLnU).  

##  <a name="about-client-installation-packages-and-the-universal-agent"></a><a name="BKMK_AboutInstallPackages"></a> О пакетах установки клиента и универсальном агенте  
 Чтобы установить клиент для Linux и UNIX на определенной платформе, необходим подходящий пакет установки клиента для компьютера, где выполняется установка клиента. Соответствующие пакеты установки клиента входят в состав файлов, скачиваемых из [Центра загрузки Майкрософт](https://go.microsoft.com/fwlink/?LinkID=525184). Помимо пакетов установки клиента скачиваемые файлы содержат сценарий **install**, который управляет установкой клиента на каждом компьютере.  

 При установке клиента вы можете использовать одни и те же свойства процесса и командной строки независимо от используемого пакета установки.  

 Сведения об операционных системах, платформах и пакетах установки клиента, поддерживаемых каждым выпуском клиента Configuration Manager для Linux и UNIX, см. в разделе [Серверы Linux и UNIX](../../plan-design/configs/supported-operating-systems-for-clients-and-devices.md#linux-and-unix-servers).  

##  <a name="install-the-client-on-linux-and-unix-servers"></a><a name="BKMK_InstallLnUClient"></a> Установка клиента на серверах UNIX и Linux  
 Чтобы установить клиент для Linux и UNIX, запустите сценарий на каждом компьютере UNIX или Linux. Скрипт имеет имя **install** и поддерживает свойства командной строки, которые изменяют поведение установки и ссылаются на пакет установки клиента. Установочный пакет установки сценарий и клиент должен быть расположен на клиенте. Пакет установки клиента содержит файлы клиента Configuration Manager для конкретной операционной системы UNIX или Linux и платформы.
Каждый пакет установки клиента содержит все файлы, необходимые для установки клиента, и в отличие от компьютеров под управлением Windows не скачивает дополнительные файлы из точки управления или другого исходного расположения.  

 После установки клиента Configuration Manager для Linux и UNIX перезагружать компьютер не требуется. Сразу после установки программного обеспечения клиента работает. При перезагрузке компьютера клиент Configuration Manager автоматически перезапускается.  

 Установленного клиента выполняется с учетными данными корневой. Учетные данные привилегированного пользователя необходимы для сбора данных инвентаризации оборудования и развертывания программного обеспечения.  

 Используйте команду в следующем формате:  

 `./install -mp <computer> -sitecode <sitecode> <property #1> <property #2> <client installation package>`  

-   `install` — это имя файла скрипта, который устанавливает клиенты для Linux и UNIX. Этот файл входит в состав клиентского программного обеспечения.  

-   `-mp <computer>` указывает начальную точку управления, используемую клиентом. Пример: `smsmp.contoso.com`  

-   `-sitecode <site code>` указывает код сайта, которому будет назначен клиент. Пример: `S01`  

-   `<property #1> <property #2>` указывает свойства командной строки для использования со скриптом установки.  

    > [!NOTE]  
    >  Дополнительные сведения см. в разделе [Свойства командной строки для установки клиента на серверах UNIX и Linux](#BKMK_CmdLineInstallLnUClient).  

-   **Пакет установки клиента** — это имя TAR-пакета установки клиента для версии операционной системы и архитектуры ЦП на данном компьютере. Последний должен быть указан .tar файла установки клиента. Пример: `ccm-Universal-x64.<build>.tar`  

###  <a name="to-install-the-configuration-manager-client-on-linux-and-unix-servers"></a><a name="BKMK_ToInstallLnUClinent"></a> Установка клиента Configuration Manager на серверах Linux и UNIX  

1.  На компьютере Windows [скачайте файл соответствующего клиента для сервера Linux или UNIX](https://go.microsoft.com/fwlink/?LinkID=525184), которым хотите управлять.  

2.  Запустите самоизвлекающийся EXE-файл на компьютере Windows, чтобы извлечь сценарий установки и TAR-файл установки клиента.  

3.  Скопируйте сценарий **установки** и TAR-файл в папку на сервере, которым требуется управлять.  

4.  На сервере UNIX или Linux выполните следующую команду, чтобы разрешить выполнение сценария в качестве программы: `chmod +x install`  

    > [!IMPORTANT]  
    >  Для установки клиента необходимо использовать учетные данные суперпользователя.  

5.  Затем выполните следующую команду, чтобы установить клиент Configuration Manager: `./install -mp <hostname> -sitecode <code> ccm-Universal-x64.<build>.tar`  

     При вводе этой команды используйте дополнительные свойства командной строки, потребуется. Список свойств командной строки см. в разделе [Свойства командной строки для установки клиента на серверах UNIX и Linux](#BKMK_CmdLineInstallLnUClient)  

6.  После выполнения сценария проверьте установку, просмотрев файл **/var/opt/microsoft/scxcm.log**. Кроме того, вы можете убедиться в том, что клиент установлен и взаимодействует с сайтом, просмотрев сведения о клиенте в узле **Устройства** рабочей области **Активы и соответствие** консоли Configuration Manager.  

###  <a name="command-line-properties-for-installing-the-client-on-linux-and-unix-servers"></a><a name="BKMK_CmdLineInstallLnUClient"></a> Свойства командной строки для установки клиента на серверах UNIX и Linux  
 Для изменения режима скрипта установки доступны следующие свойства:  

> [!NOTE]  
>  Используйте свойство `-h`, чтобы отобразить список поддерживаемых свойств.  

-   `-mp <server FQDN>`  

     Обязательно. На основе полного доменного имени задает сервер точки управления, к которому клиент будет обращаться изначально.  

    > [!IMPORTANT]  
    >  Это свойство не указывает точку управления, которой этот клиент будет назначен после установки.  

    > [!NOTE]  
    >  При использовании свойства `-mp` для указания точки управления, настроенной для приема подключений клиентов только по протоколу HTTPS, необходимо также использовать свойство `-UsePKICert`.  

-   `-sitecode <sitecode>`  

     Обязательно. Задает первичный сайт Configuration Manager, которому должен быть назначен клиент Configuration Manager. Пример: `-sitecode S01`  

-   `-fsp <server_FQDN>`  

     Необязательный параметр. Задает полное доменное имя, клиент использует для отправки сообщения о состоянии сервера точки состояния отката. Дополнительные сведения см. в разделе [Определение необходимости в резервной точке состояния](plan/determine-the-site-system-roles-for-clients.md#fallback-status-point).  

-   `-dir <directory>`  

     Необязательный параметр. Указывает альтернативное расположение для установки файлов клиента Configuration Manager. По умолчанию клиент устанавливается в следующем расположении: `/opt/microsoft`  

-   `-nostart`  

     Необязательный параметр. Предотвращает автоматический запуск службы клиента Configuration Manager — **ccmexec.bin** — после завершения установки клиента.  

     После установки клиента, необходимо запустить службу клиента вручную.  

     По умолчанию после завершения установки клиента и перезагрузки компьютера при каждом запуске службы клиента.  

-   `-clean`  

     Необязательный параметр. Задает удаление всех файлов клиента и данные из ранее установленного клиента для Linux и UNIX, перед началом установки новой. При этом удаляется база данных и хранилище сертификатов клиента.  

-   `-keepdb`  

     Необязательный параметр. Указывает, что база данных локального клиента сохраняется и используется всякий раз при переустановке клиента. По умолчанию при переустановке клиента удаляется этой базы данных.  

-   `-UsePKICert <parameter>`  

     Необязательный параметр. Указывает полный путь и имя файла для сертификатов инфраструктуры открытого ключа X.509 в формате стандарта сертификата открытого ключа (PKCS #12). Этот сертификат используется для проверки подлинности клиента. Если сертификат не указан во время установки и вам нужно добавить или изменить сертификат, используйте служебную программу **certutil**. Дополнительные сведения см. в разделе [Управление сертификатами на стороне клиента для Linux и UNIX](../manage/manage-clients-for-linux-and-unix-servers.md#BKMK_ManageLinuxCerts).  

     При использовании параметра `-UsePKICert` необходимо также использовать параметр командной строки `-certpw`, чтобы указать пароль, связанный с файлом PKCS#12.  

     Если вы не используете это свойство для указания PKI-сертификата, клиент использует самозаверяющий сертификат, а все операции обмена данными с системами сайта осуществляются по протоколу HTTP.  

     Если указан недопустимый сертификат на клиенте установить командной строки, ошибки не возвращаются. Проверка сертификата выполняется после установки клиента. При запуске клиента сертификаты проверяются на точке управления. Если сертификат не проходит проверку, появится следующее сообщение в журнале **scxcm.log**: **Не удалось проверить сертификат для точки управления**. Расположение файла журнала по умолчанию: **/var/opt/microsoft/scxcm.log**.  

     > [!NOTE]  
     > Укажите это свойство при установке клиента и используйте свойство `-mp`, чтобы указать точку управления, которая настроена на принятие подключений клиентов только по протоколу HTTP.  

     Пример: `-UsePKICert <full path and filename> -certpw <password>`  

-   `-certpw <parameter>`  

     Необязательный параметр. Указывает пароль, связанный с файлом PKCS#12, который вы задали с помощью свойства `-UsePKICert`.  

     Пример: `-UsePKICert <full path and filename> -certpw <password>`  

-   `-NoCRLCheck`  

     Необязательный параметр. Указывает, что клиент не должен проверять список отзыва сертификатов (CRL) при обмене данными по протоколу HTTPS с использованием PKI-сертификата. Если этот параметр не указан, клиент проверяет список отзыва сертификатов перед установкой подключения по протоколу HTTPS с использованием PKI-сертификата. Дополнительные сведения о проверке списка отзыва сертификатов см. Планирование отзыва сертификатов PKI.  

     Пример: `-UsePKICert <full path and filename> -certpw <password> -NoCRLCheck`  

-   `-rootkeypath <file location>`  

     Необязательный параметр. Указывает полный путь и имя файла для корневого ключа доверия Configuration Manager. Корневой ключ доверия Configuration Manager предоставляет механизм, позволяющий клиентам Linux и UNIX удостовериться в том, что они подключены к системе сайта, относящейся к корректной иерархии.  

     Если не указать доверенный корневой ключ в командной строке, клиент будет доверять первой точке управления, к которой он обращается, и автоматически получит от нее доверенный корневой ключ.  

     Дополнительные сведения см. в разделе [Планирование доверенного корневого ключа](../../../core/plan-design/security/plan-for-security.md#BKMK_PlanningForRTK).  

     Пример: `-rootkeypath <full path and filename>`  

-   `-httpport <port>`  

     Необязательный параметр. Указывает порт, который настроен в точках управления, которые используются при связи с точки управления по протоколу HTTP. Если порт не указан, используется значение по умолчанию — 80.  

     Пример: `-httpport 80`  

-   `-httpsport <port>`  

     Необязательный параметр. Указывает порт, который настроен в точках управления, которые используются при связи с точки управления по протоколу HTTPS. Если порт не указан, используется значение по умолчанию — 443.  

     Пример: `-UsePKICert <full path and certificate name> -httpsport 443`  

-   `-ignoreSHA256validation`  

     Необязательный параметр. Указывает, что установка клиента пропускает проверку SHA-256. Используйте этот параметр при установке клиента в операционных системах, которые не содержат версию OpenSSL, поддерживающую SHA-256. Дополнительные сведения см. в разделе [Сведения об операционных системах Linux и UNIX, не поддерживающих SHA-256](../../../core/clients/deploy/plan/planning-for-client-deployment-to-linux-and-unix-computers.md#BKMK_NoSHA-256).  

-   `-signcertpath <file location>`  

     Необязательный параметр. Указывает полный путь и **.cer** имя файла экспортируемого самозаверяющего сертификата на сервере сайта. Если PKI-сертификаты недоступны, сервер сайта Configuration Manager автоматически создает самозаверяющие сертификаты.  

     Эти сертификаты используются для проверки того, что политики клиента, загружаются из точки управления, отправленных с нужным сайтом. Если самозаверяющий сертификат не указан во время установки или вам нужно изменить этот сертификат, используйте служебную программу **certutil**. Дополнительные сведения см. в разделе [Управление сертификатами на стороне клиента для Linux и UNIX](../manage/manage-clients-for-linux-and-unix-servers.md#BKMK_ManageLinuxCerts).  

     Этот сертификат можно получить из хранилища сертификатов **SMS**, ему задано имя субъекта **Сервер сайта** и понятное имя **Сертификат подписи сервера сайта**.  

     Если этот параметр не указан во время установки, клиенты Linux и UNIX будут доверять первой точке управления, к которой они обратились. Они автоматически получат от нее сертификат подписи.  

     Пример: `-signcertpath <full path and file name>`  

-   `-rootcerts`  

     Необязательный параметр. Задает дополнительные PKI-сертификаты для импорта, которые не входят в иерархию центра сертификации (ЦС) для точек управления. Если указать несколько сертификатов в командной строке, они должны быть с разделителями-запятыми.  

     Используйте этот параметр, если вы применяете PKI-сертификаты клиентов, не объединенные в цепочку с сертификатом корневого ЦС, который является доверенным для ваших точек управления сайтами. Точки управления отклонят подключение клиента, если сертификат клиента не объединен в цепочку с доверенным корневым сертификатом в списке издателей сертификатов сайта.  

     Если этот параметр не используется, клиент Linux и UNIX будет проверять доверие к иерархии только с помощью сертификата, указанного в параметре `-UsePKICert`.  

     Пример: `-rootcerts <full path and file name>,<full path and file name>`  

###  <a name="uninstalling-the-client-from-linux-and-unix-servers"></a><a name="BKMK_UninstallLnUClient"></a> Удаление клиента на серверах UNIX и Linux  
 Чтобы удалить клиент Configuration Manager для Linux и UNIX, используйте служебную программу удаления **uninstall**. По умолчанию этот файл находится в **/opt/microsoft/configmgr/bin/** папки на клиентском компьютере. Эта команда удаления не поддерживает параметры командной строки и удалит с сервера все файлы, связанные с клиентским программным обеспечением.  

 Чтобы удалить клиент, используйте следующую командную строку: **/opt/microsoft/configmgr/bin/uninstall**  

 После удаления клиента Configuration Manager для Linux и UNIX перезагружать компьютер не требуется.  

##  <a name="configure-request-ports-for-the-client-for-linux-and-unix"></a><a name="BKMK_ConfigLnUClientCommuincations"></a> Настройка портов запроса для клиента для Linux и UNIX  
 Клиент Configuration Manager для Linux и UNIX, по аналогии с клиентами на основе Windows, использует протоколы HTTP и HTTPS для обмена данными с системами сайта Configuration Manager. Порты, которые клиент Configuration Manager использует для обмена данными, называются портами запросов.  

 При установке клиента Configuration Manager для Linux и UNIX вы можете изменить порты запросов клиента по умолчанию, указав свойства установки **-httpport** и **-httpsport**. Если свойство установки и пользовательское значение не указаны, клиент использует значения по умолчанию. Значения по умолчанию, **80** для трафика HTTP и **443** для трафика HTTPS.  

 После установки клиента вы не сможете изменить конфигурацию порта запроса. Вместо этого для изменения конфигурации портов необходимо переустановить клиент и указать новую конфигурацию порта. Если вы переустанавливаете клиент, чтобы изменить номера портов запросов, выполните команду **install** (которая выполняет такие же операции, как при установке нового клиента), но при этом укажите дополнительное свойство командной строки **-keepdb**. Этот параметр указывает программе установки сохранить клиентскую базу данных и файлы, включая идентификаторы GUID и хранилище сертификатов клиентов.  

 Дополнительные сведения о номерах портов связи с клиентами см. в разделе [Настройка портов связи для клиентов](../../../core/clients/deploy/configure-client-communication-ports.md).  

##  <a name="configure-the-client-for-linux-and-unix-to-locate-management-points"></a><a name="BKMK_ConfigClientMP"></a> Настройка клиента для Linux и UNIX, для поиска точек управления  
 При установке клиента Configuration Manager для Linux и UNIX необходимо указать точку управления, к которой клиент будет обращаться изначально.  

 Клиент Configuration Manager для Linux и UNIX обращается к этой точке управления во время своей установки. Если ему не удается связаться с точкой управления, клиентское программное обеспечение продолжает попытки до успешной установки соединения.  

 Дополнительные сведения об обнаружении точек управления клиентами см. в разделе [Поиск точек управления](assign-clients-to-a-site.md#locating-management-points).
