---
title: Вопросы и ответы по размеру и производительности сайта
titleSuffix: Configuration Manager
description: Ответы на распространенные вопросы о размерах и производительности сайта Configuration Manager.
author: aczechowski
ms.author: aaroncz
ms.prod: configuration-manager
ms.topic: conceptual
ms.date: 04/19/2019
ms.openlocfilehash: 3e7b9f6bc861ef5a60e4c0857dc253e3c806a851
ms.sourcegitcommit: 1442a4717ca362d38101785851cd45b2687b64e5
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/23/2020
ms.locfileid: "82073268"
---
# <a name="configuration-manager-site-sizing-and-performance-faq"></a>Вопросы и ответы по размеру и производительности сайта Configuration Manager

*Область применения: Configuration Manager (Current Branch)*

В этом документе рассматриваются часто задаваемые вопросы и рекомендации по выбору размеров сайта Configuration Manager и общие проблемы с производительностью.

## <a name="machine-and-disk-configuration-faqs-and-examples"></a>Вопросы, ответы и примеры по конфигурации машин и дисков

### <a name="how-should-i-format-the-disks-on-my-site-server-and-sql-server"></a>Как следует форматировать диски на моем сервере сайта и SQL Server?

Разделите файлы папки "Входящие" Configuration Manager и файлы SQL по меньшей мере на два разных тома. Такое разделение позволяет оптимизировать размеры выделяемых кластеров для различных типов операций ввода-вывода, которые они используют. 

Для тома, где размещается ваша папка "Входящие" сервера сайта, используйте NTFS с единицами размещения размером 4 или 8 КБ. ReFS записывает по 64 КБ даже для небольших файлов. Configuration Manager использует множество небольших файлов, поэтому использование ReFS может привести к лишним издержкам.

Для дисков, содержащих файлы базы данных SQL, используйте форматирование в NTFS или ReFS, с единицами распределения по 64 КБ.

### <a name="how-and-where-should-i-lay-out-my-sql-database-files"></a>Как и где следует разместить файлы базы данных SQL?

Современные массивы твердотельных накопителей (SSD) и хранилище Azure класса Premium обеспечивают высокий уровень операций ввода-вывода в секунду на одном томе с несколькими дисками. Дополнительные диски обычно добавляются в массив для расширения хранилища, но не повышения пропускной способности. Если вы используете физические диски на основе шпинделей, может понадобиться больше операций ввода-вывода в секунду, чем получится достичь с одним томом. Необходимо выделить 60 % от общего рекомендуемого объема операций ввода-вывода в секунду и места на диске для *MDF*-файла, 20 % — для *LDF*-файла, а также 20 % для временных файлов журналов и данных. *LDF*-файлы и временные файлы могут находиться на одном томе с 40 % (20 % + 20 %) выделенных операций ввода-вывода в секунду.

Серверы с SQL Server версии, предшествующей SQL Server 2016, по умолчанию создаются только с одним временным файлом данных. Следует создать дополнительные файлы во избежание блокировки и ожидания доступа к одиночному файлу в SQL. В сообществе есть разные мнения относительно оптимального количества создаваемых файлов для временных данных — от четырех до восьми. Тестирование показывает небольшую разницу между 4 и 8 файлами, поэтому можно создать четыре файла для временных данных *одинакового размера*. Файлы данных tempdb должны составлять до 20–25 % размера полной базы данных.

### <a name="are-there-any-other-recommendations-for-disk-setup"></a>Есть ли другие рекомендации по настройке дисков?

Если это можно настроить, отведите в памяти контроллера RAID 70 % для операций записи и 30 % для операций чтения. Как правило, для базы данных сайта стоит использовать конфигурацию массива RAID 10. Уровень RAID 1 также допускается для небольших сайтов с низкими требованиями к вводу-выводу или если вы используете быстрые диски SSD. При наличии больших массивов дисков настройте запасные диски для автоматической замены сбойных дисков.

**Пример. Физический компьютер с физическими дисками** 

[Рекомендации по размеру](../plan-design/configs/site-size-performance-guidelines.md#general-sizing-guidelines) для совместно размещенного сервера сайта и SQL Server с **100 000** клиентов — 1200 операций ввода-вывода в секунду для папок "Входящие" сервера сайта и 5000 для файлов SQL Server.

Результирующая конфигурация диска может выглядеть так:

| Диски<sup>1</sup> | RAID | Формат | Содержимое томов | Необходимый минимум операций ввода-вывода за секунду| Приблизительное число обеспеченных операций ввода-вывода за секунду<sup>2</sup>  |
|----------------|-----------|-------------|----------------------|---------------------|------------------|
| 2x10 тыс.          | 1         | -           | Windows              |                     | -                |
| 6x15 тыс.          | 10        | NTFS, 8 КБ     | ConfigMgr, папки "Входящие"    |     1700            | 1751             |
| 12x15 тыс.         | 10        | ReFS, 64 КБ    | SQL .mdf             | 60 % * 5000 = 3000     | 3476             |
| 8x15 тыс.          | 10        | ReFS, 64 КБ    | SQL .ldf, временные файлы | 40 % * 5000 = 2000     | 2322             |

1. Не включает рекомендуемые запасные диски. 
2. Это значение взято из раздела [Примеры конфигурации дисков](../plan-design/configs/site-size-performance-guidelines.md#example-disk-configurations). 

### <a name="i-use-hyper-v-on-windows-server-how-should-i-configure-the-disks-for-my-configuration-manager-vms-for-best-performance"></a>Я использую Hyper-V в Windows Server. Как следует настроить диски виртуальных машин Configuration Manager для достижения оптимальной производительности?

Hyper-V обладает схожей с ситуацией физического сервера производительностью в случае, если ресурсы оборудования (ядра ЦП и хранилище) полностью выделены для виртуальной машины. Использование *VHD*- или *VHDX*-файлов фиксированного размера оказывает минимальное влияние на производительность операций ввода-вывода (1–5 %). Использование динамически расширяемых *VHD*- или *VHDX*-файлов приводит к снижению производительности операций ввода-вывода на 25 %для рабочей нагрузки Configuration Manager. Если необходимы динамически расширяемые диски, добавьте дополнительно 25 % производительности операций ввода-вывода в секунду в массив.

При выполнении сервера сайта Configuration Manager или SQL в виртуальной машине изолируйте диски операционной системы узла Hyper-V от дисков операционной системы и данных виртуальной машины.

Дополнительные сведения об оптимизации виртуальных машин см. в разделе [Настройка производительности серверов Hyper-V](/windows-server/administration/performance-tuning/role/hyper-v-server/).

**Пример. Сервер сайта на основе виртуальной машины Hyper-V** 

[Рекомендации по размеру](../plan-design/configs/site-size-performance-guidelines.md#general-sizing-guidelines) для совместно размещенного сервера сайта и SQL Server с **150 000** клиентов — 1800 операций ввода-вывода в секунду для папок "Входящие" сервера сайта и 7400 для файлов SQL Server.

Результирующая конфигурация диска может выглядеть так:

| Диски<sup>1</sup> | RAID | Формат<sup>2</sup> | Содержимое томов | Необходимый минимум операций ввода-вывода за секунду| Приблизительное число обеспеченных операций ввода-вывода за секунду<sup>3</sup>  |
|----------------|-----------|----------------|---------------------------|----------------------|------------------|
| 2x10 тыс.          | 1         | -              | ОС узла Hyper-V           | -                    | -                |
| 2x10 тыс.          | 1         | -              | ОС сервера сайта (ВМ)       | -                    | -                |
| 2 диска SSD SAS      | 1         | NTFS, 8 КБ        | ConfigMgr, папки "Входящие" (ВМ)    | 1800                 | 7539             |
| 4 диска SSD SAS      | 10        | ReFS, 64 КБ       | Узел SQL (ВМ, все файлы) | 7400                 | 14346            |

1. Не включает рекомендуемые запасные диски. 
2. *VHDX*-файл фиксированного размера со сквозной передачей для диска виртуальной машины, выделенного для базового тома. 
3. Это значение взято из раздела [Примеры конфигурации дисков](../plan-design/configs/site-size-performance-guidelines.md#example-disk-configurations). 

### <a name="are-there-any-suggestions-for-configuration-manager-environments-in-microsoft-azure"></a>Есть ли какие-либо рекомендации для среды Configuration Manager в Microsoft Azure?

Для начала см. раздел [Вопросы и ответы по использованию Configuration Manager в Azure](configuration-manager-on-azure.md).

Виртуальные машины "инфраструктура как услуга" (IaaS) Azure, которые используют диски на основе хранилища класса Premium, могут иметь высокий уровень операций ввода-вывода в секунду. На этих виртуальных машинах настройте дополнительные диски для обеспечения требований к ожидаемому дисковому пространству, но не для операций ввода-вывода в секунду.

Хранилище Azure по своей природе избыточно и не требует нескольких дисков для обеспечения доступности. Вы можете использовать чередующиеся диски в диспетчере дисков или дисковых пространствах для предоставления дополнительного пространства и производительности.

Дополнительные сведения и рекомендации о том, как добиться максимальной производительности хранилища класса Premium и запустить серверы SQL Server на виртуальных машинах IaaS Azure, см. в разделе:

- [Оптимизация производительности приложения](/azure/storage/storage-premium-storage-performance#optimize-application-performance)
 
- [Рекомендации по использованию дисков](/azure/virtual-machines/windows/sql/virtual-machines-windows-sql-performance#disks-guidance)

**Пример. Сервер сайта на основе Azure** 

[Рекомендации по размеру](../plan-design/configs/site-size-performance-guidelines.md#general-sizing-guidelines) для совместно размещенного сервера сайта и SQL Server с **50 000** клиентов — восемь ядер, 32 ГБ памяти и 1200 операций ввода-вывода в секунду для папок "Входящие" сервера сайта и 2800 операций для файлов SQL Server.

В результате машиной Azure может быть DS13v2 (восемь ядер, 56 ГБ) со следующей конфигурацией дисков:

| Диски | Формат | Содержит | Необходимый минимум операций ввода-вывода за секунду| Приблизительное число обеспеченных операций ввода-вывода за секунду<sup>1</sup>  |
|------------------|---------------|--------------------|----------------------|------------------|
| &lt;standard&gt; | -             | ОС сервера сайта     | -                    | -                |
| 1xP20 (512 ГБ)    | NTFS, 8 КБ       | ConfigMgr, папки "Входящие"  | 1200                 | 2334             |
| 1xP30 (1024 ГБ)   | ReFS, 64 КБ      | SQL (все файлы<sup>2</sup>) | 2800                 | 3112             |

1. Это значение взято из раздела [Примеры конфигурации дисков](../plan-design/configs/site-size-performance-guidelines.md#example-disk-configurations).
2. [Руководство по Azure](/azure/virtual-machines/windows/sql/virtual-machines-windows-sql-performance#disks-guidance) позволяет размещать базу данных TempDB на локальном диске SSD *D:* при условии, что он не будет превышать доступное пространство и обеспечит дополнительное распределение дискового ввода-вывода.

**Пример. Сервер сайта на платформе Azure (для мгновенного повышения производительности)** 

Пропускная способность дисков Azure ограничивается размером виртуальной машины. Конфигурация в приведенном выше примере Azure может ограничивать расширение или увеличение производительности в будущем. При добавлении дополнительных дисков во время первоначального развертывания виртуальной машины Azure вы можете повысить ее уровень для повышения вычислительной мощности в будущем с минимальными начальными затратами. Гораздо проще приготовиться заранее и повышать производительность по мере изменений требований, вместо того чтобы позже выполнять более сложный перенос.

Измените диски в приведенном выше примере Azure, чтобы увидеть, как изменится число операций ввода-вывода в секунду.

**DS13v2** 

| Диски<sup>1</sup> | Формат | Содержит | Необходимый минимум операций ввода-вывода за секунду| Приблизительное число обеспеченных операций ввода-вывода за секунду<sup>2</sup>  |
|------------------|---------------|--------------------|----------------------|------------------|
| &lt;standard&gt; | -             | ОС сервера сайта     | -                    | -                |
| 2xP20 (1024 ГБ)   | NTFS, 8 КБ       | ConfigMgr, папки "Входящие"  | 1200                 | 3984             |
| 2xP30 (2048 ГБ)   | ReFS, 64 КБ      | SQL (все файлы<sup>3</sup>) | 2800                 | 3984             |

1. Диски чередуются с помощью дисковых пространств.
2. Это значение взято из раздела [Примеры конфигурации дисков](../plan-design/configs/site-size-performance-guidelines.md#example-disk-configurations). Размер виртуальной машины ограничивает производительность.
3. [Руководство по Azure](/azure/virtual-machines/windows/sql/virtual-machines-windows-sql-performance#disks-guidance) позволяет размещать базу данных TempDB на локальном диске SSD *D:* при условии, что он не будет превышать доступное пространство и обеспечит дополнительное распределение дискового ввода-вывода.

Если вам требуется больший уровень производительности в будущем, вы можете повысить уровень виртуальной машины до DS14v2, удвоив ресурсы ЦП и памяти. Дополнительная дисковая пропускная способность, которую обеспечивает такой размер виртуальной машины, также мгновенно повышает число доступных операций ввода-вывода в секунду на ранее настроенных дисках.

**DS14v2**

| Диски<sup>1</sup> | RAID | Формат | Содержит | Необходимый минимум операций ввода-вывода за секунду| Приблизительное число обеспеченных операций ввода-вывода за секунду<sup>2</sup>  |
|------------------|---------------|--------------------|----------------------|------------------|
| &lt;standard&gt; | -             | ОС сервера сайта     | -                    | -                |
| 2xP20 (1024 ГБ)   | NTFS, 8 КБ       | ConfigMgr, папки "Входящие"  | 1200                 | 4639             |
| 2xP30 (2048 ГБ)   | ReFS, 64 КБ      | SQL (все файлы<sup>3</sup>) | 2800                 | 6182             |

1. Диски чередуются с помощью дисковых пространств.
2. Это значение взято из раздела [Примеры конфигурации дисков](../plan-design/configs/site-size-performance-guidelines.md#example-disk-configurations). Размер виртуальной машины ограничивает производительность.
3. [Руководство по Azure](/azure/virtual-machines/windows/sql/virtual-machines-windows-sql-performance#disks-guidance) позволяет размещать базу данных TempDB на локальном диске SSD *D:* при условии, что он не будет превышать доступное пространство и обеспечит дополнительное распределение дискового ввода-вывода.

## <a name="other-common-sql-server-related-performance-questions"></a>Другие распространенные вопросы производительности, связанные с SQL Server 

### <a name="is-it-better-to-run-with-sql-colocated-with-the-site-server-or-run-it-on-a-remote-server"></a>Что лучше: работать с SQL, размещаемым рядом с сервером сайта, или запустить его на удаленном сервере?

Оба варианта способны работать должным образом при условии, что соответствующим образом изменяется размер одиночного сервера и обеспечивается достаточная пропускная способность сетевого подключения между двумя серверами.

Удаленный сервер SQL требует начальных и операционных затрат на дополнительный сервер, но это обычно для большинства крупных клиентов. Преимущества этой конфигурации:

- Варианты повышения доступности сайта, такие как SQL Always On
- Возможность запуска больших отчетов с сокращением нагрузки на работу сайта
- Проще аварийное восстановление в некоторых ситуациях
- Проще управление безопасностью
- Разделение ролей для управления SQL, например отдельная группа администраторов баз данных

При совместном размещении SQL требуется один сервер, что типично для самых небольших клиентов. Преимущества этой конфигурации:

- Меньше затраты на компьютеры, лицензии и обслуживание
- Меньше точек сбоя на сайте
- Лучше контролируемость планового времени простоя

### <a name="how-much-ram-should-i-allocate-for-sql"></a>Какой объем оперативной памяти необходимо выделить для SQL?

По умолчанию SQL использует всю доступную память на сервере, что потенциально создает неравномерное распределение ресурсов с операционной системой и другими процессами на компьютере. Чтобы избежать возможных проблем с производительностью, важно явным образом выделять память для SQL. На серверах сайта, размещаемых рядом с серверами SQL Server, убедитесь, что операционной системе хватает достаточно памяти для кэширования файлов и других операций. Убедитесь, что для SMSExec и других процессов Configuration Manager остается достаточно памяти. При запуске SQL на удаленном сервере вы можете выделить *большую часть* памяти для SQL, но не всю. Начальные советы см. в разделе [Рекомендации по размеру](../plan-design/configs/site-size-performance-guidelines.md#general-sizing-guidelines). 

Распределение памяти SQL Server должно округляться до целого числа в гигабайтах. Кроме того, по мере перехода к большим объемам памяти вы можете отвести для SQL более высокий процент. Например, если доступно 256 ГБ ОЗУ или больше, можно настроить для SQL до 95 %, по-прежнему отводя достаточно памяти для операционной системы. Мониторинг файла подкачки — хороший способ убедиться, что достаточно памяти для операционной системы и всех процессов Configuration Manager.

### <a name="cores-are-cheap-these-days-should-i-just-add-a-bunch-of-them-to-my-sql-server"></a>Ядра сейчас обходятся дешево. Следует ли просто добавить несколько ядер к серверу SQL?

Вы можете столкнуться с конфликтным доступом к памяти при наличии более чем 16 физических ядер и нехватке оперативной памяти на сервере SQL. Рабочая нагрузка Configuration Manager работает лучше, когда для SQL доступно по крайней мере 3–4 ГБ оперативной памяти на каждое ядро. При добавлении ядер для серверов SQL следует пропорционально увеличить объем ОЗУ.

### <a name="will-sql-always-on-impact-my-performance"></a>SQL Always On повлияет на производительность?

В общем случае SQL Always On имеет незначительное влияние на производительность системы при достаточной пропускной способности сети между серверами-репликами SQL. Возможен быстрый рост *LDF*-файла журнала базы данных в среде SQL Always On с высокой нагрузкой. Тем не менее после успешного создания резервной копии базы данных место в файле журнала автоматически освобождается. Добавьте задание SQL для базы данных Configuration Manager для резервного копирования, например каждые 24 часа, и резервного копирования *LDF*-файла каждые шесть часов. Дополнительные сведения об SQL Always On и Configuration Manager, включая подробности о стратегиях резервного копирования SQL, см. в разделе [SQL Server AlwaysOn для высокодоступной базы данных сайта](../servers/deploy/configure/sql-server-alwayson-for-a-highly-available-site-database.md).

### <a name="should-i-enable-sql-compression-on-my-database"></a>Следует ли включить сжатие SQL в базе данных?

Сжатие SQL не рекомендуется для базы данных Configuration Manager. При этом не будет функциональных проблем, но включение сжатия для базы данных Configuration Manager не показывает в результатах теста увеличение экономии по сравнению с потенциальным воздействием на производительность в системе.

### <a name="should-i-enable-sql-encryption-on-my-database"></a>Следует ли включить шифрование SQL в базе данных?

Все секреты в базе данных Configuration Manager уже используют безопасное хранение, но добавление шифрования SQL позволяет добавить еще один уровень безопасности. Функциональные проблемы с включением шифрования в базе данных отсутствуют, но может возникнуть снижение производительности на 25 % в зависимости от таблицы, которую вы решили шифровать, и используемой версии SQL. Таким образом, шифрование следует использовать с осторожностью, особенно в крупномасштабных средах. Также не забудьте обновить планы резервного копирования и восстановления, чтобы убедиться, что вы сможете успешно восстановить зашифрованные данные.

### <a name="what-version-of-sql-should-i-run"></a>Какую версию SQL следует использовать?

Поддерживаемые версии SQL см. в разделе [Поддержка версий SQL Server](../plan-design/configs/support-for-sql-server-versions.md). С точки зрения производительности все поддерживаемые версии SQL соответствуют критериям производительности. Тем не менее SQL 2012 и SQL 2016 или более поздние версии обычно более эффективны, чем SQL 2014, с некоторыми аспектами рабочей нагрузки Configuration Manager. Кроме того, использование SQL 2014 с уровнем совместимости SQL 2012 (110) повышает производительность в целом. Во время установки базы данных Configuration Manager на SQL 2012 и SQL 2014 переводятся до уровня совместимости 110. В SQL 2016 или более поздних версиях задается уровень совместимости по умолчанию для этой версии SQL, например 130 для SQL 2016. Обновление SQL на месте не обновляет уровни совместимости, пока вы не установите следующую основную версию Current Branch для Configuration Manager. 

Если вы наблюдаете необычные тайм-ауты или медленную работу определенных запросов SQL в SQL 2016 или более поздних версиях, например при использовании RBAC в консоли администрирования, попробуйте изменить уровень совместимости SQL в базе данных Configuration Manager на 110. Запуск с уровнем совместимости 110 полностью поддерживается в SQL 2014 и более новых версиях SQL. Дополнительные сведения см. в разделе [У запросов SQL истекает время ожидания, или медленно работает консоль при определенных запросах к базе данных Configuration Manager](https://support.microsoft.com/help/3196320/sql-query-times-out-or-console-slow-on-certain-configuration-manager-d).

Начиная с января 2018 г. следует *избегать* следующих версий SQL из-за различных известных проблем производительности или других потенциальных проблем:

- SQL 2012 SP3 (CU1–CU5)
- SQL 2014 (SP1 CU6 – SP 2 CU2)
- SQL 2016 (RTM–CU3, SP1 CU3 — CU5)

### <a name="should-i-implement-any-additional-sql-indexing-tasks"></a>Следует ли реализовать какие-либо дополнительные задачи индексирования SQL?

Да, обновляйте индексы раз в неделю, статистику — раз в день для повышения производительности SQL. Сторонние скрипты, а также дополнительные сведения от сообщества Configuration Manager и SQL могут способствовать оптимизации этих задач.

На больших сайтах некоторые таблицы SQL, такие как CI\_CurrentComplianceStatusDetails, HinvChangeLog, могут иметь значительный размер в зависимости от ваших шаблонов использования. Может потребоваться поочередно уменьшить их или изменить подход к их обслуживанию.

### <a name="when-should-i-use-full-sql-server-instead-of-sql-express-on-my-secondary-sites"></a>Когда следует использовать полную версию SQL Server вместо SQL Express на моих вторичных сайтах?

SQL Express не оказывает особого влияния на производительность вторичных сайтов и вполне подходит для большинства клиентов. Его легко развертывать, им легко управлять, и он является рекомендуемой конфигурацией для почти всех клиентов в любом масштабе.

Есть одна ситуация, где может потребоваться полная установка SQL Server. Если у вас есть большое количество точек распространения и пакетов или источников в вашей среде, возможно превышение предельного размера в 10 ГБ в SQL Express. Если количество пакетов, умноженное на количество точек распространения, превышает 4 000 000, например 2000 точек и 2000 элементов содержимого, используйте полную версию SQL Server на вторичных сайтах. 

### <a name="should-i-change-maxdop-settings-on-my-database"></a>Следует ли изменить параметры MaxDOP моей базы данных?

Задание параметра равным 0 (использовать все доступные процессоры) является оптимальным выбором для общей производительности в большинстве случаев обработки.

Многие администраторы Configuration Manager следуют указаниям на сайте [Рекомендации и инструкции по использованию параметра конфигурации "max degree of parallelism" в SQL Server](https://support.microsoft.com/help/2806535/recommendations-and-guidelines-for-the-max-degree-of-parallelism-confi). На большей части современного крупного оборудования это руководство дает максимальное значение, равное восьми. Тем не менее, если выполняется много небольших запросов, по сравнению с числом процессоров, может быть полезно установить более высокое значение. Ограничение до восьми не обязательно будет оптимальной настройкой для больших сайтов, если доступно больше ядер. 

На серверах SQL Server более чем с восемью ядрами ЦП задайте параметр равным 0 и вносите изменения только при возникновении проблем с производительностью или чрезмерными темпами блокировки. Если вам нужно изменить MaxDOP, поскольку возникают проблемы с производительностью при значении 0, задайте новое значение не меньше минимального рекомендуемого числа ядер для сервера SQL этого сайта. Более низкое значение почти обязательно приведет к снижению производительности. Например, удаленный экземпляр сервер SQL для сайта с 100 000 клиентов требует по меньшей мере 12 ядер. Если сервер SQL имеет 16 ядер, начать тестирование можно с параметра MaxDOP со значением 12.

## <a name="other-common-performance-related-questions"></a>Другие распространенные вопросы, связанные с производительностью

### <a name="which-folders-on-the-site-server-or-other-roles-should-i-exclude-for-antivirus-software"></a>Какие папки на сервере сайта (или других ролях) следует исключить из проверок антивирусного программного обеспечения?

Будьте внимательны при отключении защиты от вирусов в любой системе. В больших объемах и безопасных средах мы рекомендуем отключить *Активный мониторинг* для достижения оптимальной производительности.

Дополнительные сведения о рекомендуемых исключениях антивирусной программы см. в разделе [Рекомендуемые исключения антивирусного ПО для Configuration Manager 2012 и серверов филиалов, систем сайта и клиентов Current Branch](https://support.microsoft.com/help/327453/recommended-antivirus-exclusions-for-configuration-manager-2012-and-cu).

### <a name="what-can-i-do-to-make-wsus-perform-better-when-its-used-with-configuration-manager"></a>Что можно сделать, чтобы службы WSUS работали лучше, если они используются с Configuration Manager?

Изменение нескольких ключевых параметров IIS, таких как ограничение на длину очереди WsusPool и предельное значение выделенной памяти, повышает производительность WSUS даже в небольшой организации. Дополнительные сведения см. в разделе [Рекомендуемое оборудование](../plan-design/configs/recommended-hardware.md).

Также убедитесь, что установлены последние обновления для операционной системы, в которой работают службы WSUS:

- Windows Server 2012: любое накопительное обновление, не являющееся обновлением для системы безопасности, выпущенное в октябре 2017 года или позже. ([KB4041690](https://support.microsoft.com/help/4041690/windows-server-2012-update-kb4041690))
- Windows Server 2012 R2: любое накопительное обновление, не являющееся обновлением для системы безопасности, выпущенное в августе 2017 года или позже. ([KB4039871](https://support.microsoft.com/help/4039871/windows-8-1-windows-server-2012-r2-update-kb4039871))
- Windows Server 2016: любое накопительное обновление, не являющееся обновлением для системы безопасности, выпущенное в августе 2017 года или позже. ([KB4039396](https://support.microsoft.com/help/4039396/windows-10-update-kb4039396))

### <a name="what-type-of-maintenance-should-i-run-on-my-wsus-servers"></a>Какой тип обслуживания следует использовать на серверах WSUS?

См. [Полное руководство по обслуживанию Microsoft WSUS и точек обновления ПО Configuration Manager](https://support.microsoft.com/help/4490644/complete-guide-to-microsoft-wsus-and-configuration-manager-sup-maint).

### <a name="i-want-to-set-up-basic-performance-monitoring-for-my-site-what-should-i-watch"></a>Я хочу установить мониторинг базовых показателей производительности для моего сайта. Что следует делать?

Традиционный мониторинг производительности сервера работает эффективно для Configuration Manager в целом. Можно также использовать различные пакеты управления System Center Operations Manager для Configuration Manager, SQL Server и Windows Server для мониторинга основных показателей работоспособности серверов. Можно также непосредственно отслеживать счетчики системного монитора Windows (PerfMon), которые предоставляет Configuration Manager. Мониторинг задержек в различных папках "Входящие" можно использовать для раннего выявления признаков потенциальных проблем с производительностью сайта или невыполненных работ.

## <a name="see-also"></a>См. также

- [Рекомендации по размеру и производительности сайта](../plan-design/configs/site-size-performance-guidelines.md)
- [Вопросы и ответы по использованию Configuration Manager в Azure](configuration-manager-on-azure.md)
