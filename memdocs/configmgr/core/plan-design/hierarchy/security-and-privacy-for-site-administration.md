---
title: Безопасность и конфиденциальность администрирования сайтов
titleSuffix: Configuration Manager
description: Оптимизация безопасности и конфиденциальности администрирования сайтов в Configuration Manager
ms.date: 04/27/2020
ms.prod: configuration-manager
ms.technology: configmgr-core
ms.topic: conceptual
ms.assetid: 1d58176e-abc0-4087-8583-ce70deb4dcf5
author: aczechowski
ms.author: aaroncz
manager: dougeby
ms.openlocfilehash: 923018e35fae1ec1f5e9c0869ef22d43b5de552b
ms.sourcegitcommit: 53bab52e42de28b87e53596646a3532e25eb9c14
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/28/2020
ms.locfileid: "82182265"
---
# <a name="security-and-privacy-for-site-administration-in-configuration-manager"></a>Безопасность и конфиденциальность администрирования сайтов в Configuration Manager

*Область применения: Configuration Manager (Current Branch)*

В этой статье содержатся сведения об обеспечении безопасности и конфиденциальности для сайтов и иерархии Configuration Manager.

## <a name="security-guidance-for-site-administration"></a><a name="BKMK_Security_Sites"></a> Руководство по обеспечению безопасности для администрирования сайтов

Приведенные ниже рекомендации помогут защитить сайты и иерархию Configuration Manager.  

### <a name="run-setup-from-a-trusted-source-and-secure-communication"></a>Запускайте программу установки из надежного источника и защищайте канал связи

Чтобы предотвратить несанкционированное изменение исходных файлов, запускайте программу установки Configuration Manager из надежного источника. Если файлы хранятся в сети, защитите сетевую папку.  

Чтобы при запуске программы установки из сетевого расположения предотвратить несанкционированное изменение исходных файлов, передаваемых по сети, воспользуйтесь протоколом IPsec или подписыванием SMB для защиты канала между исходным расположением программы установки и сервером сайта.  

При использовании загрузчика программы установки для загрузки файлов, необходимых для программы установки, следует защитить расположение, в котором хранятся эти файлы. Кроме того, во время запуска программы установки нужно обеспечить безопасность канала связи с этим расположением.  

### <a name="extend-the-active-directory-schema-and-publish-sites-to-the-domain"></a>Расширяйте схему Active Directory и публикуйте сайты в домен  

Расширения схем не требуются для работы Configuration Manager, однако они позволяют создать более безопасную среду. Клиенты и серверы сайта могут получать данные из надежного источника.  

Если клиенты находятся в домене, не являющемся доверенным, разверните следующие роли в домене клиента.  

- Точка управления  

- Точка распространения  

> [!NOTE]  
> Для доверенного домена Configuration Manager требуется проверка подлинности Kerberos. Если клиенты находятся в другом лесу, не имеющем двустороннего доверия с лесом сервера сайта, считается, что эти клиенты находятся в домене без доверия. Для этой цели внешнего доверия недостаточно.  

### <a name="use-ipsec-to-secure-communications"></a>Используйте протокол IPSec для защиты взаимодействий

Несмотря на то что Configuration Manager защищает взаимодействие между сервером сайта и компьютером с SQL Server, Configuration Manager не обеспечивает безопасность взаимодействий между ролями системы сайта и SQL Server. Настроить использование протокола HTTPS для внутрисайтовой передачи данных можно только для некоторых систем сайта.  

Если для защиты каналов обмена данными между серверами не используются дополнительные методы, злоумышленники могут направлять на системы сайтов различные атаки, например подделку пакетов или атаки типа "злоумышленник в середине". Если использовать протокол IPsec невозможно, замените его подписыванием SMB.  

> [!Important]  
> Обеспечьте защиту соединения между сервером сайта и сервером источника пакета. В этом случае используетсяя SMB. Если для защиты этого взаимодействия использовать протокол IPsec невозможно, замените его подписыванием SMB, чтобы исключить несанкционированное изменение файлов до их загрузки и использования клиентами.  

### <a name="dont-change-the-default-security-groups"></a>Не изменяйте группы безопасности по умолчанию

Не изменяйте следующие группы безопасности, создаваемые и управляемые Configuration Manager для взаимодействия систем сайта:

- **SMS_SiteSystemToSiteServerConnection_MP_&lt;Код_сайта\>**  

- **SMS_SiteSystemToSiteServerConnection_SMSProv_&lt;Код_сайта\>**  

- **SMS_SiteSystemToSiteServerConnection_Stat_&lt;Код_сайта\>**  

Configuration Manager автоматически создает эти группы безопасности и управляет ими. В частности, это поведение подразумевает также удаление учетных записей компьютера при удалении роли системы сайта.  

Чтобы обеспечить непрерывность обслуживания и сохранить минимальный набор привилегий, не изменяйте эти группы вручную.  

### <a name="manage-the-trusted-root-key-provisioning-process"></a>Управляйте процессом предоставления корневого ключа доверия

Если клиентам не удается запросить на сервере глобального каталога сведения о Configuration Manager, для проверки подлинности допустимых точек управления они должны использовать корневой ключ доверия. Корневой ключ доверия хранится в реестре клиента. Его можно задать с помощью групповой политики или путем настройки вручную.  

Если первое взаимодействие с точкой управления клиент осуществляет без копии корневого ключа доверия, он установит отношение доверия с первой точкой управления, к которой подключится. Чтобы сократить риск преднамеренного неправильного направления клиентов к неавторизованной точке управления, клиентам можно заранее предоставить доверенный корневой ключ. Дополнительные сведения см. в разделе [Планирование доверенного корневого ключа](../security/plan-for-security.md#BKMK_PlanningForRTK).  

### <a name="use-non-default-port-numbers"></a>Используйте номера портов, отличные от заданных по умолчанию

Использование номеров портов, отличных от заданных по умолчанию, позволяет повысить уровень безопасности. Благодаря им злоумышленники будут испытывать трудности при анализе среды в ходе подготовки к атаке. Если вы собираетесь использовать порты не по умолчанию, спланируйте их до установки Configuration Manager. Используйте их последовательно на всех сайтах иерархии. Примерами ситуаций использования номеров портов, отличных от заданных по умолчанию, являются порты запросов клиентов и пробуждение по локальной сети.  

### <a name="use-role-separation-on-site-systems"></a>Используйте разделение ролей в системах сайта

Несмотря на то, что все роли систем сайта можно установить на одном компьютере, этот принцип редко используется в рабочих сетях, так как в результате формируется единая точка отказа.  

### <a name="reduce-the-attack-profile"></a>Сократите поверхность для атак

Изоляция каждой роли системы сайта на разных серверах позволит уменьшить вероятность действия атаки, направленной на одну систему сайта, против другой системы сайта. Для многих ролей требуется установка служб IIS в системе сайта, что повышает уязвимость к атакам. Если в целях снижения расходов на оборудование необходимо использовать сочетание ролей, объединяйте роли IIS только с теми ролями, для которых требуются службы IIS.  

> [!IMPORTANT]  
> Исключением является роль резервной точки состояния. Так как эта роль системы сайта принимает не прошедшие проверку подлинности данные от клиентов, не назначайте резервную точку состояния никакой другой роли системы сайта Configuration Manager.  

### <a name="configure-static-ip-addresses-for-site-systems"></a>Настройте статические IP-адреса для систем сайта

Статические IP-адреса легче защитить от атак, направленных на разрешение имен.  

Статические IP-адреса также упрощают настройку протокола IPsec. Протокол IPsec рекомендуется использовать для защиты взаимодействия между системами сайта в Configuration Manager.  

### <a name="dont-install-other-applications-on-site-system-servers"></a>Не устанавливайте другие приложения на серверах систем сайта

Установка других приложений на серверах системы сайта повышает вероятность угроз безопасности для Configuration Manager и появление проблем, связанных с несовместимостью.  

### <a name="require-signing-and-enable-encryption-as-a-site-option"></a>Требуйте подписывания и включите шифрование в качестве параметра узла

Включите параметры подписывания и шифрования для сайта. Убедитесь, что все клиенты поддерживают алгоритм шифрования SHA-256, а затем включите параметр **Требовать алгоритм SHA-256**.  

### <a name="restrict-and-monitor-administrative-users"></a>Ограничьте и отслеживайте действия пользователей с правами администратора

Предоставьте административный доступ к Configuration Manager только надежным пользователям. Предоставьте им минимальные разрешения с помощью встроенных ролей безопасности или путем настройки ролей безопасности. Пользователи, которые могут создавать, изменять и развертывать программное обеспечение и конфигурации, также могут управлять устройствами в иерархии Configuration Manager.  

Регулярно проверяйте назначения пользователей и их уровень авторизации на предмет внесения необходимых изменений.  

Дополнительные сведения см. в разделе [Настройка ролевого администрирования](../../servers/deploy/configure/configure-role-based-administration.md).  

### <a name="secure-configuration-manager-backups"></a>Защитите резервные копии Configuration Manager

Во время резервного копирования Configuration Manager создается резервная копия, включающая сертификаты и другие важные данные, которыми злоумышленник может воспользоваться для подмены законного пользователя.  

При передаче этих данных по сети используйте подписывание SMB или протокол IPsec, а также защитите папку резервной копии.  

### <a name="secure-locations-for-exported-objects"></a>Обеспечьте безопасность расположения для экспортированных объектов

При экспорте или импорте объектов из консоли Configuration Manager в сетевую папку обеспечьте безопасность этой папки и сетевого канала.

Ограничьте доступ пользователей к сетевой папке.  

Чтобы предотвратить незаконное изменение экспортируемых данных, используйте подписывание SMB или протокол IPsec при обмене данными между сетевым расположением и сервером сайта. Кроме того, обеспечьте безопасность обмена данными между компьютером, на котором запущена консоль Configuration Manager, и сервером сайта. Используйте протокол IPsec для шифрования данных в сети, чтобы избежать раскрытия информации.  

### <a name="manually-remove-certificates-from-failed-servers"></a>Вручную удалите сертификаты с неработающих серверов

Если не удается удалить систему сайта или она прекращает работу без возможности дальнейшего восстановления, вручную удалите сертификаты Configuration Manager этого сервера с других серверов Configuration Manager.

Чтобы удалить доверие одноранговой группы, которое было изначально установлено с системой сайта и ролями системы сайта, вручную удалите сертификаты неработающего сервера Configuration Manager из хранилища сертификатов **Доверенные лица** на других серверах системы сайта. Это важно, если повторное использование сервера выполняется без его переформатирования.  

Дополнительные сведения см. в разделе [Элементы управления шифрования для обмена данными с сервером](../security/cryptographic-controls-technical-reference.md#cryptographic-controls-for-server-communication).  

### <a name="dont-configure-internet-based-site-systems-to-bridge-the-perimeter-network"></a>Не настраивайте системы сайта управления интернет-клиентами для соединения сети периметра

Не настраивайте серверы систем сайта в качестве многосетевых для подключения к сети периметра и интрасети. Несмотря на то что эта конфигурация позволяет системам сайта управления интернет-клиентами принимать подключения клиентов из Интернета и интрасети, она также аннулирует границу безопасности между сетью периметра и интрасетью.  

### <a name="configure-the-site-server-to-initiate-connections-to-perimeter-networks"></a>Настройте сервер сайта для инициации подключений к сети периметра

Если система сайта находится в сети без доверия (например, в сети периметра), настройте сервер сайта для инициации подключений к системе сайта.

По умолчанию системы сайта инициируют подключения к серверу сайта для передачи данных. При установке подключения из ненадежной сети к надежной сети может возникнуть риск безопасности. Если системы сайта принимают подключения из Интернета или находятся в лесу без доверия, выберите параметр системы сайта **Сервер сайта должен инициировать подключения к этой системе сайта**. После установки системы сайта и любых ролей все подключения инициируются сервером сайта из надежной сети.  

### <a name="use-ssl-bridging-and-termination-with-authentication"></a>Используйте мостовое соединение SSL и завершение запросов с проверкой подлинности

При использовании прокси-серверов в Интернете для управления клиентами через Интернет рекомендуется использовать мостовое соединение SSL-SSL, где применяется завершение запросов SSL с проверкой подлинности.

При настройке завершения запросов SSL на прокси-сервере в Интернете пакеты из Интернета проходят проверку до перенаправления в интрасеть. Прокси-сервер в Интернете проверяет подлинность подключения от клиента, закрывает его, а затем открывает новое проверенное подключение к системам сайта управления интернет-клиентами.  

Если для подключения к системам сайта управления интернет-клиентами клиентские компьютеры Configuration Manager используют прокси-сервер в Интернете, удостоверение клиента (идентификатор GUID) безопасно хранится в полезных данных пакета. Поэтому точка управления не принимает прокси-сервер в Интернете за клиент.

Если прокси-сервер в Интернете не поддерживает требования к мостовому соединению SSL, можно использовать туннелирование SSL. Это менее безопасный вариант. Пакеты SSL из Интернета перенаправляются в системы сайта без завершения запросов. Поэтому они не могут быть проверены на наличие вредоносного содержимого.  

> [!WARNING]  
> Мобильные устройства, зарегистрированные в Configuration Manager, не поддерживают мостовое соединение SSL. Для них действует только туннелирование SSL.  

### <a name="configurations-to-use-if-you-configure-the-site-to-wake-up-computers-to-install-software"></a>При настройке сайта для пробуждения компьютеров для установки программного обеспечения используются следующие конфигурации

- При использовании стандартных wake-up пакетов откажитесь от широковещательных рассылок, направленных на подсеть, и замените их одноадресными рассылками.  

- Если необходимо использовать широковещательные рассылки, направленные на подсеть, настройте маршрутизаторы для передачи широковещательных IP-пакетов только от сервера сайта и только с использованием номера порта, отличного от заданного по умолчанию.  

Дополнительные сведения о различных технологиях пробуждения по локальной сети см. в статье [Планирование пробуждения клиентов в System Center Configuration Manager](../../clients/deploy/plan/plan-wake-up-clients.md).

### <a name="if-you-use-email-notification-configure-authenticated-access-to-the-smtp-mail-server"></a>Если в организации используются уведомления по электронной почте, настройте доступ к почтовому серверу SMTP с проверкой подлинности

По возможности используйте почтовый сервер, поддерживающий доступ с проверкой подлинности. Для проверки подлинности используйте учетную запись компьютера сервера сайта. Если для проверки подлинности необходимо указать учетную запись пользователя, используйте учетную запись с минимальным набором привилегий. 

### <a name="enforce-ldap-channel-binding-and-ldap-signing"></a>Принудительное применение привязки канала LDAP и подписывания LDAP

Безопасность контроллеров домена Active Directory можно улучшить, настроив сервер для отклонения привязок LDAP простой проверки подлинности и шифрования по уровню безопасности (SASL), которые не запрашивают подписывание, или для отклонения простых привязок LDAP, которые выполняются в соединении с открытым текстом. Начиная с версии 1910, Configuration Manager поддерживает принудительное применение привязки канала LDAP и подписывания LDAP. Дополнительные сведения см. в статье [Требование по привязке канала LDAP и подписыванию LDAP для Windows в 2020 г](https://support.microsoft.com/help/4520412/2020-ldap-channel-binding-and-ldap-signing-requirements-for-windows). <!--6244453-->


## <a name="security-guidance-for-the-site-server"></a><a name="BKMK_Security_SiteServer"></a> Рекомендации по обеспечению безопасности для сервера сайта

Приведенные ниже рекомендации помогут защитить сервер сайта Configuration Manager.  

### <a name="install-configuration-manager-on-a-member-server-instead-of-a-domain-controller"></a>Устанавливайте Configuration Manager на рядовом сервере, а не на контроллере домена

Сервер сайта и системы сайта Configuration Manager не требуется устанавливать на контроллере домена. На контроллерах домена нет никакой другой локальной базы данных SAM, кроме базы данных домена. При установке Configuration Manager на рядовом сервере учетные записи Configuration Manager можно сохранить в локальной базе данных SAM, а не в базе данных домена.  

Такая практика позволяет также уменьшить площадь атаки на контроллеры доменов.  

### <a name="install-secondary-sites-without-copying-the-files-over-the-network"></a>Установите вторичные сайты, чтобы избежать копирования файлов по сети

При выполнении установки с созданием вторичного сайта не выбирайте вариант, при котором файлы копируются с родительского сайта на вторичный. Кроме того, не используйте источник, расположенный в сети. Когда файлы копируются через сеть, квалифицированный злоумышленник может перехватить установочный пакет вторичного сайта и незаконно изменить файлы до их установки. Правильно выбрать время для такой атаки будет трудно. Опасность данной атаки можно снизить, используя протоколы IPsec или SMB при передаче файлов.  

Вместо копирования по сети скопируйте исходные файлы на сервере вторичного сайта из папки носителя в локальную папку. Затем после запуска программы установки для создания вторичного сайта на странице **Исходные файлы установки** выберите **Использовать исходные файлы в следующей папке на компьютере вторичного сайта (наиболее безопасный вариант)** и укажите эту папку.  

Дополнительные сведения см. в разделе [Установка вторичного сайта](../../servers/deploy/install/use-the-setup-wizard-to-install-sites.md#bkmk_secondary).

### <a name="site-role-installation-inherits-permissions-from-drive-root"></a>Установка роли сайта наследует разрешения от корня диска

<!-- SCCMDocs#1380 -->
Перед установкой первой роли системы сайта на любой сервер обязательно правильно настройте разрешения системного диска. Например, `C:\SMS_CCM` наследует разрешения от `C:\`. Если корень диска не будет защищен должным образом, пользователи с ограниченными правами смогут получить доступ к содержимому в папке Configuration Manager или изменить его.


## <a name="security-guidance-for-sql-server"></a><a name="BKMK_Security_SQLServer"></a> Рекомендации по обеспечению безопасности для SQL Server

Configuration Manager использует SQL Server в качестве серверной базы данных. Если база данных будет скомпрометирована, злоумышленники смогут обходить Configuration Manager. Они смогут инициировать атаки через Configuration Manager, если будут напрямую обращаться к SQL Server. Атаки на SQL Server следует считать несущими высокий риск и с соответствующей серьезностью относиться к их предупреждению.  

Приведенные ниже рекомендации по обеспечению безопасности помогут защитить сервер SQL Server в контексте Configuration Manager.  

### <a name="dont-use-the-configuration-manager-site-database-server-to-run-other-sql-server-applications"></a>Не используйте сервер базы данных сайта Configuration Manager для выполнения других приложений SQL Server

Чем шире доступ к серверу базы данных сайта Configuration Manager, тем выше риск для данных Configuration Manager. Если база данных сайта Configuration Manager будет скомпрометирована, под угрозу будут поставлены другие приложения на том же компьютере SQL Server.  

### <a name="configure-sql-server-to-use-windows-authentication"></a>Настройте SQL Server для использования проверки подлинности Windows

Хотя Configuration Manager обращается к базе данных сайта с использованием учетной записи Windows и проверки подлинности Windows, по-прежнему сохраняется возможность настройки SQL Server для использования смешанного режима. В смешанном режиме SQL Server разрешаются дополнительные сеансы входа SQL Server для доступа к базе данных. Эта конфигурация не является необходимой и увеличивает площадь атаки.  

### <a name="update-sql-server-express-at-secondary-sites"></a>Выполняйте обновление SQL Server Express на вторичных сайтах

Когда устанавливается первичный сайт, Configuration Manager загружает SQL Server Express из Центра загрузки Майкрософт, а затем копирует файлы на сервер первичного сайта. При установке вторичного сайта, если пользователь выбрал вариант с установкой SQL Server Express, Configuration Manager устанавливает ранее скачанную версию и не проверяет наличие новых версий. Чтобы обеспечить наличие последних версий программного обеспечения на вторичном сайте, действуйте одним из перечисленных ниже способов.  

- После установки вторичного сайта запустите обновление Windows на сервере вторичного сайта.  

- Прежде чем устанавливать вторичный сайт, вручную установите SQL Server Express на сервере вторичного сайта. Убедитесь, что устанавливаете последнюю версию со всеми вышедшими обновлениями программного обеспечения. После этого установите вторичный сайт и выберите вариант с использованием существующего экземпляра SQL Server.  

Периодически запускайте обновление Windows для всех установленных версий SQL Server. Таким образом на них всегда будут установлены последние обновления программного обеспечения.  

### <a name="follow-general-guidance-for-sql-server"></a>Соблюдайте общие рекомендации по использованию SQL Server

Узнайте, каковы общие рекомендации по использованию вашей версии SQL Server, и следуйте им. При этом учитывайте приведенные ниже требования для Configuration Manager.  

- Учетная запись компьютера сервера сайта должна входить в группу "Администраторы" на компьютере, на котором работает SQL Server. Если вы используете рекомендацию о явной подготовке к работе субъектов администраторов для SQL Server, то учетная запись, от имени которой запускается программа установки на сервере сайта, должна входить в группу "Пользователи SQL".  

- Если SQL Server устанавливается с использованием учетной записи пользователя домена, убедитесь, что для компьютера сервера сайта указано имя субъекта-службы (SPN), опубликованное в доменных службах Active Directory. Без SPN не пройдет проверка подлинности Kerberos, и установка Configuration Manager завершится неудачно.  


## <a name="security-guidance-for-site-systems-that-run-iis"></a><a name="BKMK_Security_IIS"></a> Рекомендации по обеспечению безопасности для систем сайта с запущенными службами IIS

Для некоторых ролей систем сайта в Configuration Manager требуются службы IIS. Защита служб IIS обеспечит корректную работу Configuration Manager и снизит риск атак на систему безопасности. Сведите к практически целесообразному минимуму количество серверов, требующих наличия служб IIS. Например, используйте не больше точек управления, чем требуется для поддержки клиентской базы, учитывая требования высокой доступности и сетевой изоляции для управления клиентами через Интернет.  

Приведенные ниже рекомендации по обеспечению безопасности помогут защитить системы сайта, использующие службы IIS.  

### <a name="disable-iis-functions-that-you-dont-require"></a>Отключите ненужные функции служб IIS

Устанавливайте лишь минимально необходимое количество компонентов служб IIS для устанавливаемой роли системы сайта. Дополнительные сведения см. в разделе [Необходимые компоненты для сайта и системы сайта](../configs/site-and-site-system-prerequisites.md).  

### <a name="configure-the-site-system-roles-to-require-https"></a>Настройте роли системы сайта для обязательного использования протокола HTTPS

Когда клиенты подключаются к системе сайта по протоколу HTTP, а не HTTPS, они проходят проверку подлинности Windows. Такое поведение предполагает использование протокола NTLM вместо Kerberos. Когда используется проверка подлинности NTLM, существует опасность подключения клиентов к незаконному серверу.  

Исключением из этой рекомендации могут быть точки распространения. Учетные записи доступа к пакетам не работают, если точка распространения настроена для использования протокола HTTPS. Учетные записи доступа к пакетам обеспечивают авторизацию для содержимого, позволяя указывать, какие пользователи будут иметь к нему доступ. Дополнительные сведения см. в разделе [Рекомендации по безопасности для управления содержимым](security-and-privacy-for-content-management.md#BKMK_Security_ContentManagement).  

### <a name="configure-a-certificate-trust-list-ctl-in-iis-for-site-system-roles"></a>Задайте список доверия сертификатов (CTL) в службах IIS для ролей системы сайта

Роли системы сайта  

- Точка распространения, настроенная для использования HTTPS.  

- Точка управления с включенной поддержкой мобильных устройств, настроенная для использования HTTPS.

Список доверия сертификатов — это определенный список доверенных корневых центров сертификации (ЦС). Список доверия сертификатов, используемый с групповой политикой в развернутой инфраструктуре первичных ключей, позволяет расширять перечень доверенных корневых центров сертификации, заданных для данной сети. Например, центров сертификации, которые автоматически устанавливаются с Microsoft Windows или добавляются через корневые ЦС предприятия Windows. Когда список доверия сертификатов задан в службах IIS, он определяет подмножество доверенных корневых центров сертификации.  

Это подмножество обеспечивает больший контроль над безопасностью. Список доверия сертификатов ограничивает круг принимаемых сертификатов клиента только теми, которые выданы перечисленными в списке центрами сертификации. Например, Windows поставляется с сертификатами ряда хорошо известных сторонних центров сертификации, таких как VeriSign и Thawte.

По умолчанию компьютер, на котором работают службы IIS, доверяет сертификатам, которые восходят по цепочке к этим хорошо известным центрам сертификации. Если в службах IIS не задан список доверия сертификатов для перечисленных ролей системы сайта, любое устройство с сертификатом клиента, выданным этими центрами сертификации, будет принято сайтом в качестве допустимого клиента. Если в службах IIS задан список доверия сертификатов, не включающий эти центры сертификации, сайт отказывает клиенту в подключении, если его сертификат восходит по цепочке к одному из этих центров. Чтобы клиенты Configuration Manager принимались перечисленными ролями системы сайта, необходимо задать в службах IIS список доверия сертификатов с указанием центров сертификации, используемых клиентами Configuration Manager.  

> [!NOTE]  
> Задавать список доверия сертификатов в службах IIS требуется только для перечисленных ролей системы сайта. Список издателей сертификатов, который Configuration Manager использует для точек управления, обеспечивает ту же функциональность для клиентских компьютеров, когда они подключаются к точкам управления, настроенным для использования протокола HTTPS.  

Дополнительные сведения о том, как задать список доверенных центров сертификации в IIS, см. в документации служб IIS.  

### <a name="dont-put-the-site-server-on-a-computer-with-iis"></a>Не размещайте сервер сайта на компьютере со службами IIS

Разделение ролей позволяет уменьшить профиль атаки и повысить способность к восстановлению. Учетная запись компьютера сервера сайта обычно имеет права администратора для всех ролей системы сайта. Кроме того, она может обладать и правами клиентов Configuration Manager, если используется принудительная установка клиента.  

### <a name="use-dedicated-iis-servers-for-configuration-manager"></a>Используйте выделенные серверы IIS для Configuration Manager

Хотя на серверах IIS, которые среди прочего используются системой Configuration Manager, можно размещать несколько веб-приложений, это может существенно увеличить площадь атаки. Неправильно настроенное приложение может позволить злоумышленнику получить контроль над системой сайта Configuration Manager. Это нарушение может позволить получить контроль и над всей иерархией.  

Если все же необходимо, чтобы на серверах системы сайта Configuration Manager работали другие веб-приложения, создайте специальный веб-сайт для систем сайта Configuration Manager.  

### <a name="use-a-custom-website"></a>Используйте настраиваемый веб-сайт

Для систем сайта, использующих службы IIS, настройте Configuration Manager для использования настраиваемого веб-сайта вместо веб-сайта по умолчанию. Если необходимо, чтобы на серверах системы сайта работали другие веб-приложения, обязательно должен использоваться настраиваемый веб-сайт. Этот параметр распространяется на весь сайт, а не на конкретную систему сайта.  

### <a name="when-you-use-custom-websites-remove-the-default-virtual-directories"></a>При использовании настраиваемых веб-сайтов удалите виртуальные каталоги по умолчанию

При переключении с веб-сайта по умолчанию на настраиваемый веб-сайт Configuration Manager не удаляет старые виртуальные каталоги. Удалите виртуальные каталоги, изначально созданные Configuration Manager для веб-сайта по умолчанию.  

Например, в случае точки распространения удалите следующие виртуальные каталоги:  

- SMS_DP_SMSPKG$  

- SMS_DP_SMSSIG$  

- NOCERT_SMS_DP_SMSPKG$  

- NOCERT_SMS_DP_SMSSIG$  

### <a name="follow-iis-server-security-guidance"></a>Соблюдайте рекомендации по обеспечению безопасности IIS Server

Узнайте, каковы общие рекомендации по использованию вашей версии IIS Server, и следуйте им. Учитывайте все требования Configuration Manager для конкретных ролей системы сайта. Дополнительные сведения см. в разделе [Необходимые компоненты для сайта и системы сайта](../configs/site-and-site-system-prerequisites.md).  


## <a name="security-guidance-for-the-management-point"></a><a name="BKMK_Security_ManagementPoint"></a> Рекомендации по обеспечению безопасности для точки управления

Точки управления — это основной интерфейс между устройствами и Configuration Manager. Атаки на точку управления и сервер, на котором она работает, следует считать несущими высокий риск и с соответствующей серьезностью относиться к их предупреждению. Реализуйте все надлежащие рекомендации по безопасности и отслеживайте любые необычные действия.  

Приведенные ниже рекомендации помогут защитить точку управления Configuration Manager.  

### <a name="assign-the-client-on-a-management-point-to-the-same-site"></a>Назначьте клиент в точке управления сайту этой точки

Избегайте ситуаций, когда клиент Configuration Manager, находящийся в точке управления, назначается другому сайту.  

При миграции из более ранней версии на текущую ветвь Configuration Manager перенесите клиент из точки управления на новый сайт как можно скорее.  


## <a name="security-guidance-for-the-fallback-status-point"></a><a name="BKMK_Security_FSP"></a> Рекомендации по обеспечению безопасности для резервной точки состояния

В случае установки резервной точки состояния в Configuration Manager воспользуйтесь приведенными ниже рекомендациями по обеспечению безопасности.

Дополнительные сведения о соображениях безопасности при установки резервной точки состояния см. в разделе [Определение необходимости резервной точки состояния](../../clients/deploy/plan/determine-the-site-system-roles-for-clients.md#fallback-status-point).  

### <a name="dont-run-any-other-roles-on-the-same-site-system"></a>Не допускайте выполнения других ролей в одной системе сайта

Резервная точка состояния рассчитана на прием входящих подключений от любого компьютера без проверки подлинности. Выполнение этой роли системы сайта на контроллере домена серьезно повышает риск для соответствующего сервера.  

### <a name="install-the-fallback-status-point-before-you-install-clients-with-pki-certificates"></a>Устанавливайте резервную точку состояния до установки клиентов, использующих PKI-сертификаты

Если системы сайта Configuration Manager не принимают от клиентов подключения по протоколу HTTP, пользователь может и не узнать, что клиенты остались без управления из-за проблем, связанных с PKI-сертификатами. Если клиентам назначена резервная точка состояния, она будет уведомлять о подобных проблемах.  

По соображениям безопасности резервную точку состояния нельзя назначить клиентам после их установки. Назначить эту роль можно только во время установки клиентов.  

### <a name="avoid-using-the-fallback-status-point-in-the-perimeter-network"></a>Старайтесь не использовать резервную точку состояния в сети периметра

Резервная точка состояния специально устроена так, чтобы принимать данные от любого клиента. Хотя резервная точка состояния в сети периметра могла бы помочь в устранении неполадок интернет-клиентов, соблюдайте баланс между этим преимуществом и риском для системы сайта, которая принимает данные без проверки подлинности в общедоступной сети.  

Если резервная точка состояния все-таки устанавливается в сети периметра или другой ненадежной сети, настройте сервер сайта для инициирования передачи данных. Не используйте параметры по умолчанию, позволяющие инициирование подключения к серверу сайта резервной точкой состояния.  


## <a name="security-issues-for-site-administration"></a><a name="BKMK_SecurityIssues_Clients"></a> Проблемы безопасности, связанные с администрированием сайтов

Ознакомьтесь с перечисленными ниже проблемами безопасности в Configuration Manager.  

- Configuration Manager не имеет защиты от авторизованного пользователя с правами администратора, использующего Configuration Manager для атаки на сеть. Неавторизованные пользователи представляют собой высокий риск с точки зрения безопасности. Они могут инициировать разнообразные атаки, в том числе:  

    - использовать развертывание программного обеспечения для автоматической установки и запуска вредоносного ПО на каждом клиентском компьютере Configuration Manager, имеющемся в организации;  

    - удаленно управлять клиентом Configuration Manager без разрешения со стороны клиента;  

    - задавать короткие интервалы опроса и чрезмерно большие перечни активов (это действие создает атаки типа "отказ в обслуживании" на клиенты и серверы);  

    - использовать один из сайтов в иерархии для записи данных Active Directory, относящихся к другому сайту.  

    Границей безопасности является иерархия сайтов. Сами сайты следует считать только границами управления.  

    Подвергайте аудиту все действия пользователей с правами администратора и регулярно просматривайте журналы аудита. Требуйте от всех пользователей Configuration Manager с правами администратора проходить проверку анкетных данных перед наймом. Требуйте выполнение периодической перепроверки как условие найма.  

- Если точка регистрации скомпрометирована, злоумышленник сможет получить сертификаты для проверки подлинности. Он может украсть учетные данные пользователей, регистрирующих свои мобильные устройства.  

    Точка регистрации соединяется с центром сертификации. Она может создавать, изменять и удалять объекты Active Directory. Никогда не следует устанавливать точку регистрации в сети периметра. Всегда отслеживайте необычную активность.  

- Если в политиках пользователей разрешено управление клиентами через Интернет, возникает повышенный риск успешного проведения атак.  

    Помимо использования PKI-сертификатов для соединений "клиент — сервер", в таких конфигурациях требуется проверка подлинности Windows. Это предполагает использование протокола NTLM вместо Kerberos. Проверка подлинности NTLM уязвима для атак олицетворения и воспроизведения. Чтобы пользователь из Интернета смог успешно проходить проверку подлинности, необходимо разрешить подключение из системы сайта в Интернете к контроллеру домена.  

- На серверах системы сайта требуется общий ресурс **Admin$** .  

    Сервер сайта Configuration Manager использует общий ресурс Admin$ для подключения к системам сайта и выполнения на них операций обслуживания. Не отключайте и не удаляйте этот общий ресурс.  

- Configuration Manager использует службы разрешения имен для подключения к другим компьютерам. Эти службы трудно защитить от следующих атак:
    - спуфинг;
    - незаконное изменение;
    - отказ;
    - раскрытие информации;
    - отказ в обслуживании;
    - повышение привилегий.

    Изучите и соблюдайте рекомендации по обеспечению безопасности для версий DNS, используемых для разрешения имен.  

## <a name="privacy-information-for-discovery"></a><a name="BKMK_Privacy_Cliients"></a> Сведения о соблюдении конфиденциальности обнаружения

Функция обнаружения создает записи о сетевых ресурсах и сохраняет их в базе данных Configuration Manager. Записи данных обнаружения содержат сведения о компьютерах, такие как IP-адреса, версии ОС и имена компьютеров. Методы обнаружения Active Directory также могут быть настроены на возвращение любых сведений, сохраняемых вашей организацией в доменных службах Active Directory.  

Единственный метод обнаружения, который Configuration Manager включает по умолчанию, — это Heartbeat-обнаружение. Этот метод позволяет обнаруживать только те компьютеры, на которых уже установлено клиентское программное обеспечение Configuration Manager.  

Обнаруженные сведения не отправляются непосредственно в корпорацию Майкрософт. Они хранятся в базе данных Configuration Manager. Configuration Manager хранит сведения в базе данных до тех пор, пока она не удалит данные. Этот процесс выполняется каждые 90 дней в рамках задачи обслуживания сайта **Удаление устаревших данных обнаружения**.  
