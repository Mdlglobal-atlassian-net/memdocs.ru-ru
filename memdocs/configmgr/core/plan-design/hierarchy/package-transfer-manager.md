---
title: Диспетчер передачи пакетов
titleSuffix: Configuration Manager
description: Сведения о диспетчере передачи пакетов в Configuration Manager, переносящем содержимое с сервера сайта в удаленные точки распространения.
ms.date: 02/8/2017
ms.prod: configuration-manager
ms.technology: configmgr-core
ms.topic: conceptual
ms.assetid: 3359f254-dd48-42b7-9eab-c92a3417e3fb
author: aczechowski
ms.author: aaroncz
manager: dougeby
ms.openlocfilehash: b450c45342793b89d41a2d96b8a7340939899093
ms.sourcegitcommit: bbf820c35414bf2cba356f30fe047c1a34c5384d
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/21/2020
ms.locfileid: "81706512"
---
# <a name="package-transfer-manager-in-configuration-manager"></a>Диспетчер передачи пакетов в Configuration Manager

*Область применения: Configuration Manager (Current Branch)*

На сайте Configuration Manager диспетчер передачи пакетов является компонентом SMS_Executive, который управляет передачей содержимого с компьютера сервера сайта на удаленные точки распространения в пределах сайта. (Точкой удаленного распространения называется точка, которая не размещается на компьютере сервера сайта.) Диспетчер передачи пакетов не поддерживает настройки, выполняемые администратором, однако понимание принципов его работы может помочь при планировании инфраструктуры управления содержимым. Оно также может помочь в устранении проблем с распространением содержимого.


При распространении содержимого в одну или несколько удаленных точек распространения в пределах сайта **диспетчер распространения** создает задание передачи содержимого. Затем он уведомляет диспетчер передачи пакетов на серверах первичного и вторичного сайтов о возможности передачи содержимого в удаленные точки распространения.

 Диспетчер передачи пакетов регистрирует свои действия в файле **pkgxfermgr.log** на сервере сайта. Этот файл журнала является единственным местом, где можно просмотреть действия диспетчера передачи пакетов.  

> [!NOTE]  
>  В предыдущих версиях Configuration Manager диспетчер распространения управляет передачей содержимого в удаленную точку распространения. Диспетчер распространения также управляет передачей содержимого между сайтами. В Configuration Manager диспетчер распространения продолжает управлять передачей содержимого между двумя сайтами. Однако диспетчер передачи пакетов теперь управляет передачей содержимого в большое количество точек распространения. Это позволяет повысить общую производительность развертывания содержимого как между сайтами, так и в точки распространения в пределах сайта.  

При передаче содержимого в стандартную точку распространения диспетчер передачи пакетов действует точно так же, как и диспетчер распространения в предыдущих версиях Configuration Manager. Иными словами, он активно управляет передачей файлов в каждую удаленную точку распространения. Однако при распространении содержимого в точку распространения по запросу диспетчер передачи пакетов уведомляет эту точку о доступности содержимого. Затем функции передачи содержимого передаются точке распространения по запросу.  

Приведенные ниже сведения помогут разобраться с тем, как диспетчер передачи пакетов управляет передачей содержимого в стандартные точки распространения и в точки распространения, настроенные как точки распространения по запросу.
1.  **Администратор развертывает содержимое в одной или нескольких точках распространения в пределах сайта.**  

    -   **Стандартная точка распространения**. Диспетчер распространения создает задание передачи содержимого для этого содержимого.  

    -   **Точка распространения по запросу**. Диспетчер распространения создает задание передачи содержимого для этого содержимого.  

2.  **Диспетчер распространения выполняет предварительные проверки.**  

    -   **Стандартная точка распространения**. Диспетчер распространения выполняет базовую проверку готовности каждой точки распространения для получения содержимого. После этой проверки диспетчер распространения уведомляет диспетчер передачи пакетов о возможности запуска передачи содержимого в точку распространения.  

    -   **Точка распространения по запросу**. Диспетчер распространения запускает диспетчер передачи пакетов, который затем уведомляет точку распространения по запросу о новом задании передачи содержимого. Диспетчер распространения не проверяет состояние удаленных точек распространения, которые являются точками распространения по запросу, так как каждая точка распространения по запросу управляет своими операциями передачи содержимого.  

3.  **Диспетчер передачи пакетов готовится к передаче содержимого.**  

    -   **Стандартная точка распространения**. Диспетчер передачи пакетов проверяет хранилища единственных копий содержимого всех указанных удаленных точек распространения. Это делается для того, чтобы выявить файлы, которые уже находятся в точках распространения. Затем диспетчер передачи пакетов помещает в очередь на передачу только те файлы, которые еще отсутствуют.  

        > [!NOTE]  
        >  Чтобы скопировать каждый файл, участвующий в распространении, в точку распространения, даже если файлы уже присутствуют в хранилище единственных копий точки распространения, используйте действие **Повторить** для содержимого.  

    -   **Точка распространения по запросу**. Для каждой точки распространения по запросу, участвующей в распространении, диспетчер передачи пакетов проверяет доступность содержимого в исходных точках распространения.  

        -   Если содержимое доступно хотя бы в одной исходной точке распространения, диспетчер передачи пакетов отправляет точке распространения по запросу уведомление. Оно предписывает точке распространения начать процесс передачи содержимого. Уведомление включает имена и размеры файлов, их атрибуты и хэш-значения.  

        -   Если содержимое еще не доступно, диспетчер передачи пакетов не отправляет уведомление точке распространения. Вместо этого он повторяет проверку каждые 20 минут, пока содержимое не станет доступным. Затем, когда содержимое становится доступным, диспетчер передачи пакетов отправляет уведомление этой точке распространения по запросу.  

        > [!NOTE]  
        >  Чтобы точка распространения по запросу скопировала каждый файл, подлежащий распространению, в точку распространения, даже если файлы уже присутствуют в хранилище единственных копий точки распространения по запросу, используйте действие **Повторить** для содержимого.  

4.  **Начинается передача содержимого.**  

    -   **Стандартная точка распространения**. Диспетчер передачи пакетов копирует файлы в каждую удаленную точку распространения. Во время передачи в стандартную точку распространения происходит следующее.  

        -   По умолчанию диспетчер передачи пакетов может одновременно обрабатывать три уникальных пакета и параллельно распространять их в пять точек распространения. Эти параметры обобщенно называются **Параметры одновременного распространения**. Чтобы настроить одновременное распространение, в диалоговом окне **Свойства компонента распространения программного обеспечения** для каждого сайта перейдите на вкладку **Общие**.  

        -   Диспетчер передачи пакетов использует настройки расписания и полосы пропускания сети каждой точки распространения при передаче содержимого в эту точку. Эти параметры можно настроить на вкладках **Расписание** и **Пределы скорости** диалогового окна **Свойства** для каждой удаленной точки распространения. Дополнительные сведения см. в разделе [Управление содержимым и инфраструктура содержимого для Configuration Manager](../../../core/servers/deploy/configure/manage-content-and-content-infrastructure.md).  

    -   **Точка распространения по запросу**. Когда точка распространения по запросу получает файл уведомления, она начинает процесс передачи содержимого. Процесс передачи выполняется независимо в каждой точке распространения запросу.  

        1.   Точка распространения по запросу выявляет в распространении содержимого файлы, которые отсутствуют в ее хранилище единственных копий, и готовится к загрузке этого содержимого из одной из своих исходных точек распространения.  

        2.   После этого точка распространения по запросу проверяет доступность содержимого на каждой исходной точке распространения, пока не найдет точку с содержимым. Когда точка распространения по запросу находит исходную точку распространения с содержимым, она начинает его загрузку.  

        > [!NOTE]  
        >  Процесс скачивания содержимого точкой распространения по запросу ничем не отличается от процесса, используемого клиентами Configuration Manager. Для передачи содержимого точкой распространения по запросу параметры одновременной передачи не используются. Параметры планирования и регулирования, настраиваемые для стандартных точек распространения, также не используются.  

5.  **Завершается передача содержимого.**  

    -   **Стандартная точка распространения**. Когда диспетчер передачи пакетов завершает передачу файлов в каждую из назначенных удаленных точек распространения, он проверяет хэш содержимого в точке распространения. Затем он уведомляет диспетчер распространения о завершении распространения.  

    -   **Точка распространения по запросу**. Когда точка распространения по запросу завершает скачивание содержимого, точка распространения проверяет хэш содержимого. Затем она отправляет в точку управления сайта сообщение о состоянии, которое означает успешность операции. Если в течение 60 минут это состояние не получено, диспетчер передачи пакетов выходит из спящего режима. Он проверяет подтверждение скачивания содержимого точкой распространения по запросу. Если скачивание содержимого продолжает выполняться, диспетчер передачи пакетов переходит в спящий режим еще на 60 минут, после чего повторно проверяет подтверждение от точки распространения по запросу. Этот цикл продолжается до тех пор, пока точка распространения по запросу не завершит передачу содержимого.  
