---
title: Разработка иерархии сайта
titleSuffix: Configuration Manager
description: Сведения о доступных топологиях и вариантах управления, позволяющие спланировать иерархию сайтов Configuration Manager.
ms.date: 07/30/2018
ms.prod: configuration-manager
ms.technology: configmgr-core
ms.topic: conceptual
ms.assetid: 07ce872e-1558-42ad-b5ad-582c5b1bdbb4
author: aczechowski
ms.author: aaroncz
manager: dougeby
ms.openlocfilehash: 3c642e97589ff345e4eb3a17b63b3fdfbc2891f9
ms.sourcegitcommit: bbf820c35414bf2cba356f30fe047c1a34c5384d
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/21/2020
ms.locfileid: "81703592"
---
# <a name="design-a-hierarchy-of-sites-for-configuration-manager"></a>Разработка иерархии сайтов для Configuration Manager

*Область применения: Configuration Manager (Current Branch)*

Перед установкой первого сайта новой иерархии Configuration Manager рекомендуется ознакомиться со следующей информацией:  

- Доступные топологии для Configuration Manager  

- Типы доступных сайтов и их связей друг с другом  

- Область управления, предоставляемая каждым типом сайта  

- Параметры управления содержимым, позволяющие уменьшить количество устанавливаемых сайтов  

Затем спланируйте топологию, которая будет наиболее эффективно обслуживать ваши текущие потребности бизнеса и которую в дальнейшем можно будет расширять, подстраиваясь под нужды растущего бизнеса.  

При планировании следует учитывать ограничения на добавление дополнительных сайтов в иерархию или на автономный сайт:  

- Установите новый первичный сайт под сайтом центра администрирования. Можно установить не более [поддерживаемого количества первичных сайтов](../configs/size-and-scale-numbers.md) в иерархии.  

- [Разверните автономный первичный сайт, чтобы установить новый сайт центра администрирования](../../servers/deploy/install/prerequisites-for-installing-sites.md#bkmk_expand), после чего можно установить дополнительные первичные сайты.  

- Установите вторичные сайты под первичным сайтом. Можно установить не более [поддерживаемого количества сайтов в первичных сайтах](../configs/size-and-scale-numbers.md) и во всей иерархии.  

- Вы не можете добавить ранее установленный сайт в имеющуюся иерархию для объединения двух автономных сайтов. Configuration Manager поддерживает установку только новых сайтов в имеющуюся иерархию.  


> [!NOTE]  
> При планировании новой установки Configuration Manager следует иметь в виду [заметки о выпуске](../../servers/deploy/install/release-notes.md), в которых подробно описаны текущие проблемы в активных версиях. Заметки о выпуске применимы ко всем ветвям Configuration Manager. При использовании [ветви Technical Preview](../../get-started/technical-preview.md) вы можете найти проблемы, характерные только для этой ветви, в документации по каждой версии Technical Preview.  



##  <a name="hierarchy-topology"></a><a name="bkmk_topology"></a> Топология иерархии  

Топологии иерархий могут варьироваться:  

- От простых — один автономный первичный сайт  

- До самых сложных — группа подключенных первичных и вторичных сайтов с сайтом центра администрирования на сайте верхнего уровня иерархии  

Ключевыми факторами, определяющими тип и число сайтов, используемых в иерархии, как правило, являются число и тип устройств, которые необходимо поддерживать.   

### <a name="standalone-primary-site"></a>Автономный первичный сайт

Используйте автономный первичный сайт, когда его возможностей достаточно для поддержки и управления всех устройств и пользователей. Дополнительные сведения см. в разделе [Изменение размера и масштабирование](../configs/size-and-scale-numbers.md). Эта топология также удобна, если обслуживание всех географических расположений организации может осуществляться одним первичным сайтом. Для управления сетевым трафиком используйте несколько точек управления в группах границ и тщательно спланированную инфраструктуру содержимого. Дополнительные сведения см. в разделах [Настройка групп границ](../../servers/deploy/configure/boundary-groups.md) и [Основные принципы управления содержимым](fundamental-concepts-for-content-management.md).  

Преимущества топологии:  

- Упрощенное администрирование.  

- Упрощенное назначение сайта клиентам и обнаружение доступных ресурсов и служб.  

- Исключение возможных задержек, вызванных репликацией баз данных между сайтами  

- Возможность развернуть автономный основной сайт до крупной иерархии с сайтом центра администрирования. Это позволяет установить новые первичные сайты для расширения масштаба развертывания.  


### <a name="central-administration-site-with-one-or-more-child-primary-sites"></a>Сайт центра администрирования с одним или несколькими дочерними первичными сайтами 

Используйте эту топологию, когда для поддержки управления всеми устройствами и пользователями требуется несколько первичных сайтов. Требуется, если необходимо использовать больше одного первичного сайта. 

Преимущества топологии:  

- Поддерживает до 25 первичных сайтов, позволяя расширить масштаб иерархии.    

- Вы всегда будете использовать сайт центра администрирования, если не переустанавливаете сайты. Это действие необратимо. Нельзя отсоединить дочерний первичный сайт, чтобы преобразовать его в автономный первичный сайт.  



##  <a name="determine-when-to-use-a-central-administration-site"></a><a name="BKMK_ChooseCAS"></a> Определение необходимости в использовании сайта центра администрирования  

Сайт центра администрирования используется для настройки параметров всей иерархии и для мониторинга всех сайтов и объектов в иерархии. Этот тип сайта не осуществляет прямое управление клиентами. Он координирует межсайтовую репликацию данных, включающую настройку сайтов и клиентов во всей иерархии.  

При принятии решения об установке сайта центра администрирования принимайте во внимание следующую информацию:  

- Сайт центра администрирования является сайтом верхнего уровня в иерархии.  

- При настройке иерархии, включающей несколько первичных сайтов, необходимо установить сайт центра администрирования.  

     - Если необходимо немедленно сохранить несколько первичных сайтов, сначала установите сайт центра администрирования.  

     - Если вы уже настроили первичный сайт и хотите установить сайт центра администрирования, [разверните автономный первичный сайт](../../servers/deploy/install/prerequisites-for-installing-sites.md#bkmk_expand).  

- Сайт центра администрирования поддерживает в качестве дочерних сайтов только первичные сайты.  

- Сайту центра администрирования нельзя назначать клиентов.  

- Сайт центра администрирования не поддерживает роли системы сайта, которые напрямую поддерживают клиенты, такие как точки управления и точки распространения.  

- Если консоль Configuration Manager подключена к сайту центра администрирования, вы можете управлять всеми клиентами в иерархии и выполнять все задачи по управлению сайтами. Эти задачи включают в себя установку точек управления или других ролей системы сайта на дочерних первичных или вторичных сайтах.  

- При использовании сайта центра администрирования этот сайт является единственным местом, где можно просмотреть данные о сайтах, собранные со всех сайтов в иерархии. К этим данным относится такая информация, как данные инвентаризации и сообщения о состоянии.  

- Настройте операции обнаружения в иерархии на сайте центра администрирования. На сайте центра администрирования назначьте методы обнаружения на отдельных первичных сайтах.  

- Для управления безопасностью в иерархии различным пользователям назначьте различные роли безопасности, области безопасности и коллекции. Эти конфигурации применяются к каждому узлу в иерархии.  

- Настройте репликацию для управления взаимодействием между сайтами в иерархии. Создайте расписание репликации баз данных для данных сайта, а также управление пропускной способностью передачи файловых данных между сайтами.  



##  <a name="determine-when-to-use-a-primary-site"></a><a name="BKMK_ChoosePriimary"></a> Определение необходимости в использовании первичного сайта  

Первичные сайты используются для управления клиентами. Установите первичный сайт как дочерний сайт для сайта центра администрирования или как первый сайт новой иерархии. Первичный сайт, который является первым сайтом иерархии, становится автономным первичным сайтом. Как дочерние, так и автономные первичные сайты поддерживают наличие вторичных сайтов.  

Необходимость добавления дополнительных первичных сайтов вызвана следующими причинами:  

- Для увеличения количества устройств, которыми можно управлять с помощью одной иерархии.  

- Для соответствия требованиям организационного управления. Например, первичный сайт можно установить в удаленном расположении и использовать для управления передачей содержимого развертывания по сети с низкой пропускной способностью.  

     - При передаче данных в точку распространения рекомендуется использовать параметры регулирования пропускной способности сети. Эта возможность управления содержимым может заменить необходимость установки дополнительных сайтов.  


При принятии решения об установке первичного сайта обратите внимание на приведенную ниже информацию.  

- Первичный сайт может быть автономным первичным сайтом или дочерним первичным сайтом в более крупной иерархии. Когда первичный сайт является членом иерархии с сайтом центра администрирования, сайты используют репликацию базы данных для репликации данных между собой. Если количество клиентов и устройств не превышает возможности одного первичного сайта, рекомендуется установить автономный первичный сайт. После установки автономного первичного сайта при необходимости в будущем можно развернуть его для передачи данных на новый сайт центра администрирования, чтобы вертикально увеличить масштаб своего развертывания.  

- Первичный сайт поддерживает в качестве родительского сайта только сайт центра администрирования.  

- Первичный сайт поддерживает в качестве дочерних сайтов только вторичные сайты, при этом поддерживается несколько дочерних вторичных сайтов.  

- Первичные сайты отвечают за обработку всех клиентских данных, полученных с назначенных им клиентов.  

- Для прямого взаимодействия с сайтом центра администрирования первичные сайты используют репликацию базы данных. Это поведение настраивается автоматически при установке нового сайта.  



##  <a name="determine-when-to-use-a-secondary-site"></a><a name="BKMK_ChooseSecondary"></a> Определение необходимости в использовании вторичного сайта  

Вторичные сайты используются для управления передачей содержимого развертывания и клиентских данных по сетям с низкой пропускной способностью.  

Управление вторичным сайтом осуществляется с сайта центра администрирования или с прямого родительского первичного сайта вторичного сайта. Вторичные сайты должны быть присоединены к первичному сайту. Их перемещение на другой родительский сайт возможно только после их удаления и последующей переустановки в качестве дочерних сайтов нового первичного сайта.

Однако в целях упрощения управления файловой репликацией содержимого развертывания это содержимое можно пересылать между двумя одноранговыми вторичными сайтами. Вторичный сайт передает клиентские данные на первичный сайт с помощью файловой репликации. Для взаимодействия со своим родительским первичным сайтом вторичный сайт также использует репликацию базы данных.  

Вторичный сайт можно установить в случае, если выполняется любое из указанных ниже условий.  

- Не требуется наличие локальной точки подключения для пользователя с правами администратора.  

- Необходимо управлять передачей содержимого развертывания на сайты, расположенные ниже в иерархии.  

- Необходимо управлять клиентской информацией, передаваемой на сайты, расположенные выше в иерархии.  

Если вы не хотите устанавливать вторичный сайт и у вас есть клиенты в удаленных расположениях, рассмотрите следующие решения:  

- Используйте одноранговые технологии, такие как Windows BranchCache  

- Настройте точку распространения для управления пропускной способностью и планированием   

Используйте эти возможности управления содержимым с вторичными сайтами или без них. Они помогают уменьшить размер инфраструктуры Configuration Manager. Дополнительные сведения о возможностях управления содержимым в Configuration Manager см. в разделе [Определение необходимости в использовании возможностей управления содержимым](#BKMK_ChooseSecondaryorDP).  


При решении установить вторичный сайт принимайте во внимание следующую информацию:  

- Если локальный экземпляр сервера SQL Server недоступен, то сервер вторичных сайтов автоматически установит экспресс-выпуск SQL Server во время установки сайта.  

- Установка вторичного сайта инициируется из консоли Configuration Manager, а не посредством запуска программы установки непосредственно на компьютере.  

- Вторичные сайты частично используют информацию из базы данных сайта. Это уменьшает объем данных, который SQL реплицирует между родительским первичным сайтом и вторичным сайтом.  

- Вторичные сайты поддерживаются маршрутизацию файлового содержимого на другие вторичные сайты этого же родительского первичного сайта.  

- При установке вторичного сайта на сервере вторичного сайта автоматически устанавливаются роли точки управления и точки распространения.  



##  <a name="determine-when-to-use-content-management-options"></a><a name="BKMK_ChooseSecondaryorDP"></a> Определение необходимости в использовании возможностей управления содержимым  

При наличии удаленных клиентов можно использовать различные возможности управления содержимым вместо создания первичных и вторичных сайтов. При использовании следующих вариантов часто отпадает необходимость в установке сайта:  

- Оптимизация доставки Windows 10  

- Одноранговый кэш Configuration Manager  

- Windows BranchCache  

- Настройка поддержки управления пропускной способностью в точке распространения  

- Ручное копирование содержимого в точки распространения (предварительная подготовка содержимого)  


Если выполняется какое-либо из перечисленных ниже условий, рассмотрите возможность развертывания точки распространения вместо установки еще одного сайта.  

- Пропускная способность вашей сети достаточна для того, чтобы клиентские компьютеры в удаленном расположении могли обмениваться данными с точкой управления на первичном сайте. Клиенты взаимодействуют с точкой управления для загрузки клиентской политики, отправки данных инвентаризации, отчетов о состоянии и сведений об обнаружении.  

- Фоновая интеллектуальная служба передачи (BITS) не обеспечивает достаточного контроля над пропускной способностью сети, соответствующего действующим требованиям к сети.  

Дополнительные сведения о возможностях управления содержимым в Configuration Manager см. в разделе [Основные принципы управления содержимым](fundamental-concepts-for-content-management.md).  



##  <a name="beyond-hierarchy-topology"></a><a name="bkmk_beyond"></a> Компоненты, дополняющие топологию иерархии  

Помимо начальной топологии иерархии также рассмотрите следующие вопросы:  

- Какие роли системы сайта предоставляют службы и возможности различных сайтов в иерархии?  

- Как вы будете управлять конфигурациями и возможностями в масштабе иерархии в вашей инфраструктуре?  


Ниже приведены типичные аспекты, которые рассматриваются в отдельных статьях. Эти сведения важны, так как они могут повлиять на структуру иерархии или зависеть от нее.  

- При подготовке к [управлению компьютерами и устройствами](../../clients/manage/manage-clients.md) необходимо определить, где будут размещаться устройства: в локальной среде или в облаке. Также доступно использование устройств пользователей (BYOD). Кроме того, необходимо определить, как вы будете управлять устройствами, которые поддерживают различные возможности управления. Например, управлять устройствами Windows 10 с помощью Configuration Manager или посредством интеграции с Microsoft Intune. Дополнительные сведения см. в статье [Выбор решения для управления устройствами](../choose-a-device-management-solution.md).  

- Подумайте, как доступная сетевая инфраструктура может повлиять на поток данных между удаленными расположениями. Дополнительные сведения см. в разделе [Подготовка сетевой среды](../network/configure-firewalls-ports-domains.md). Также учитывайте географическое расположение пользователей и устройств, а также получают ли они доступ к вашей инфраструктуре по локальной сети или через Интернет.  

- Планируйте инфраструктуру содержимого для эффективного распределения содержимого на управляемых устройствах. Этим содержимым могут быть приложения, обновления программного обеспечения или операционные системы. Дополнительные сведения см. в разделе [Управление содержимым и инфраструктурой содержимого](../../servers/deploy/configure/manage-content-and-content-infrastructure.md).  

- Определите, какие [функции и возможности Configuration Manager](../changes/features-and-capabilities.md) вы планируете использовать. Различные функции требуют различных ролей системы сайта или инфраструктуры Windows. В иерархии с несколькими сайтами решите, где их лучше развернуть для наиболее эффективного использования ресурсов сети и сервера.  

- Обратите внимание на аспекты безопасности данных и устройств, включая использование инфраструктуры открытых ключей (PKI). Дополнительные сведения см. в разделе [Требования к PKI-сертификатам](../network/pki-certificate-requirements.md).  


Изучите следующие статьи для конкретных конфигураций сайтов:  

- [Планирование использования поставщика SMS](plan-for-the-sms-provider.md)  

- [Планирование базы данных сайта](plan-for-the-site-database.md)  

- [Планирование серверов системы сайта и ролей системы сайта](plan-for-site-system-servers-and-site-system-roles.md)  

- [Планирование безопасности](../security/plan-for-security.md)  

- [Managing network bandwidth](manage-network-bandwidth.md) при развертывании содержимого в пределах сайта  


Рассмотрите конфигурации, охватывающие сайты и иерархии  

- [Возможности высокой доступности](../../servers/deploy/configure/high-availability-options.md) для сайтов и иерархий

- [Расширение схемы Active Directory](../network/extend-the-active-directory-schema.md) и настройка сайтов для [публикации данных сайта](../../servers/deploy/configure/publish-site-data.md)  

- [Передача данных между сайтами](data-transfers-between-sites.md)  

- [Основы ролевого администрирования](../../understand/fundamentals-of-role-based-administration.md)  

- [Управление клиентами в Интернете](../../clients/manage/manage-clients-internet.md)  

