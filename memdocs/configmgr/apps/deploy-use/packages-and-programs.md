---
title: Пакеты и программы
titleSuffix: Configuration Manager
description: Поддержка развертываний, использующих устаревшие пакеты и программы с Configuration Manager.
ms.date: 07/26/2019
ms.prod: configuration-manager
ms.technology: configmgr-app
ms.topic: conceptual
ms.assetid: caad0507-9913-415a-b13d-d36f8f0a1b80
author: aczechowski
manager: dougeby
ms.author: aaroncz
ms.openlocfilehash: 2c125212a13790e196d001f53411633d1e42d4f8
ms.sourcegitcommit: bbf820c35414bf2cba356f30fe047c1a34c5384d
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/21/2020
ms.locfileid: "81689292"
---
# <a name="packages-and-programs-in-configuration-manager"></a>Пакеты и программы в Configuration Manager

*Область применения: Configuration Manager (Current Branch)*

Configuration Manager по-прежнему поддерживает пакеты и программы, которые использовались в Configuration Manager 2007. Развертывание, использующее пакеты и программы, может быть более подходящим, нежели приложение, если выполняется развертывание следующих средств или сценариев:  

- Средства администрирования, которые не устанавливают приложение на компьютер
- "Одноразовые" сценарии, не требующие постоянного мониторинга.  
- Сценарии, которые выполняются в соответствии с повторяющимся расписанием и не могут использовать глобальную оценку.

> [!TIP]  
> Рекомендуется использовать компонент [Сценарии](create-deploy-scripts.md) в консоли Configuration Manager. Для некоторых из перечисленных выше ситуаций сценарии могут быть более эффективны, чем пакеты и программы.

Пакеты, перенесенные из более ранней версии Configuration Manager, можно развернуть в иерархии Configuration Manager. По завершении миграции пакеты отображаются в узле **Пакеты** рабочей области **Библиотека программного обеспечения** .

Такие пакеты можно изменять и развертывать аналогично тому, как это происходило при использовании распространения программного обеспечения. **Мастер импорта пакетов из определений** сохранен в Configuration Manager для импорта устаревших пакетов. Объявления преобразуются в развертывания при миграции из Configuration Manager 2007 в иерархию Configuration Manager.  

> [!NOTE]  
> Используйте диспетчер преобразования пакетов для преобразования пакетов и программ в приложения Configuration Manager.  
>
> Начиная с версии 1806, Диспетчер преобразования пакетов интегрирован в Configuration Manager. Дополнительные сведения см. в разделе [Диспетчер преобразования пакетов](../pcm/package-conversion-manager.md).  

Пакеты могут использовать некоторые новые возможности Configuration Manager, включая группы точек распространения и мониторинг. Приложения Microsoft Application Virtualization (App-V) невозможно развернуть с помощью пакетов и программ в Configuration Manager. Для распространения виртуальных приложений создайте их как приложения Configuration Manager. Дополнительные сведения см. в разделе [Развертывание виртуальных приложений App-V](../get-started/deploying-app-v-virtual-applications.md).  


## <a name="create-a-package-and-program"></a>Создание пакета и программы

### <a name="use-the-create-package-and-program-wizard"></a>Использование мастера создания пакетов и программ

1. В консоли Configuration Manager перейдите в рабочую область **Библиотека программного обеспечения**, разверните узел **Управление приложениями** и щелкните **Пакеты**.  

2. На вкладке **Главная** на ленте в группе **Создать** нажмите кнопку **Создать пакет**.  

3. На странице **Пакет** в **мастере создания пакетов и программ**укажите перечисленные ниже сведения.  

    - **Имя** — Укажите имя пакета, не более 50 символов.  

    - **Описание**. Укажите описание пакета, не более 128 символов.  

    - **Производитель** (необязательно). Укажите наименование производителя, чтобы было удобнее идентифицировать пакет в консоли Configuration Manager. Это имя не должно быть длиннее 32 символов.

    - **Язык** (необязательно). Укажите языковую версию пакета (необязательно), не более 32 символов.  

    - **Версия** (необязательно). Укажите номер версии пакета, не более 32 символов.

    - **Этот пакет содержит исходные файлы**. Данный параметр указывает, требует ли пакет наличия исходных файлов на клиентских устройствах. По умолчанию этот параметр в мастере отключен и Configuration Manager не использует точки распространения для пакета. При выборе этого параметра укажите содержимое пакета для распространения в точки распространения.  

    - **Исходная папка**. Если пакет содержит исходные файлы, нажмите кнопку **Обзор**, чтобы открыть диалоговое окно **Задать исходную папку**, в котором можно указать расположение исходных файлов пакета.  

        > [!NOTE]  
        > Учетная запись компьютера сервера сайта должна иметь разрешения на чтение для указанной исходной папки.  

    - Начиная с версии 1906, если требуется предварительное кэширование содержимого на клиенте, укажите **архитектуру** и **язык** пакета. Дополнительные сведения см. в разделе [Настройка предварительного кэширования содержимого](../../osd/deploy-use/configure-precache-content.md).<!--4224642-->  

4. На странице **Тип программы** в **мастере создания пакетов и программ** выберите тип программы, которую нужно создать, а затем нажмите кнопку **Далее**. Вы можете создать программу для [компьютера](#create-a-standard-program), [устройства](#create-a-device-program) или пропустить этот шаг и создать программу позже.  

    > [!TIP]  
    > Чтобы создать программу для существующего пакета, сначала выберите пакет. Затем на вкладке **Главная** в группе **Пакет** щелкните элемент **Создать программу**, чтобы открыть **мастер создания программ**.  

#### <a name="create-a-standard-program"></a>Создание стандартной программы

1. На странице **Тип программы** в **мастере создания пакетов и программ** выберите **Стандартная программа**, а затем нажмите кнопку **Далее**.  

2. На странице **Стандартная программа** укажите следующие сведения.  

    - **Имя.** Укажите имя программы, не более 50 символов.  

        > [!NOTE]  
        > Имя программы должно быть уникальным в пределах пакета. После создания программы ее имя невозможно изменить.  

    - **Командная строка**: Введите команду, используемую для запуска этой программы из командной строки, или нажмите кнопку **Обзор**, чтобы найти нужный файл.  

        Если не указано расширение файла, то Configuration Manager пытается использовать COM, EXE и BAT в качестве возможных расширений.  

        Когда клиент запускает программу, Configuration Manager выполняет поиск файла в следующих расположениях.

        - В пакете
        - В локальной папке Windows
        - В локальной папке *%path%*

        Если файл не удается найти, происходит сбой программы.  

    - **Рабочая папка** (необязательно). Укажите папку, из которой запускается программа, не более 127 символов. Эта папка может быть абсолютным путем на клиенте. Это также может быть относительный путь к папке в точке распространения, содержащей пакет.

    - **Run**(Запуск): Режим запуска программы на клиентских компьютерах. Выберите один из следующих параметров:  

        - **Обычный**. Программа запускается в обычном режиме на основе параметров системы и программы по умолчанию. Этот режим используется по умолчанию.  

        - **Свернуто**. Программа запускается на клиентских устройствах в свернутом виде. Пользователи видят операции установки в области уведомлений или на панели задач.  

        - **Развернуто**. Программа запускается на клиентских устройствах в развернутом виде. Пользователи видят все операции установки.  

        - **Скрыто**. Программа запускается на клиентских устройствах в скрытом виде. Пользователи не видят никаких операций установки.  

    - **Требования к запуску программы**. Укажите, может ли программа запускаться только после входа пользователя в систему, пока никто не вошел в систему, или в любом случае.  

    - **Режим выполнения**: Укажите, запускается ли программа с разрешениями администратора или с разрешениями пользователя, выполнившего вход в систему.  

    - **Разрешить пользователям видеть ход установки программы и взаимодействовать с ним**. По возможности укажите, разрешено ли пользователям взаимодействовать с установкой программы. Этот параметр доступен, только если выполняются следующие условия.

        - Параметру **Требования для запуска** присвоено значение **Пока никто не вошел в систему** или **В любом случае**
        - Параметру **Режим запуска** присвоено значение **Запустить с правами администратора**  

    - **Режим диска**. Выберите, каким образом эта программа запускается по сети. Выберите один из следующих вариантов.  

        - **Работа с UNC-именем**. Укажите, что программа запускается с именем в формате UNC. Это значение по умолчанию.  

        - **Требуется буква диска**. Укажите, что программе требуется буква диска для полного определения его расположения. Для этого параметра Configuration Manager может использовать любую доступную букву диска на клиенте.  

        - **Требуется определенная буква диска**. Указывает, что программе требуется определенное имя диска, которое указывается для полного определения ее расположения. Например, **Z:** . Если указанная буква диска уже используется на клиенте, программа не запустится.  

    - **Повторно подключаться к точке распространения при входе**. Укажите, будет ли клиент повторно подключаться к точке распространения при входе пользователя в систему. По умолчанию этот параметр не включен в мастере.

3. На странице **Требования** в **мастере создания пакетов и программ** укажите перечисленные ниже сведения.  

    - **Запустить сначала другую программу**. Выберите пакет и программу, которые запускаются перед запуском данного пакета и программы.  

    - **Требования к платформе**: Выберите **Эта программа может запускаться на любой платформе** или **Эту программу можно запускать только на указанных платформах**. Затем выберите версии ОС, которые необходимы клиентам для установки этого пакета и программы.  

    - **Место на диске**: Укажите объем свободного места на диске, необходимого для работы программы на компьютере. Значение по умолчанию — **Неизвестно**. При необходимости укажите целое число, большее или равное нулю. Если задано значение, также выберите единицы измерения для него.  

    - **Maximum allowed run time (minutes)** (Максимально допустимое время выполнения (в минутах)): Укажите максимальное время работы программы на клиентском компьютере. Значение по умолчанию — **120** минут. Используйте только целые числа больше нуля.  

        > [!IMPORTANT]  
        > Если для коллекции, в которой развернута эта программа, используются периоды обслуживания и значение параметра **Максимально допустимое время выполнения** больше запланированного периода обслуживания, может произойти конфликт. Если для максимально допустимого времени выполнения задано значение **Неизвестно**, программа запускается во время периода обслуживания. После окончания периода обслуживания она продолжит выполняться по мере необходимости. Если для параметра максимального времени выполнения задано значение, превышающее продолжительность любого доступного периода обслуживания, клиент не запускает программу.  

        Если указано значение **Неизвестно**, Configuration Manager устанавливает максимально допустимое время выполнения, равное 12 часам (720 минутам).  

        > [!NOTE]  
        > Если программа превышает максимальное время выполнения, Configuration Manager останавливает ее, если выполняются следующие условия.
        >
        > - Включен параметр **Запустить с правами администратора**
        > - Не выбран параметр **Разрешить пользователям видеть ход установки программы и взаимодействовать с ним**  

#### <a name="create-a-device-program"></a>Создание программы для устройства  

1. На странице **Тип программы** в **мастере создания пакетов и программ**выберите **Программа для устройства**, а затем нажмите кнопку **Далее**.  

2. На странице **Программа для устройства** укажите следующие параметры.  

    - **Имя** — Укажите имя программы, не более 50 символов.  

        > [!NOTE]  
        > Имя программы должно быть уникальным в пределах пакета. После создания программы ее имя невозможно изменить.  

    - **Комментарий** (необязательно). Укажите комментарий для программы устройства, не более 127 символов.  

    - **Папка загрузки**. Укажите имя папки на устройстве, в которой будут храниться исходные файлы пакета. Значение по умолчанию — `\Temp\`.  

    - **Командная строка**: Введите командную строку, которая будет использоваться для запуска этой программы. Чтобы перейти к расположению файла, нажмите **Обзор**.  

    - **Запустить командную строку в папке загрузки**. Выберите этот параметр, чтобы запустить программу из папки загрузки.  

    - **Запустить командную строку из этой папки**. Выберите этот параметр, чтобы указать другую папку для запуска программы.  

3. На странице **Требования** укажите следующие параметры.  

    - **Место на диске**: Укажите объем дискового пространства, необходимого для программного обеспечения. Клиент отображает это значение для пользователей мобильных устройств перед установкой программы.  

    - **Загрузить программу**. Укажите, когда мобильное устройство может скачать эту программу. Можно выбрать **Как можно скорее**, **Только по быстрой сети**или **Только когда устройство подключено**.  

    - **Дополнительные требования**. Укажите любые дополнительные требования для этой программы. Пользователи видят эти требования перед установкой программного обеспечения. Например можно уведомить пользователей, их необходимо закрыть все другие приложения перед запуском программы.  

## <a name="deploy-packages-and-programs"></a>Развертывание пакетов и программ  

1. В консоли Configuration Manager перейдите в рабочую область **Библиотека программного обеспечения**, разверните узел **Управление приложениями** и щелкните **Пакеты**.  

2. Выберите пакет для развертывания. На вкладке **Главная** на ленте в группе **Развертывание** выберите **Развернуть**.  

3. На странице **Общие** **мастера развертывания программного обеспечения** укажите имя пакета и программы, которые требуется развернуть. Выберите коллекцию, в которой требуется развернуть пакет и программу, а также укажите любые дополнительные комментарии.  

    Чтобы сохранить содержимое пакета в заданной по умолчанию группе точек распространения коллекции, выберите параметр **Использовать группы точек распространения по умолчанию, связанные с этой коллекцией**. Этот параметр будет недоступен, если эта коллекция не была связана с группой точек распространения.  

4. На странице **Содержимое** нажмите **Добавить**. Выберите точки распространения или группы точек распространения, в которые требуется распространить содержимое для этого пакета и программы.  

5. На странице **Параметры развертывания** настройте следующие параметры.  

    - **Назначение**. Выберите один из следующих вариантов.

        - **Доступно**. Пользователь увидит опубликованные пакет и программу в центре программного обеспечения и сможет установить их по запросу.  

        - **Обязательное**. Пакет и программа развертываются автоматически в соответствии с настроенным расписанием. В центре программного обеспечения можно отслеживать состояние развертывания и установить его до наступления крайнего срока.  

        > [!NOTE]
        > Если несколько пользователей вошли в устройство, пакет и развертывания последовательностей задач могут не отображаться в центре программного обеспечения.

    - **Отправлять wake-up пакеты**. Если для цели развертывания задано **Обязательное** и выбран этот параметр, сайт сначала отправляет на компьютеры wake-up пакет при наступлении крайнего срока установки. Перед использованием этого параметра настройте компьютеры для пробуждения по локальной сети. Дополнительные сведения см. в статье [Настройка пробуждения по локальной сети в System Center Configuration Manager](../../core/clients/deploy/configure-wake-on-lan.md).  

    - **Все клиенты должны использовать тарифицируемое подключение к Интернету для скачивания содержимого после наступления крайнего срока установки. Это может повлечь дополнительные затраты**  

    > [!NOTE]  
    > Параметр **Предварительно развертывать программное обеспечение на основном устройстве пользователя** недоступен при развертывании пакета и программы.  

6. На странице **Планирование** настройте время развертывания пакета и программы на клиентских устройствах.  

    В зависимости от заданного действия развертывания — **Доступно** или **Обязательное** — параметры на этой странице могут отличаться.  

    Если для развертывания указано **Обязательное**, выберите вариант поведения повторного запуска программы из списка **Поведение повторного запуска**. Выберите один из следующих параметров.  

    | поведение повторного запуска | Описание: |
    |----------------|-------------|
    | **Никогда не повторять запуск развернутой программы** | Клиент не будет повторно запускать программу. Такое поведение будет наблюдаться даже в случае изначального сбоя программы или изменения файлов программы. |
    | **Всегда повторять запуск программы** | Клиент всегда выполняется повторно в назначенное время развертывания. Такое поведение будет наблюдаться даже в случае, если программа уже успешно выполняется. Это удобно при выполнении повторяющихся развертываний при обновлении программы. |
    | **Повторить запуск, если предыдущая попытка не удалась** | В случае запланированного развертывания клиент повторно запускает программу, только если предыдущая попытка запуска не удалась. |
    | **Повторить запуск, если предыдущая попытка была успешной** | Клиент повторно запускает программу только в случае успешной предыдущей попытки запуска на клиенте. Такое поведение полезно при регулярном обновлении программы, и для каждого обновления требуется успешная установка предыдущего обновления. |

7. На странице **Взаимодействие с пользователем** укажите перечисленные ниже сведения.  

    - **Разрешить пользователям запускать программу независимо от назначений**. Пользователи могут устанавливать это программное обеспечение из центра программного обеспечения независимо от времени запланированной установки.  

    - **Установка программного обеспечения**. Позволяет устанавливать программное обеспечение вне заданных периодов обслуживания.  

    - **Перезагрузка системы (если это необходимо для завершения установки)** . Если для завершения установки требуется перезагрузить устройство, разрешите перезагрузку вне настроенных периодов обслуживания.  

    - **Встраиваемые устройства**. При развертывании пакетов и программ на устройствах Windows Embedded с включенным фильтром записи можно задать установку пакетов и программ на временном наложении, чтобы зафиксировать изменения позже. Кроме того, зафиксировать изменения можно по наступлении крайнего срока установки или в течение периода обслуживания. При фиксации изменений по наступлении крайнего срока установки или в течение периода обслуживания требуется перезагрузка, и изменения сохраняются на устройстве.  

        > [!NOTE]  
        > При развертывании пакета или программы на устройстве Windows Embedded убедитесь, что устройство является членом коллекции, которая содержит настроенного периода обслуживания. Дополнительные сведения о том, как периоды обслуживания используются при развертывании пакетов и программ для устройств Windows Embedded, см. в статье [Создание приложений Windows Embedded](../get-started/creating-windows-embedded-applications.md).  

8. На странице **Точки распространения** укажите перечисленные ниже сведения.  

    - **Параметры развертывания**. Укажите действие, которое выполняет клиент при использовании точки распространения в текущей группе границ. Также выберите действие для клиента, если клиент использует точку распространения из соседней группы границ или группы границ сайта по умолчанию.

        > [!IMPORTANT]  
        > Если выбран параметр **Запустить программу из точки распространения**, установите флажок **Копировать содержимое этого пакета в общую сетевую папку, расположенную в точках распространения** на вкладке **Доступ к данным** в свойствах пакета. В противном случае пакет будет недоступен для запуска из точек распространения.  

    - **Разрешить клиентам использовать точки распространения из группы границ сайта по умолчанию**. Если это содержимое недоступно в точках распространения в текущей или соседней группах границ, включите этот параметр, чтобы разрешить им использовать точки распространения в группе границ по умолчанию для сайта.

9. Завершите работу мастера.  

Развертывание можно просмотреть в узле **Развертывания** рабочей области **Мониторинг** и в области сведений на вкладке развертывания пакета после выбора нужного развертывания. Дополнительные сведения см. в разделе [Мониторинг пакетов и программ](#monitor-packages-and-programs).  


## <a name="monitor-packages-and-programs"></a>Мониторинг пакетов и программ

Для мониторинга развертываний пакетов и программ можно использовать те же процедуры, которые применяются для мониторинга приложений, как описано в разделе [Мониторинг приложений](monitor-applications-from-the-console.md).  

Пакеты и программы также содержат ряд встроенных отчетов, позволяющих осуществлять мониторинг сведений о состоянии развертывания пакетов и программ. Эти отчеты относятся к категориям **Распространение программного обеспечения – пакеты и программы** и **Распространение программного обеспечения – состояние развертывания пакетов и программ**.  

Дополнительные сведения о настройке отчетов в Configuration Manager см. в разделе [Общие сведения об отчетах](../../core/servers/manage/introduction-to-reporting.md).  


## <a name="manage-packages-and-programs"></a>Управление пакетами и программами

В рабочей области **Библиотека программного обеспечения** разверните **Управление приложениями** и выберите узел **Пакеты**. Выберите пакет, которым требуется управлять, а затем выберите задачу управления.  

### <a name="create-prestage-content-file"></a>Создать файл с предварительно подготовленным содержимым

Открывает **мастер создания файла с предварительно подготовленным содержимым** для создания файла, в котором находится содержимое пакета. Используйте этот файл, чтобы вручную импортировать пакет на удаленную точку распространения. Это действие полезно при низкой пропускной способности сети между сервером сайта и точкой распространения.

### <a name="create-program"></a>Создание программы

Открывает **мастер создания программ** для создания программы для данного пакета.

### <a name="export"></a>Экспортировать

Открывает **мастер экспорта пакетов** для экспорта выбранного пакета и его содержимого в файл. Используйте этот файл для импорта файла в другую иерархию.

Сведения об импорте пакетов и программ см. в разделе [Создание пакетов и программ](#create-a-package-and-program).

### <a name="deploy"></a>Развернуть

Открывает **мастер развертывания программного обеспечения** для выполнения развертывания выбранного пакета и программы в коллекцию. Дополнительные сведения см. в разделе [Развертывание пакетов и программ](#deploy-packages-and-programs).

### <a name="distribute-content"></a>Распространение содержимого

Открывает **мастер распространения содержимого** для отправки содержимого для пакета и программы на выбранные точки распространения или в группы точек распространения.

### <a name="update-distribution-points"></a>Обновление точек распространения

Обновляет точки распространения посредством загрузки актуального содержимого для выбранного пакета или программы.


## <a name="see-also"></a>См. также

- [Создание и запуск скриптов PowerShell из консоли Configuration Manager](create-deploy-scripts.md)

- [Диспетчер преобразования пакетов](../pcm/package-conversion-manager.md)

- [Package definition files](package-definition-files.md) (Файлы определения пакета)
